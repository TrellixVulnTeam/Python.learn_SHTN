<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="book.css" type="text/css" />
</head>
<body>
<h2 id="&#38169;&#35823;&#21644;&#24322;&#24120;">8. &#38169;&#35823;&#21644;&#24322;&#24120;</h2>
<p>&#30452;&#21040;&#29616;&#22312;&#65292;&#25105;&#20204;&#36824;&#27809;&#26377;&#26356;&#22810;&#30340;&#25552;&#21450;&#38169;&#35823;&#20449;&#24687;&#65292;&#20294;&#26159;&#22914;&#26524;&#20320;&#30495;&#30340;&#23581;&#35797;&#20102;&#21069;&#38754;&#30340;&#20363;&#23376;&#65292;&#20063;&#35768;&#20320;&#24050;&#32463;&#35265;&#21040;&#36807;&#19968;&#20123;&#12290;Python&#65288;&#33267;&#23569;&#65289;&#26377;&#20004;&#31181;&#38169;&#35823;&#24456;&#23481;&#26131;&#21306;&#20998;&#65306;&#35821;&#27861;&#38169;&#35823; &#21644;&#24322;&#24120;&#12290;</p>
<h3 id="&#35821;&#27861;&#38169;&#35823;">8.1 &#35821;&#27861;&#38169;&#35823;</h3>
<p>&#35821;&#27861;&#38169;&#35823;&#65292;&#25110;&#32773;&#31216;&#20043;&#20026;&#35299;&#26512;&#38169;&#35823;&#65292;&#21487;&#33021;&#26159;&#20320;&#22312;&#23398;&#20064; Python &#36807;&#31243;&#20013;&#26368;&#28902;&#30340;&#19968;&#31181;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">while</span> <span class="va">True</span> <span class="bu">print</span>(<span class="st">&#39;Hello world&#39;</span>)
  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="op">in</span> ?
    <span class="cf">while</span> <span class="va">True</span> <span class="bu">print</span>(<span class="st">&#39;Hello world&#39;</span>)
                   <span class="op">^</span>
<span class="pp">SyntaxError</span>: invalid syntax</code></pre></div>
<p>&#35821;&#27861;&#20998;&#26512;&#22120;&#25351;&#20986;&#20102;&#20986;&#38169;&#30340;&#19968;&#34892;&#65292;&#24182;&#19988;&#22312;&#26368;&#20808;&#25214;&#21040;&#30340;&#38169;&#35823;&#30340;&#20301;&#32622;&#26631;&#35760;&#20102;&#19968;&#20010;&#23567;&#23567;&#30340;&#8217;&#31661;&#22836;&#8217;&#12290;&#38169;&#35823;&#26159;&#30001;&#31661;&#22836;&#21069;&#38754; &#30340;&#26631;&#35760;&#24341;&#36215;&#30340;&#65288;&#33267;&#23569;&#26816;&#27979;&#21040;&#26159;&#36825;&#26679;&#30340;&#65289;&#65306; &#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#26816;&#27979;&#21040;&#38169;&#35823;&#21457;&#29983;&#22312;&#20989;&#25968;<code>print()</code>&#65292;&#22240;&#20026;&#22312;&#23427;&#20043;&#21069;&#32570;&#23569;&#19968;&#20010;&#20882;&#21495;<code>&#65288;':'&#65289;</code>&#12290;&#25991;&#20214;&#21517;&#21644;&#34892;&#21495;&#20250;&#19968;&#24182;&#36755;&#20986;&#65292;&#25152;&#20197;&#22914;&#26524;&#36816;&#34892;&#30340;&#26159;&#19968;&#20010;&#33050;&#26412;&#20320;&#23601;&#30693;&#36947;&#21435;&#21738;&#37324;&#26816;&#26597;&#38169;&#35823;&#20102;&#12290;</p>
<h3 id="&#24322;&#24120;">8.2 &#24322;&#24120;</h3>
<p>&#21363;&#20351;&#19968;&#26465;&#35821;&#21477;&#25110;&#34920;&#36798;&#24335;&#22312;&#35821;&#27861;&#19978;&#26159;&#27491;&#30830;&#30340;&#65292;&#22312;&#36816;&#34892;&#23427;&#30340;&#26102;&#20505;&#65292;&#20063;&#26377;&#21487;&#33021;&#21457;&#29983;&#38169;&#35823;&#12290;&#22312;&#25191;&#34892;&#26399;&#38388;&#26816;&#27979;&#21040;&#30340;&#38169;&#35823;&#34987;&#31216;&#20026;&#24322;&#24120; &#24182;&#19988;&#31243;&#24207;&#19981;&#20250;&#26080;&#26465;&#20214;&#22320;&#23849;&#28291;&#65306;&#20320;&#24456;&#24555;&#23601;&#20250;&#30693;&#36947;&#22914;&#20309;&#22312; Python &#31243;&#24207;&#20013;&#22788;&#29702;&#23427;&#20204;&#12290;&#28982;&#32780;&#22823;&#22810;&#25968;&#24322;&#24120;&#37117;&#19981;&#20250;&#34987;&#31243;&#24207;&#22788;&#29702;&#65292;&#23548;&#33268;&#20135;&#29983;&#31867;&#20284;&#19979;&#38754;&#30340;&#38169;&#35823;&#20449;&#24687;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="dv">10</span> <span class="op">*</span> (<span class="dv">1</span><span class="op">/</span><span class="dv">0</span>)
Traceback (most recent call last):
  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="op">in</span> ?
<span class="pp">ZeroDivisionError</span>: division by zero

<span class="dv">4</span> <span class="op">+</span> spam<span class="op">*</span><span class="dv">3</span>
Traceback (most recent call last):
  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="op">in</span> ?
<span class="pp">NameError</span>: name <span class="st">&#39;spam&#39;</span> <span class="op">is</span> <span class="op">not</span> defined

<span class="co">&#39;2&#39;</span> <span class="op">+</span> <span class="dv">2</span>
Traceback (most recent call last):
  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="op">in</span> ?
<span class="pp">TypeError</span>: Can<span class="st">&#39;t convert &#39;</span><span class="bu">int</span><span class="st">&#39; object to str implicitly</span></code></pre></div>
<p>&#26368;&#21518;&#19968;&#34892;&#30340;&#38169;&#35823;&#28040;&#24687;&#25351;&#31034;&#21457;&#29983;&#20102;&#20160;&#20040;&#20107;&#12290;&#24322;&#24120;&#26377;&#19981;&#21516;&#30340;&#31867;&#22411;&#65292;&#20854;&#31867;&#22411;&#20250;&#20316;&#20026;&#28040;&#24687;&#30340;&#19968;&#37096;&#20998;&#25171;&#21360;&#20986;&#26469;&#65306;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#30340;&#31867;&#22411;&#26377;<code>ZeroDivisionError</code>&#12289; <code>NameError</code>&#21644;<code>TypeError</code>&#12290;&#25171;&#21360;&#20986;&#26469;&#30340;&#24322;&#24120;&#31867;&#22411;&#30340;&#23383;&#31526;&#20018;&#23601;&#26159;&#20869;&#32622;&#30340;&#24322;&#24120;&#30340;&#21517;&#31216;&#12290;&#36825;&#23545;&#20110;&#25152;&#26377;&#20869;&#32622;&#30340;&#24322;&#24120;&#26159;&#27491;&#30830;&#30340;&#65292;&#20294;&#26159;&#23545;&#20110;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#24322;&#24120;&#23601;&#19981;&#19968;&#23450;&#20102;&#65288;&#23613;&#31649;&#36825;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#24815;&#20363;&#65289;&#12290;&#26631;&#20934;&#24322;&#24120;&#30340;&#21517;&#31216;&#37117;&#26159;&#20869;&#32622;&#30340;&#26631;&#35782;&#31526;&#65288;&#19981;&#26159;&#20445;&#30041;&#30340;&#20851;&#38190;&#23383;&#65289;&#12290;</p>
<p>&#36825;&#19968;&#34892;&#26368;&#21518;&#19968;&#37096;&#20998;&#32473;&#20986;&#20102;&#24322;&#24120;&#30340;&#35814;&#32454;&#20449;&#24687;&#21644;&#24341;&#36215;&#24322;&#24120;&#30340;&#21407;&#22240;&#12290;</p>
<p>&#38169;&#35823;&#20449;&#24687;&#30340;&#21069;&#38754;&#37096;&#20998;&#20197;&#22534;&#26632;&#22238;&#28335;&#30340;&#24418;&#24335;&#26174;&#31034;&#20102;&#24322;&#24120;&#21457;&#29983;&#30340;&#19978;&#19979;&#25991;&#12290;&#36890;&#24120;&#35843;&#29992;&#26632;&#37324;&#20250;&#21253;&#21547;&#28304;&#20195;&#30721;&#30340;&#34892;&#20449;&#24687;&#65292;&#20294;&#26159;&#26469;&#33258;&#26631;&#20934;&#36755;&#20837;&#30340;&#28304;&#30721;&#19981;&#20250;&#26174;&#31034;&#34892;&#20449;&#24687;&#12290;</p>
<p>&#20869;&#32622;&#30340;&#24322;&#24120; &#21015;&#20986;&#20102;&#20869;&#32622;&#30340;&#24322;&#24120;&#20197;&#21450;&#23427;&#20204;&#30340;&#21547;&#20041;&#12290;</p>
<h3 id="&#25243;&#20986;&#24322;&#24120;">8.3 &#25243;&#20986;&#24322;&#24120;</h3>
<p>&#21487;&#20197;&#36890;&#36807;&#32534;&#31243;&#26469;&#36873;&#25321;&#22788;&#29702;&#37096;&#20998;&#24322;&#24120;&#12290;&#30475;&#19968;&#19979;&#19979;&#38754;&#30340;&#20363;&#23376;&#65292;&#23427;&#20250;&#19968;&#30452;&#35201;&#27714;&#29992;&#25143;&#36755;&#20837;&#30452;&#21040;&#36755;&#20837;&#19968;&#20010;&#21512;&#27861;&#30340;&#25972;&#25968;&#20026;&#27490;&#65292;&#20294;&#20801;&#35768;&#29992;&#25143;&#20013;&#26029;&#36825;&#20010;&#31243;&#24207;&#65288;&#20351;&#29992;<code>Control-C</code>&#25110;&#31995;&#32479;&#25903;&#25345;&#30340;&#20219;&#20309;&#26041;&#27861;&#65289;&#65307;&#27880;&#24847;&#29992;&#25143;&#20135;&#29983;&#30340;&#20013;&#26029;&#24341;&#21457;&#30340;&#26159;<code>KeyboardInterrupt</code> &#24322;&#24120;&#12290;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">while</span> <span class="va">True</span>:
     <span class="cf">try</span>:
         x <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&quot;Please enter a number: &quot;</span>))
         <span class="cf">break</span>
     <span class="cf">except</span> <span class="pp">ValueError</span>:
         <span class="bu">print</span>(<span class="st">&quot;Oops!  That was no valid number.  Try again...&quot;</span>)</code></pre></div>
<p><code>Try</code>&#35821;&#21477;&#25353;&#20197;&#19979;&#26041;&#24335;&#24037;&#20316;&#12290;</p>
<ul>
<li>&#39318;&#20808;&#65292;&#25191;&#34892;<code>try</code> &#23376;&#21477;&#65288;<code>try</code>&#21644;<code>except</code>&#20851;&#38190;&#23383;&#20043;&#38388;&#30340;&#35821;&#21477;&#65289;&#12290;</li>
<li>&#22914;&#26524;&#26410;&#21457;&#29983;&#20219;&#20309;&#24322;&#24120;&#65292;&#24573;&#30053;<code>except</code> &#23376;&#21477;&#19988;<code>try</code>&#35821;&#21477;&#25191;&#34892;&#23436;&#27605;&#12290;</li>
<li>&#22914;&#26524;&#22312; <code>try</code> &#23376;&#21477;&#25191;&#34892;&#36807;&#31243;&#20013;&#21457;&#29983;&#24322;&#24120;&#65292;&#36339;&#36807;&#35813;&#23376;&#21477;&#30340;&#20854;&#20313;&#37096;&#20998;&#12290;&#22914;&#26524;&#24322;&#24120;&#30340;&#31867;&#22411;&#19982;<code>except</code>&#20851;&#38190;&#23383;&#21518;&#38754;&#30340;&#24322;&#24120;&#21517;&#21305;&#37197;, &#21017;&#25191;&#34892; <code>except</code> &#23376;&#21477;&#65292;&#28982;&#21518;&#32487;&#32493;&#25191;&#34892;try&#35821;&#21477;&#20043;&#21518;&#30340;&#20195;&#30721;&#12290;</li>
<li>&#22914;&#26524;&#24322;&#24120;&#30340;&#31867;&#22411;&#19982; <code>except</code> &#20851;&#38190;&#23383;&#21518;&#38754;&#30340;&#24322;&#24120;&#21517;&#19981;&#21305;&#37197;&#65292;&#23427;&#23558;&#34987;&#20256;&#36882;&#32473;&#19978;&#23618;&#30340;<code>try</code>&#35821;&#21477;&#65307;&#22914;&#26524;&#27809;&#26377;&#25214;&#21040;&#22788;&#29702;&#36825;&#20010;&#24322;&#24120;&#30340;&#20195;&#30721;&#65292;&#23427;&#23601;&#25104;&#20026;&#19968;&#20010;&#26410;&#22788;&#29702;&#24322;&#24120;&#65292;&#31243;&#24207;&#20250;&#32456;&#27490;&#36816;&#34892;&#24182;&#26174;&#31034;&#19968;&#26465;&#22914;&#19978;&#25152;&#31034;&#30340;&#20449;&#24687;&#12290;</li>
</ul>
<p><code>Try</code>&#35821;&#21477;&#21487;&#33021;&#26377;&#22810;&#20010;&#23376;&#21477;&#65292;&#20197;&#25351;&#23450;&#19981;&#21516;&#30340;&#24322;&#24120;&#22788;&#29702;&#31243;&#24207;&#12290;&#19981;&#36807;&#33267;&#22810;&#21482;&#26377;&#19968;&#20010;&#22788;&#29702;&#31243;&#24207;&#23558;&#34987;&#25191;&#34892;&#12290;&#22788;&#29702;&#31243;&#24207;&#21482;&#22788;&#29702;&#21457;&#29983;&#22312;&#30456;&#24212; <code>try</code> &#23376;&#21477;&#20013;&#30340;&#24322;&#24120;&#65292;&#19981;&#20250;&#22788;&#29702;&#21516;&#19968;&#20010;<code>try</code>&#23376;&#21477;&#30340;&#20854;&#20182;&#22788;&#29702;&#31243;&#24207;&#20013;&#21457;&#29983;&#30340;&#24322;&#24120;&#12290;&#19968;&#20010; <code>except</code> &#23376;&#21477;&#21487;&#20197;&#29992;&#24102;&#25324;&#21495;&#30340;&#20803;&#32452;&#21015;&#20986;&#22810;&#20010;&#24322;&#24120;&#30340;&#21517;&#23383;&#65292;&#20363;&#22914;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">except</span> (<span class="pp">RuntimeError</span>, <span class="pp">TypeError</span>, <span class="pp">NameError</span>):
        <span class="cf">pass</span></code></pre></div>
<p>&#26368;&#21518;&#19968;&#20010; <code>except</code> &#23376;&#21477;&#21487;&#20197;&#30465;&#30053;&#24322;&#24120;&#21517;&#31216;&#65292;&#20197;&#24403;&#20316;&#36890;&#37197;&#31526;&#20351;&#29992;&#12290;&#20351;&#29992;&#36825;&#31181;&#26041;&#24335;&#35201;&#29305;&#21035;&#23567;&#24515;&#65292;&#22240;&#20026;&#23427;&#20250;&#38544;&#34255;&#19968;&#20010;&#30495;&#23454;&#30340;&#31243;&#24207;&#38169;&#35823;&#65281;&#23427;&#36824;&#21487;&#20197;&#29992;&#26469;&#25171;&#21360;&#19968;&#26465;&#38169;&#35823;&#28040;&#24687;&#65292;&#28982;&#21518;&#37325;&#26032;&#24341;&#21457;&#24322;&#24120; &#65288;&#35753;&#35843;&#29992;&#32773;&#20063;&#21435;&#22788;&#29702;&#36825;&#20010;&#24322;&#24120;&#65289;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> sys

<span class="cf">try</span>:
    f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;myfile.txt&#39;</span>)
    s <span class="op">=</span> f.readline()
    i <span class="op">=</span> <span class="bu">int</span>(s.strip())
<span class="cf">except</span> <span class="pp">OSError</span> <span class="im">as</span> err:
    <span class="bu">print</span>(<span class="st">&quot;OS error: </span><span class="sc">{0}</span><span class="st">&quot;</span>.<span class="bu">format</span>(err))
<span class="cf">except</span> <span class="pp">ValueError</span>:
    <span class="bu">print</span>(<span class="st">&quot;Could not convert data to an integer.&quot;</span>)
<span class="cf">except</span>:
    <span class="bu">print</span>(<span class="st">&quot;Unexpected error:&quot;</span>, sys.exc_info()[<span class="dv">0</span>])
    <span class="cf">raise</span></code></pre></div>
<p><code>try...except</code>&#35821;&#21477;&#26377;&#19968;&#20010;&#21487;&#36873;&#30340;<code>else</code> &#23376;&#21477;&#65292;&#20854;&#20986;&#29616;&#26102;&#65292;&#24517;&#39035;&#25918;&#22312;&#25152;&#26377; <code>except</code> &#23376;&#21477;&#30340;&#21518;&#38754;&#12290;&#22914;&#26524;&#38656;&#35201;&#22312; <code>try</code> &#35821;&#21477;&#27809;&#26377;&#25243;&#20986;&#24322;&#24120;&#26102;&#25191;&#34892;&#19968;&#20123;&#20195;&#30721;&#65292;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#23376;&#21477;&#12290;&#20363;&#22914;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> arg <span class="op">in</span> sys.argv[<span class="dv">1</span>:]:
    <span class="cf">try</span>:
        f <span class="op">=</span> <span class="bu">open</span>(arg, <span class="st">&#39;r&#39;</span>)
    <span class="cf">except</span> <span class="pp">IOError</span>:
        <span class="bu">print</span>(<span class="st">&#39;cannot open&#39;</span>, arg)
    <span class="cf">else</span>:
        <span class="bu">print</span>(arg, <span class="st">&#39;has&#39;</span>, <span class="bu">len</span>(f.readlines()), <span class="st">&#39;lines&#39;</span>)
        f.close()</code></pre></div>
<p>&#20351;&#29992;<code>else</code>&#23376;&#21477;&#27604;&#25226;&#39069;&#22806;&#30340;&#20195;&#30721;&#25918;&#22312;<code>try</code>&#23376;&#21477;&#20013;&#35201;&#22909;&#65292;&#22240;&#20026;&#23427;&#21487;&#20197;&#36991;&#20813;&#24847;&#22806;&#25429;&#33719;&#19981;&#26159;&#30001;<code>try ...except&#35821;&#21477;</code>&#20445;&#25252;&#30340;&#20195;&#30721;&#25152;&#24341;&#21457;&#30340;&#24322;&#24120;&#12290;</p>
<p>&#24403;&#24322;&#24120;&#21457;&#29983;&#26102;&#65292;&#23427;&#21487;&#33021;&#24102;&#26377;&#30456;&#20851;&#25968;&#25454;&#65292;&#20063;&#31216;&#20026;&#24322;&#24120;&#30340;&#21442;&#25968;&#12290;&#21442;&#25968;&#30340;&#26377;&#26080;&#21644;&#31867;&#22411;&#21462;&#20915;&#20110;&#24322;&#24120;&#30340;&#31867;&#22411;&#12290;</p>
<p><code>except</code> &#23376;&#21477;&#21487;&#20197;&#22312;&#24322;&#24120;&#21517;&#20043;&#21518;&#25351;&#23450;&#19968;&#20010;&#21464;&#37327;&#12290;&#36825;&#20010;&#21464;&#37327;&#23558;&#32465;&#23450;&#20110;&#19968;&#20010;&#24322;&#24120;&#23454;&#20363;&#65292;&#21516;&#26102;&#24322;&#24120;&#30340;&#21442;&#25968;&#23558;&#23384;&#25918;&#22312;&#23454;&#20363;&#30340;<code>args</code>&#20013;&#12290;&#20026;&#26041;&#20415;&#36215;&#35265;&#65292;&#24322;&#24120;&#23454;&#20363;&#23450;&#20041;&#20102;<code>__str__()</code> &#65292;&#22240;&#27492;&#24322;&#24120;&#30340;&#21442;&#25968;&#21487;&#20197;&#30452;&#25509;&#25171;&#21360;&#32780;&#19981;&#24517;&#24341;&#29992;<code>.args</code>&#12290;&#20063;&#21487;&#20197;&#22312;&#24341;&#21457;&#24322;&#24120;&#20043;&#21069;&#20808;&#23454;&#20363;&#21270;&#19968;&#20010;&#24322;&#24120;&#65292;&#28982;&#21518;&#21521;&#23427;&#28155;&#21152;&#20219;&#20309;&#24819;&#35201;&#30340;&#23646;&#24615;&#12290;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>:
   <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">&#39;spam&#39;</span>, <span class="st">&#39;eggs&#39;</span>)
<span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> inst:
   <span class="bu">print</span>(<span class="bu">type</span>(inst))    <span class="co"># the exception instance</span>
   <span class="bu">print</span>(inst.args)     <span class="co"># arguments stored in .args</span>
   <span class="bu">print</span>(inst)          <span class="co"># __str__ allows args to be printed directly,</span>
                        <span class="co"># but may be overridden in exception subclasses</span>
   x, y <span class="op">=</span> inst.args     <span class="co"># unpack args</span>
   <span class="bu">print</span>(<span class="st">&#39;x =&#39;</span>, x)
   <span class="bu">print</span>(<span class="st">&#39;y =&#39;</span>, y)

<span class="op">&lt;</span><span class="kw">class</span> <span class="st">&#39;Exception&#39;</span><span class="op">&gt;</span>
(<span class="st">&#39;spam&#39;</span>, <span class="st">&#39;eggs&#39;</span>)
(<span class="st">&#39;spam&#39;</span>, <span class="st">&#39;eggs&#39;</span>)
x <span class="op">=</span> spam
y <span class="op">=</span> eggs</code></pre></div>
<p>&#23545;&#20110;&#26410;&#22788;&#29702;&#30340;&#24322;&#24120;&#65292;&#22914;&#26524;&#23427;&#21547;&#26377;&#21442;&#25968;&#65292;&#37027;&#20040;&#21442;&#25968;&#20250;&#20316;&#20026;&#24322;&#24120;&#20449;&#24687;&#30340;&#26368;&#21518;&#19968;&#37096;&#20998;&#25171;&#21360;&#20986;&#26469;&#12290;</p>
<p>&#24322;&#24120;&#22788;&#29702;&#31243;&#24207;&#19981;&#20165;&#22788;&#29702;&#30452;&#25509;&#21457;&#29983;&#22312; <code>try</code> &#23376;&#21477;&#20013;&#30340;&#24322;&#24120;&#65292;&#32780;&#19988;&#36824;&#22788;&#29702; <code>try</code> &#23376;&#21477;&#20013;&#35843;&#29992;&#30340;&#20989;&#25968;&#65288;&#29978;&#33267;&#38388;&#25509;&#35843;&#29992;&#30340;&#20989;&#25968;&#65289;&#24341;&#21457;&#30340;&#24322;&#24120;&#12290;&#20363;&#22914;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> this_fails():
    x <span class="op">=</span> <span class="dv">1</span><span class="op">/</span><span class="dv">0</span>

<span class="cf">try</span>:
    this_fails()
<span class="cf">except</span> <span class="pp">ZeroDivisionError</span> <span class="im">as</span> err:
    <span class="bu">print</span>(<span class="st">&#39;Handling run-time error:&#39;</span>, err)

Handling run<span class="op">-</span>time error: <span class="bu">int</span> division <span class="op">or</span> modulo by zero</code></pre></div>
<h3 id="&#24341;&#21457;&#24322;&#24120;">8.4 &#24341;&#21457;&#24322;&#24120;</h3>
<p><code>raise</code>&#35821;&#21477;&#20801;&#35768;&#31243;&#24207;&#21592;&#24378;&#34892;&#24341;&#21457;&#19968;&#20010;&#25351;&#23450;&#30340;&#24322;&#24120;&#12290;&#20363;&#22914;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">raise</span> <span class="pp">NameError</span>(<span class="st">&#39;HiThere&#39;</span>)
Traceback (most recent call last):
  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="op">in</span> ?
<span class="pp">NameError</span>: HiThere</code></pre></div>
<p><code>raise</code>&#30340;&#21807;&#19968;&#21442;&#25968;&#25351;&#31034;&#35201;&#24341;&#21457;&#30340;&#24322;&#24120;&#12290;&#23427;&#24517;&#39035;&#26159;&#19968;&#20010;&#24322;&#24120;&#23454;&#20363;&#25110;&#24322;&#24120;&#31867;&#65288;&#20174;Exception&#27966;&#29983;&#30340;&#31867;&#65289;&#12290;</p>
<p>&#22914;&#26524;&#20320;&#30830;&#23450;&#38656;&#35201;&#24341;&#21457;&#24322;&#24120;&#65292;&#20294;&#19981;&#25171;&#31639;&#22788;&#29702;&#23427;&#65292;&#19968;&#20010;&#31616;&#21333;&#24418;&#24335;&#30340;raise&#35821;&#21477;&#20801;&#35768;&#20320;&#37325;&#26032;&#24341;&#21457;&#24322;&#24120;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>:
    <span class="cf">raise</span> <span class="pp">NameError</span>(<span class="st">&#39;HiThere&#39;</span>)
<span class="cf">except</span> <span class="pp">NameError</span>:
    <span class="bu">print</span>(<span class="st">&#39;An exception flew by!&#39;</span>)
    <span class="cf">raise</span>

An exception flew by<span class="op">!</span>
Traceback (most recent call last):
  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">2</span>, <span class="op">in</span> ?
<span class="pp">NameError</span>: HiThere</code></pre></div>
<h3 id="&#29992;&#25143;&#23450;&#20041;&#30340;&#24322;&#24120;">8.5 &#29992;&#25143;&#23450;&#20041;&#30340;&#24322;&#24120;</h3>
<p>&#31243;&#24207;&#21487;&#20197;&#36890;&#36807;&#21019;&#24314;&#26032;&#30340;&#24322;&#24120;&#31867;&#26469;&#21629;&#21517;&#33258;&#24049;&#30340;&#24322;&#24120;&#65288;Python &#31867;&#30340;&#26356;&#22810;&#20869;&#23481;&#35831;&#21442;&#35265;&#31867;&#65289;&#12290;&#24322;&#24120;&#36890;&#24120;&#24212;&#35813;&#32487;&#25215;Exception&#31867;&#65292;&#30452;&#25509;&#32487;&#25215;&#25110;&#32773;&#38388;&#25509;&#32487;&#25215;&#37117;&#21487;&#20197;&#12290;&#20363;&#22914;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">class</span> MyError(<span class="pp">Exception</span>):
    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, value):
        <span class="va">self</span>.value <span class="op">=</span> value
    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):
        <span class="cf">return</span> <span class="bu">repr</span>(<span class="va">self</span>.value)

<span class="cf">try</span>:
    <span class="cf">raise</span> MyError(<span class="dv">2</span><span class="op">*</span><span class="dv">2</span>)
<span class="cf">except</span> MyError <span class="im">as</span> e:
    <span class="bu">print</span>(<span class="st">&#39;My exception occurred, value:&#39;</span>, e.value)

My exception occurred, value: <span class="dv">4</span>
<span class="cf">raise</span> MyError(<span class="st">&#39;oops!&#39;</span>)
Traceback (most recent call last):
  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="op">in</span> ?
__main__.MyError: <span class="st">&#39;oops!&#39;</span></code></pre></div>
<p>&#22312;&#27492;&#31034;&#20363;&#20013;&#65292;<code>Exception</code>&#40664;&#35748;&#30340;<code>__init__()</code>&#34987;&#35206;&#30422;&#20102;&#12290;&#26032;&#30340;&#34892;&#20026;&#31616;&#21333;&#22320;&#21019;&#24314;&#20102;<code>value</code> &#23646;&#24615;&#12290;&#36825;&#23558;&#26367;&#25442;&#40664;&#35748;&#30340;&#21019;&#24314;<strong>args</strong> &#23646;&#24615;&#30340;&#34892;&#20026;&#12290;</p>
<p>&#24322;&#24120;&#31867;&#21487;&#20197;&#20687;&#20854;&#20182;&#31867;&#19968;&#26679;&#20570;&#20219;&#20309;&#20107;&#24773;&#65292;&#20294;&#26159;&#36890;&#24120;&#37117;&#20250;&#27604;&#36739;&#31616;&#21333;&#65292;&#21482;&#25552;&#20379;&#19968;&#20123;&#23646;&#24615;&#20197;&#20801;&#35768;&#24322;&#24120;&#22788;&#29702;&#31243;&#24207;&#33719;&#21462;&#38169;&#35823;&#30456;&#20851;&#30340;&#20449;&#24687;&#12290;&#21019;&#24314;&#19968;&#20010;&#33021;&#22815;&#24341;&#21457;&#20960;&#31181;&#19981;&#21516;&#38169;&#35823;&#30340;&#27169;&#22359;&#26102;&#65292;&#19968;&#20010;&#36890;&#24120;&#30340;&#20570;&#27861;&#26159;&#20026;&#35813;&#27169;&#22359;&#23450;&#20041;&#30340;&#24322;&#24120;&#21019;&#24314;&#19968;&#20010;&#22522;&#31867;&#65292;&#28982;&#21518;&#22522;&#20110;&#36825;&#20010;&#22522;&#31867;&#20026;&#19981;&#21516;&#30340;&#38169;&#35823;&#24773;&#20917;&#21019;&#24314;&#29305;&#23450;&#30340;&#23376;&#31867;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">class</span> Error(<span class="pp">Exception</span>):
    <span class="co">&quot;&quot;&quot;Base class for exceptions in this module.&quot;&quot;&quot;</span>
    <span class="cf">pass</span>

<span class="kw">class</span> InputError(Error):
    <span class="co">&quot;&quot;&quot;Exception raised for errors in the input.</span>

<span class="co">    Attributes:</span>
<span class="co">        expression -- input expression in which the error occurred</span>
<span class="co">        message -- explanation of the error</span>
<span class="co">    &quot;&quot;&quot;</span>

    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, expression, message):
        <span class="va">self</span>.expression <span class="op">=</span> expression
        <span class="va">self</span>.message <span class="op">=</span> message

<span class="kw">class</span> TransitionError(Error):
    <span class="co">&quot;&quot;&quot;Raised when an operation attempts a state transition that&#39;s not</span>
<span class="co">    allowed.</span>

<span class="co">    Attributes:</span>
<span class="co">        previous -- state at beginning of transition</span>
<span class="co">        next -- attempted new state</span>
<span class="co">        message -- explanation of why the specific transition is not allowed</span>
<span class="co">    &quot;&quot;&quot;</span>

    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, previous, <span class="bu">next</span>, message):
        <span class="va">self</span>.previous <span class="op">=</span> previous
        <span class="va">self</span>.<span class="bu">next</span> <span class="op">=</span> <span class="bu">next</span>
        <span class="va">self</span>.message <span class="op">=</span> message</code></pre></div>
<p>&#22823;&#22810;&#25968;&#24322;&#24120;&#30340;&#21517;&#23383;&#37117;&#20197;<code>&quot;Error&quot;</code>&#32467;&#23614;&#65292;&#31867;&#20284;&#20110;&#26631;&#20934;&#24322;&#24120;&#30340;&#21629;&#21517;&#12290;</p>
<p>&#24456;&#22810;&#26631;&#20934;&#27169;&#22359;&#20013;&#37117;&#23450;&#20041;&#20102;&#33258;&#24049;&#30340;&#24322;&#24120;&#26469;&#25253;&#21578;&#22312;&#23427;&#20204;&#25152;&#23450;&#20041;&#30340;&#20989;&#25968;&#20013;&#21487;&#33021;&#21457;&#29983;&#30340;&#38169;&#35823;&#12290;<a href="http://python.usyiyi.cn/python_343/tutorial/classes.html#tut-classes">&#31867;</a> &#36825;&#19968;&#31456;&#32473;&#20986;&#20102;&#31867;&#30340;&#35814;&#32454;&#20449;&#24687;&#12290;</p>
<h3 id="&#23450;&#20041;&#28165;&#29702;&#25805;&#20316;">8.6 &#23450;&#20041;&#28165;&#29702;&#25805;&#20316;</h3>
<p>Try&#35821;&#21477;&#26377;&#21478;&#19968;&#20010;&#21487;&#36873;&#30340;&#23376;&#21477;&#65292;&#30446;&#30340;&#22312;&#20110;&#23450;&#20041;&#24517;&#39035;&#22312;&#25152;&#26377;&#24773;&#20917;&#19979;&#25191;&#34892;&#30340;&#28165;&#29702;&#25805;&#20316;&#12290;&#20363;&#22914;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>:
    <span class="cf">raise</span> <span class="pp">KeyboardInterrupt</span>
<span class="cf">finally</span>:
    <span class="bu">print</span>(<span class="st">&#39;Goodbye, world!&#39;</span>)

Goodbye, world<span class="op">!</span>
<span class="pp">KeyboardInterrupt</span></code></pre></div>
<p>&#19981;&#31649;&#26377;&#27809;&#26377;&#21457;&#29983;&#24322;&#24120;&#65292;&#22312;&#31163;&#24320;<code>try</code>&#35821;&#21477;&#20043;&#21069;&#24635;&#26159;&#20250;&#25191;&#34892;<code>finally</code>&#23376;&#21477;&#12290;&#24403;<code>try</code>&#23376;&#21477;&#20013;&#21457;&#29983;&#20102;&#19968;&#20010;&#24322;&#24120;&#65292;&#24182;&#19988;&#27809;&#26377;<code>except</code>&#23383;&#21477;&#22788;&#29702;&#65288;&#25110;&#32773;&#24322;&#24120;&#21457;&#29983;&#22312;try&#25110;else&#23376;&#21477;&#20013;&#65289;&#65292;&#22312;&#25191;&#34892;&#23436;<code>finally</code>&#23376;&#21477;&#21518;&#23558;&#37325;&#26032;&#24341;&#21457;&#36825;&#20010;&#24322;&#24120;&#12290;try&#35821;&#21477;&#30001;&#20110;break&#12289;contine&#25110;return&#35821;&#21477;&#31163;&#24320;&#26102;&#65292;&#21516;&#26679;&#20250;&#25191;&#34892;finally&#23376;&#21477;&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#26356;&#22797;&#26434;&#20123;&#30340;&#20363;&#23376;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> divide(x, y):
    <span class="cf">try</span>:
        result <span class="op">=</span> x <span class="op">/</span> y
    <span class="cf">except</span> <span class="pp">ZeroDivisionError</span>:
        <span class="bu">print</span>(<span class="st">&quot;division by zero!&quot;</span>)
    <span class="cf">else</span>:
        <span class="bu">print</span>(<span class="st">&quot;result is&quot;</span>, result)
    <span class="cf">finally</span>:
        <span class="bu">print</span>(<span class="st">&quot;executing finally clause&quot;</span>)

divide(<span class="dv">2</span>, <span class="dv">1</span>)
result <span class="op">is</span> <span class="fl">2.0</span>
executing <span class="cf">finally</span> clause
divide(<span class="dv">2</span>, <span class="dv">0</span>)
division by zero<span class="op">!</span>
executing <span class="cf">finally</span> clause
divide(<span class="st">&quot;2&quot;</span>, <span class="st">&quot;1&quot;</span>)
executing <span class="cf">finally</span> clause
Traceback (most recent call last):
  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="op">in</span> ?
  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">3</span>, <span class="op">in</span> divide
<span class="pp">TypeError</span>: unsupported operand <span class="bu">type</span>(s) <span class="cf">for</span> <span class="op">/</span>: <span class="st">&#39;str&#39;</span> <span class="op">and</span> <span class="st">&#39;str&#39;</span></code></pre></div>
<p>&#27491;&#22914;&#24744;&#25152;&#30475;&#21040;&#30340;&#65292;&#22312;&#20219;&#20309;&#24773;&#20917;&#19979;&#37117;&#20250;&#25191;&#34892;<code>finally</code>&#23376;&#21477;&#12290;&#30001;&#20004;&#20010;&#23383;&#31526;&#20018;&#30456;&#38500;&#24341;&#21457;&#30340; TypeError&#24322;&#24120;&#27809;&#26377;&#34987;except&#23376;&#21477;&#22788;&#29702;&#65292;&#22240;&#27492;&#22312;&#25191;&#34892;<code>finally</code>&#23376;&#21477;&#21518;&#34987;&#37325;&#26032;&#24341;&#21457;&#12290;</p>
<p>&#22312;&#30495;&#23454;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#65292; <code>finally</code>&#23376;&#21477;&#29992;&#20110;&#37322;&#25918;&#22806;&#37096;&#36164;&#28304;&#65288;&#20363;&#22914;&#25991;&#20214;&#25110;&#32593;&#32476;&#36830;&#25509;&#65289;&#65292;&#19981;&#31649;&#36164;&#28304;&#30340;&#20351;&#29992;&#26159;&#21542;&#25104;&#21151;&#12290;</p>
<h3 id="&#28165;&#29702;&#25805;&#20316;&#30340;&#39044;&#23450;&#20041;">8.7 &#28165;&#29702;&#25805;&#20316;&#30340;&#39044;&#23450;&#20041;</h3>
<p>&#26377;&#20123;&#23545;&#35937;&#23450;&#20041;&#20102;&#22312;&#19981;&#38656;&#35201;&#35813;&#23545;&#35937;&#26102;&#30340;&#26631;&#20934;&#28165;&#29702;&#25805;&#20316;&#65292;&#26080;&#35770;&#35813;&#23545;&#35937;&#30340;&#20351;&#29992;&#26159;&#25104;&#21151;&#36824;&#26159;&#22833;&#36133;&#12290;&#30475;&#30475;&#19979;&#38754;&#30340;&#31034;&#20363;&#65292;&#23427;&#23581;&#35797;&#25171;&#24320;&#19968;&#20010;&#25991;&#20214;&#24182;&#25171;&#21360;&#20854;&#20869;&#23481;&#21040;&#23631;&#24149;&#12290;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> line <span class="op">in</span> <span class="bu">open</span>(<span class="st">&quot;myfile.txt&quot;</span>):
    <span class="bu">print</span>(line, end<span class="op">=</span><span class="st">&quot;&quot;</span>)</code></pre></div>
<p>&#36825;&#27573;&#20195;&#30721;&#30340;&#38382;&#39064;&#23601;&#26159;&#36825;&#37096;&#20998;&#20195;&#30721;&#25191;&#34892;&#23436;&#20043;&#21518;&#23427;&#36824;&#20250;&#35753;&#25991;&#20214;&#22312;&#19968;&#27573;&#19981;&#30830;&#23450;&#30340;&#26102;&#38388;&#20869;&#20445;&#25345;&#25171;&#24320;&#29366;&#24577;&#12290;&#36825;&#22312;&#31616;&#21333;&#30340;&#33050;&#26412;&#20013;&#27809;&#20160;&#20040;&#65292;&#20294;&#26159;&#22312;&#22823;&#22411;&#24212;&#29992;&#31243;&#24207;&#20013;&#21487;&#33021;&#26159;&#19968;&#20010;&#38382;&#39064;&#12290; <code>With</code>&#35821;&#21477;&#21487;&#20197;&#30830;&#20445;&#20687;&#25991;&#20214;&#36825;&#26679;&#30340;&#23545;&#35937;&#24635;&#33021;&#21450;&#26102;&#20934;&#30830;&#22320;&#34987;&#28165;&#29702;&#25481;&#12290;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&quot;myfile.txt&quot;</span>) <span class="im">as</span> f:
    <span class="cf">for</span> line <span class="op">in</span> f:
        <span class="bu">print</span>(line, end<span class="op">=</span><span class="st">&quot;&quot;</span>)</code></pre></div>
<p>&#25191;&#34892;&#35813;&#35821;&#21477;&#21518;&#65292;&#25991;&#20214;f &#23558;&#22987;&#32456;&#34987;&#20851;&#38381;&#65292;&#21363;&#20351;&#22312;&#22788;&#29702;&#26576;&#19968;&#34892;&#26102;&#36935;&#21040;&#20102;&#38382;&#39064;&#12290;&#25552;&#20379;&#39044;&#23450;&#20041;&#30340;&#28165;&#29702;&#34892;&#20026;&#30340;&#23545;&#35937;&#65292;&#21644;&#25991;&#20214;&#19968;&#26679;&#65292;&#20250;&#22312;&#23427;&#20204;&#30340;&#25991;&#26723;&#37324;&#35828;&#26126;&#12290;</p>
</body>
</html>
