<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="book.css" type="text/css" />
</head>
<body>
<h2 id="&#20989;&#25968;&#24335;&#32534;&#31243;">7. &#20989;&#25968;&#24335;&#32534;&#31243;</h2>
<p>&#20989;&#25968;&#26159;Python&#20869;&#24314;&#25903;&#25345;&#30340;&#19968;&#31181;&#23553;&#35013;&#65292;&#25105;&#20204;&#36890;&#36807;&#25226;&#22823;&#27573;&#20195;&#30721;&#25286;&#25104;&#20989;&#25968;&#65292;&#36890;&#36807;&#19968;&#23618;&#19968;&#23618;&#30340;&#20989;&#25968;&#35843;&#29992;&#65292;&#23601;&#21487;&#20197;&#25226;&#22797;&#26434;&#20219;&#21153;&#20998;&#35299;&#25104;&#31616;&#21333;&#30340;&#20219;&#21153;&#65292;&#36825;&#31181;&#20998;&#35299;&#21487;&#20197;&#31216;&#20043;&#20026;&#38754;&#21521;&#36807;&#31243;&#30340;&#31243;&#24207;&#35774;&#35745;&#12290;&#20989;&#25968;&#23601;&#26159;&#38754;&#21521;&#36807;&#31243;&#30340;&#31243;&#24207;&#35774;&#35745;&#30340;&#22522;&#26412;&#21333;&#20803;&#12290;</p>
<p>&#32780;&#20989;&#25968;&#24335;&#32534;&#31243;&#65288;&#35831;&#27880;&#24847;&#22810;&#20102;&#19968;&#20010;&#8220;&#24335;&#8221;&#23383;&#65289;&#8212;&#8212;<code>Functional Programming</code>&#65292;&#34429;&#28982;&#20063;&#21487;&#20197;&#24402;&#32467;&#21040;&#38754;&#21521;&#36807;&#31243;&#30340;&#31243;&#24207;&#35774;&#35745;&#65292;&#20294;&#20854;&#24605;&#24819;&#26356;&#25509;&#36817;&#25968;&#23398;&#35745;&#31639;&#12290;</p>
<p>&#25105;&#20204;&#39318;&#20808;&#35201;&#25630;&#26126;&#30333;&#35745;&#31639;&#26426;&#65288;Computer&#65289;&#21644;&#35745;&#31639;&#65288;Compute&#65289;&#30340;&#27010;&#24565;&#12290;</p>
<p>&#22312;&#35745;&#31639;&#26426;&#30340;&#23618;&#27425;&#19978;&#65292;CPU&#25191;&#34892;&#30340;&#26159;&#21152;&#20943;&#20056;&#38500;&#30340;&#25351;&#20196;&#20195;&#30721;&#65292;&#20197;&#21450;&#21508;&#31181;&#26465;&#20214;&#21028;&#26029;&#21644;&#36339;&#36716;&#25351;&#20196;&#65292;&#25152;&#20197;&#65292;&#27719;&#32534;&#35821;&#35328;&#26159;&#26368;&#36148;&#36817;&#35745;&#31639;&#26426;&#30340;&#35821;&#35328;&#12290;</p>
<p>&#32780;&#35745;&#31639;&#21017;&#25351;&#25968;&#23398;&#24847;&#20041;&#19978;&#30340;&#35745;&#31639;&#65292;&#36234;&#26159;&#25277;&#35937;&#30340;&#35745;&#31639;&#65292;&#31163;&#35745;&#31639;&#26426;&#30828;&#20214;&#36234;&#36828;&#12290;</p>
<p>&#23545;&#24212;&#21040;&#32534;&#31243;&#35821;&#35328;&#65292;&#23601;&#26159;&#36234;&#20302;&#32423;&#30340;&#35821;&#35328;&#65292;&#36234;&#36148;&#36817;&#35745;&#31639;&#26426;&#65292;&#25277;&#35937;&#31243;&#24230;&#20302;&#65292;&#25191;&#34892;&#25928;&#29575;&#39640;&#65292;&#27604;&#22914;C&#35821;&#35328;&#65307;&#36234;&#39640;&#32423;&#30340;&#35821;&#35328;&#65292;&#36234;&#36148;&#36817;&#35745;&#31639;&#65292;&#25277;&#35937;&#31243;&#24230;&#39640;&#65292;&#25191;&#34892;&#25928;&#29575;&#20302;&#65292;&#27604;&#22914;<code>Lisp&#35821;&#35328;</code>&#12290;</p>
<p>&#20989;&#25968;&#24335;&#32534;&#31243;&#23601;&#26159;&#19968;&#31181;&#25277;&#35937;&#31243;&#24230;&#24456;&#39640;&#30340;&#32534;&#31243;&#33539;&#24335;&#65292;&#32431;&#31929;&#30340;&#20989;&#25968;&#24335;&#32534;&#31243;&#35821;&#35328;&#32534;&#20889;&#30340;&#20989;&#25968;&#27809;&#26377;&#21464;&#37327;&#65292;&#22240;&#27492;&#65292;&#20219;&#24847;&#19968;&#20010;&#20989;&#25968;&#65292;&#21482;&#35201;&#36755;&#20837;&#26159;&#30830;&#23450;&#30340;&#65292;&#36755;&#20986;&#23601;&#26159;&#30830;&#23450;&#30340;&#65292;&#36825;&#31181;&#32431;&#20989;&#25968;&#25105;&#20204;&#31216;&#20043;&#20026;&#27809;&#26377;&#21103;&#20316;&#29992;&#12290;&#32780;&#20801;&#35768;&#20351;&#29992;&#21464;&#37327;&#30340;&#31243;&#24207;&#35774;&#35745;&#35821;&#35328;&#65292;&#30001;&#20110;&#20989;&#25968;&#20869;&#37096;&#30340;&#21464;&#37327;&#29366;&#24577;&#19981;&#30830;&#23450;&#65292;&#21516;&#26679;&#30340;&#36755;&#20837;&#65292;&#21487;&#33021;&#24471;&#21040;&#19981;&#21516;&#30340;&#36755;&#20986;&#65292;&#22240;&#27492;&#65292;&#36825;&#31181;&#20989;&#25968;&#26159;&#26377;&#21103;&#20316;&#29992;&#30340;&#12290;</p>
<p>&#20989;&#25968;&#24335;&#32534;&#31243;&#30340;&#19968;&#20010;&#29305;&#28857;&#23601;&#26159;&#65292;&#20801;&#35768;&#25226;&#20989;&#25968;&#26412;&#36523;&#20316;&#20026;&#21442;&#25968;&#20256;&#20837;&#21478;&#19968;&#20010;&#20989;&#25968;&#65292;&#36824;&#20801;&#35768;&#36820;&#22238;&#19968;&#20010;&#20989;&#25968;&#65281;</p>
<p>Python&#23545;&#20989;&#25968;&#24335;&#32534;&#31243;&#25552;&#20379;&#37096;&#20998;&#25903;&#25345;&#12290;&#30001;&#20110;Python&#20801;&#35768;&#20351;&#29992;&#21464;&#37327;&#65292;&#22240;&#27492;&#65292;Python&#19981;&#26159;&#32431;&#20989;&#25968;&#24335;&#32534;&#31243;&#35821;&#35328;&#12290;</p>
<h3 id="&#39640;&#38454;&#20989;&#25968;">7.1 &#39640;&#38454;&#20989;&#25968;</h3>
<p><strong>&#39640;&#38454;&#20989;&#25968;</strong>&#33521;&#25991;&#21483;<code>Higher-order function</code>&#12290;&#20160;&#20040;&#26159;&#39640;&#38454;&#20989;&#25968;&#65311;&#25105;&#20204;&#20197;&#23454;&#38469;&#20195;&#30721;&#20026;&#20363;&#23376;&#65292;&#19968;&#27493;&#19968;&#27493;&#28145;&#20837;&#27010;&#24565;&#12290;</p>
<h4 id="&#21464;&#37327;&#21487;&#20197;&#25351;&#21521;&#20989;&#25968;">&#21464;&#37327;&#21487;&#20197;&#25351;&#21521;&#20989;&#25968;</h4>
<p>&#20197;Python&#20869;&#32622;&#30340;&#27714;&#32477;&#23545;&#20540;&#30340;&#20989;&#25968;<code>abs()</code>&#20026;&#20363;&#65292;&#35843;&#29992;&#35813;&#20989;&#25968;&#29992;&#20197;&#19979;&#20195;&#30721;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">abs</span>(<span class="op">-</span><span class="dv">10</span>)
<span class="dv">10</span></code></pre></div>
<p>&#20294;&#26159;&#65292;&#22914;&#26524;&#21482;&#20889;<code>abs</code>&#21602;&#65311;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">abs</span>
<span class="op">&lt;</span>built<span class="op">-in</span> function <span class="bu">abs</span><span class="op">&gt;</span></code></pre></div>
<p>&#21487;&#35265;&#65292;<code>abs(-10)</code>&#26159;&#20989;&#25968;&#35843;&#29992;&#65292;&#32780;<code>abs</code>&#26159;&#20989;&#25968;&#26412;&#36523;&#12290;</p>
<p>&#35201;&#33719;&#24471;&#20989;&#25968;&#35843;&#29992;&#32467;&#26524;&#65292;&#25105;&#20204;&#21487;&#20197;&#25226;&#32467;&#26524;&#36171;&#20540;&#32473;&#21464;&#37327;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> <span class="bu">abs</span>(<span class="op">-</span><span class="dv">10</span>)
<span class="op">&gt;&gt;&gt;</span> x
<span class="dv">10</span></code></pre></div>
<p>&#20294;&#26159;&#65292;&#22914;&#26524;&#25226;&#20989;&#25968;&#26412;&#36523;&#36171;&#20540;&#32473;&#21464;&#37327;&#21602;&#65311;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> <span class="bu">abs</span>
<span class="op">&gt;&gt;&gt;</span> f
<span class="op">&lt;</span>built<span class="op">-in</span> function <span class="bu">abs</span><span class="op">&gt;</span></code></pre></div>
<p>&#32467;&#35770;&#65306;&#20989;&#25968;&#26412;&#36523;&#20063;&#21487;&#20197;&#36171;&#20540;&#32473;&#21464;&#37327;&#65292;&#21363;&#65306;<strong>&#21464;&#37327;&#21487;&#20197;&#25351;&#21521;&#20989;&#25968;</strong>&#12290;</p>
<p>&#22914;&#26524;&#19968;&#20010;&#21464;&#37327;&#25351;&#21521;&#20102;&#19968;&#20010;&#20989;&#25968;&#65292;&#37027;&#20040;&#65292;&#21487;&#21542;&#36890;&#36807;&#35813;&#21464;&#37327;&#26469;&#35843;&#29992;&#36825;&#20010;&#20989;&#25968;&#65311;&#29992;&#20195;&#30721;&#39564;&#35777;&#19968;&#19979;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> <span class="bu">abs</span>
<span class="op">&gt;&gt;&gt;</span> f(<span class="op">-</span><span class="dv">10</span>)
<span class="dv">10</span></code></pre></div>
<p>&#25104;&#21151;&#65281;&#35828;&#26126;&#21464;&#37327;<code>f</code>&#29616;&#22312;&#24050;&#32463;&#25351;&#21521;&#20102;<code>abs</code>&#20989;&#25968;&#26412;&#36523;&#12290;&#30452;&#25509;&#35843;&#29992;<code>abs()</code>&#20989;&#25968;&#21644;&#35843;&#29992;&#21464;&#37327;<code>f()</code>&#23436;&#20840;&#30456;&#21516;&#12290;</p>
<h4 id="&#20989;&#25968;&#21517;&#20063;&#26159;&#21464;&#37327;">&#20989;&#25968;&#21517;&#20063;&#26159;&#21464;&#37327;</h4>
<p>&#37027;&#20040;&#20989;&#25968;&#21517;&#26159;&#20160;&#20040;&#21602;&#65311;&#20989;&#25968;&#21517;&#20854;&#23454;&#23601;&#26159;&#25351;&#21521;&#20989;&#25968;&#30340;&#21464;&#37327;&#65281;&#23545;&#20110;<code>abs()</code>&#36825;&#20010;&#20989;&#25968;&#65292;&#23436;&#20840;&#21487;&#20197;&#25226;&#20989;&#25968;&#21517;<code>abs</code>&#30475;&#25104;&#21464;&#37327;&#65292;&#23427;&#25351;&#21521;&#19968;&#20010;&#21487;&#20197;&#35745;&#31639;&#32477;&#23545;&#20540;&#30340;&#20989;&#25968;&#65281;</p>
<p>&#22914;&#26524;&#25226;<code>abs</code>&#25351;&#21521;&#20854;&#20182;&#23545;&#35937;&#65292;&#20250;&#26377;&#20160;&#20040;&#24773;&#20917;&#21457;&#29983;&#65311;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">abs</span> <span class="op">=</span> <span class="dv">10</span>
<span class="op">&gt;&gt;&gt;</span> <span class="bu">abs</span>(<span class="op">-</span><span class="dv">10</span>)
Traceback (most recent call last):
  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="op">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span>
<span class="pp">TypeError</span>: <span class="st">&#39;int&#39;</span> <span class="bu">object</span> <span class="op">is</span> <span class="op">not</span> <span class="bu">callable</span></code></pre></div>
<p>&#25226;<code>abs</code>&#25351;&#21521;<code>10</code>&#21518;&#65292;&#23601;&#26080;&#27861;&#36890;&#36807;<code>abs(-10)</code>&#35843;&#29992;&#35813;&#20989;&#25968;&#20102;&#65281;&#22240;&#20026;<code>abs</code>&#36825;&#20010;&#21464;&#37327;&#24050;&#32463;&#19981;&#25351;&#21521;&#27714;&#32477;&#23545;&#20540;&#20989;&#25968;&#32780;&#26159;&#25351;&#21521;&#19968;&#20010;&#25972;&#25968;10&#65281;</p>
<p>&#24403;&#28982;&#23454;&#38469;&#20195;&#30721;&#32477;&#23545;&#19981;&#33021;&#36825;&#20040;&#20889;&#65292;&#36825;&#37324;&#26159;&#20026;&#20102;&#35828;&#26126;&#20989;&#25968;&#21517;&#20063;&#26159;&#21464;&#37327;&#12290;&#35201;&#24674;&#22797;<code>abs</code>&#20989;&#25968;&#65292;&#35831;&#37325;&#21551;Python&#20132;&#20114;&#29615;&#22659;&#12290;</p>
<p>&#27880;&#65306;&#30001;&#20110;<code>abs</code>&#20989;&#25968;&#23454;&#38469;&#19978;&#26159;&#23450;&#20041;&#22312;<code>__builtin__</code>&#27169;&#22359;&#20013;&#30340;&#65292;&#25152;&#20197;&#35201;&#35753;&#20462;&#25913;<code>abs</code>&#21464;&#37327;&#30340;&#25351;&#21521;&#22312;&#20854;&#23427;&#27169;&#22359;&#20063;&#29983;&#25928;&#65292;&#35201;&#29992;<code>__builtin__.abs = 10</code>&#12290;</p>
<h4 id="&#20256;&#20837;&#20989;&#25968;">&#20256;&#20837;&#20989;&#25968;</h4>
<p>&#26082;&#28982;&#21464;&#37327;&#21487;&#20197;&#25351;&#21521;&#20989;&#25968;&#65292;&#20989;&#25968;&#30340;&#21442;&#25968;&#33021;&#25509;&#25910;&#21464;&#37327;&#65292;&#37027;&#20040;&#19968;&#20010;&#20989;&#25968;&#23601;&#21487;&#20197;&#25509;&#25910;&#21478;&#19968;&#20010;&#20989;&#25968;&#20316;&#20026;&#21442;&#25968;&#65292;&#36825;&#31181;&#20989;&#25968;&#23601;&#31216;&#20043;&#20026;<strong>&#39640;&#38454;&#20989;&#25968;</strong>&#12290;</p>
<p>&#19968;&#20010;&#26368;&#31616;&#21333;&#30340;&#39640;&#38454;&#20989;&#25968;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> add(x, y, f):
    <span class="cf">return</span> f(x) <span class="op">+</span> f(y)</code></pre></div>
<p>&#24403;&#25105;&#20204;&#35843;&#29992;<code>add(-5, 6, abs)</code>&#26102;&#65292;&#21442;&#25968;<code>x</code>&#65292;<code>y</code>&#21644;<code>f</code>&#20998;&#21035;&#25509;&#25910;<code>-5</code>&#65292;<code>6</code>&#21644;<code>abs</code>&#65292;&#26681;&#25454;&#20989;&#25968;&#23450;&#20041;&#65292;&#25105;&#20204;&#21487;&#20197;&#25512;&#23548;&#35745;&#31639;&#36807;&#31243;&#20026;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">x <span class="op">=</span> <span class="op">-</span><span class="dv">5</span>
y <span class="op">=</span> <span class="dv">6</span>
f <span class="op">=</span> <span class="bu">abs</span>
f(x) <span class="op">+</span> f(y) <span class="op">==&gt;</span> <span class="bu">abs</span>(<span class="op">-</span><span class="dv">5</span>) <span class="op">+</span> <span class="bu">abs</span>(<span class="dv">6</span>) <span class="op">==&gt;</span> <span class="dv">11</span>
<span class="cf">return</span> <span class="dv">11</span></code></pre></div>
<p>&#29992;&#20195;&#30721;&#39564;&#35777;&#19968;&#19979;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> add(<span class="op">-</span><span class="dv">5</span>, <span class="dv">6</span>, <span class="bu">abs</span>)
<span class="dv">11</span></code></pre></div>
<p>&#32534;&#20889;&#39640;&#38454;&#20989;&#25968;&#65292;&#23601;&#26159;&#35753;&#20989;&#25968;&#30340;&#21442;&#25968;&#33021;&#22815;&#25509;&#25910;&#21035;&#30340;&#20989;&#25968;&#12290;</p>
<h4 id="&#23567;&#32467;">&#23567;&#32467;</h4>
<p>&#25226;&#20989;&#25968;&#20316;&#20026;&#21442;&#25968;&#20256;&#20837;&#65292;&#36825;&#26679;&#30340;&#20989;&#25968;&#31216;&#20026;&#39640;&#38454;&#20989;&#25968;&#65292;&#20989;&#25968;&#24335;&#32534;&#31243;&#23601;&#26159;&#25351;&#36825;&#31181;&#39640;&#24230;&#25277;&#35937;&#30340;&#32534;&#31243;&#33539;&#24335;&#12290;</p>
<h3 id="mapreduce">7.2 map/reduce</h3>
<p>Python&#20869;&#24314;&#20102;<code>map()</code>&#21644;<code>reduce()</code>&#20989;&#25968;&#12290;</p>
<p>&#22914;&#26524;&#20320;&#35835;&#36807;Google&#30340;&#37027;&#31687;&#22823;&#21517;&#40718;&#40718;&#30340;&#35770;&#25991;&#8220;<a href="http://research.google.com/archive/mapreduce.html">MapReduce: Simplified Data Processing on Large Clusters</a>&#8221;&#65292;&#20320;&#23601;&#33021;&#22823;&#27010;&#26126;&#30333;<code>map/reduce</code>&#30340;&#27010;&#24565;&#12290;</p>
<p>&#25105;&#20204;&#20808;&#30475;<code>map</code>&#12290;<code>map()</code>&#20989;&#25968;&#25509;&#25910;&#20004;&#20010;&#21442;&#25968;&#65292;&#19968;&#20010;&#26159;<code>&#20989;&#25968;</code>&#65292;&#19968;&#20010;&#26159;<code>Iterable</code>&#65292;<code>map</code>&#23558;&#20256;&#20837;&#30340;&#20989;&#25968;&#20381;&#27425;&#20316;&#29992;&#21040;&#24207;&#21015;&#30340;&#27599;&#20010;&#20803;&#32032;&#65292;&#24182;&#25226;&#32467;&#26524;&#20316;&#20026;&#26032;&#30340;<code>Iterator</code>&#36820;&#22238;&#12290;</p>
<p>&#20030;&#20363;&#35828;&#26126;&#65292;&#27604;&#22914;&#25105;&#20204;&#26377;&#19968;&#20010;&#20989;&#25968;<span class="math inline"><em>f</em>(<em>x</em>)&#8196;=&#8196;<em>x</em><sup>2</sup></span>&#65292;&#35201;&#25226;&#36825;&#20010;&#20989;&#25968;&#20316;&#29992;&#22312;&#19968;&#20010;<code>list [1, 2, 3, 4, 5, 6, 7, 8, 9]</code>&#19978;&#65292;&#23601;&#21487;&#20197;&#29992;<code>map()</code>&#23454;&#29616;&#22914;&#19979;&#65306;</p>
<div class="figure">
<img src="http://www.liaoxuefeng.com/files/attachments/0013879622109990efbf9d781704b02994ba96765595f56000/0" alt="" />

</div>
<p>&#29616;&#22312;&#65292;&#25105;&#20204;&#29992;Python&#20195;&#30721;&#23454;&#29616;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> f(x):
...     <span class="cf">return</span> x <span class="op">*</span> x
...
<span class="op">&gt;&gt;&gt;</span> r <span class="op">=</span> <span class="bu">map</span>(f, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>])
<span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(r)
[<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">36</span>, <span class="dv">49</span>, <span class="dv">64</span>, <span class="dv">81</span>]</code></pre></div>
<p><code>map()</code>&#20256;&#20837;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;<code>f</code>&#65292;&#21363;&#20989;&#25968;&#23545;&#35937;&#26412;&#36523;&#12290;&#30001;&#20110;&#32467;&#26524;<code>r</code>&#26159;&#19968;&#20010;<code>Iterator</code>&#65292;<code>Iterator</code>&#26159;&#24816;&#24615;&#24207;&#21015;&#65292;&#22240;&#27492;&#36890;&#36807;<code>list()</code>&#20989;&#25968;&#35753;&#23427;&#25226;&#25972;&#20010;&#24207;&#21015;&#37117;&#35745;&#31639;&#20986;&#26469;&#24182;&#36820;&#22238;&#19968;&#20010;<code>list</code>&#12290;</p>
<p>&#20320;&#21487;&#33021;&#20250;&#24819;&#65292;&#19981;&#38656;&#35201;<code>map()</code>&#20989;&#25968;&#65292;&#20889;&#19968;&#20010;&#24490;&#29615;&#65292;&#20063;&#21487;&#20197;&#35745;&#31639;&#20986;&#32467;&#26524;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">L <span class="op">=</span> []
<span class="cf">for</span> n <span class="op">in</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]:
    L.append(f(n))
<span class="bu">print</span>(L)</code></pre></div>
<p>&#30340;&#30830;&#21487;&#20197;&#65292;&#20294;&#26159;&#65292;&#20174;&#19978;&#38754;&#30340;&#24490;&#29615;&#20195;&#30721;&#65292;&#33021;&#19968;&#30524;&#30475;&#26126;&#30333;&#8220;&#25226;<code>f(x)</code>&#20316;&#29992;&#22312;<code>list</code>&#30340;&#27599;&#19968;&#20010;&#20803;&#32032;&#24182;&#25226;&#32467;&#26524;&#29983;&#25104;&#19968;&#20010;&#26032;&#30340;<code>list</code>&#8221;&#21527;&#65311;</p>
<p>&#25152;&#20197;&#65292;<code>map()</code>&#20316;&#20026;&#39640;&#38454;&#20989;&#25968;&#65292;&#20107;&#23454;&#19978;&#23427;&#25226;&#36816;&#31639;&#35268;&#21017;&#25277;&#35937;&#20102;&#65292;&#22240;&#27492;&#65292;&#25105;&#20204;&#19981;&#20294;&#21487;&#20197;&#35745;&#31639;&#31616;&#21333;&#30340;<span class="math inline"><em>f</em>(<em>x</em>)&#8196;=&#8196;<em>x</em><sup>2</sup></span>&#65292;&#36824;&#21487;&#20197;&#35745;&#31639;&#20219;&#24847;&#22797;&#26434;&#30340;&#20989;&#25968;&#65292;&#27604;&#22914;&#65292;&#25226;&#36825;&#20010;<code>list</code>&#25152;&#26377;&#25968;&#23383;&#36716;&#20026;&#23383;&#31526;&#20018;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(<span class="bu">map</span>(<span class="bu">str</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]))
[<span class="st">&#39;1&#39;</span>, <span class="st">&#39;2&#39;</span>, <span class="st">&#39;3&#39;</span>, <span class="st">&#39;4&#39;</span>, <span class="st">&#39;5&#39;</span>, <span class="st">&#39;6&#39;</span>, <span class="st">&#39;7&#39;</span>, <span class="st">&#39;8&#39;</span>, <span class="st">&#39;9&#39;</span>]</code></pre></div>
<p>&#21482;&#38656;&#35201;&#19968;&#34892;&#20195;&#30721;&#12290;</p>
<p>&#20877;&#30475;<code>reduce</code>&#30340;&#29992;&#27861;&#12290;<code>reduce</code>&#25226;&#19968;&#20010;&#20989;&#25968;&#20316;&#29992;&#22312;&#19968;&#20010;&#24207;&#21015;<code>[x1, x2, x3, ...]</code>&#19978;&#65292;&#36825;&#20010;&#20989;&#25968;&#24517;&#39035;&#25509;&#25910;&#20004;&#20010;&#21442;&#25968;&#65292;<code>reduce</code>&#25226;&#32467;&#26524;&#32487;&#32493;&#21644;&#24207;&#21015;&#30340;&#19979;&#19968;&#20010;&#20803;&#32032;&#20570;&#32047;&#31215;&#35745;&#31639;&#65292;&#20854;&#25928;&#26524;&#23601;&#26159;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">reduce</span>(f, [x1, x2, x3, x4]) <span class="op">=</span> f(f(f(x1, x2), x3), x4)</code></pre></div>
<p>&#27604;&#26041;&#35828;&#23545;&#19968;&#20010;&#24207;&#21015;&#27714;&#21644;&#65292;&#23601;&#21487;&#20197;&#29992;<code>reduce</code>&#23454;&#29616;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span>
<span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> add(x, y):
...     <span class="cf">return</span> x <span class="op">+</span> y
...
<span class="op">&gt;&gt;&gt;</span> <span class="bu">reduce</span>(add, [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>])
<span class="dv">25</span></code></pre></div>
<p>&#24403;&#28982;&#27714;&#21644;&#36816;&#31639;&#21487;&#20197;&#30452;&#25509;&#29992;<code>Python</code>&#20869;&#24314;&#20989;&#25968;<code>sum()</code>&#65292;&#27809;&#24517;&#35201;&#21160;&#29992;<code>reduce</code>&#12290;</p>
<p>&#20294;&#26159;&#22914;&#26524;&#35201;&#25226;&#24207;&#21015;<code>[1, 3, 5, 7, 9]</code>&#21464;&#25442;&#25104;&#25972;&#25968;<code>13579</code>&#65292;<code>reduce</code>&#23601;&#21487;&#20197;&#27966;&#19978;&#29992;&#22330;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span>
<span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> fn(x, y):
...     <span class="cf">return</span> x <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> y
...
<span class="op">&gt;&gt;&gt;</span> <span class="bu">reduce</span>(fn, [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>])
<span class="dv">13579</span></code></pre></div>
<p>&#36825;&#20010;&#20363;&#23376;&#26412;&#36523;&#27809;&#22810;&#22823;&#29992;&#22788;&#65292;&#20294;&#26159;&#65292;&#22914;&#26524;&#32771;&#34385;&#21040;&#23383;&#31526;&#20018;<code>str</code>&#20063;&#26159;&#19968;&#20010;&#24207;&#21015;&#65292;&#23545;&#19978;&#38754;&#30340;&#20363;&#23376;&#31245;&#21152;&#25913;&#21160;&#65292;&#37197;&#21512;<code>map()</code>&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#20889;&#20986;&#25226;<code>str</code>&#36716;&#25442;&#20026;<code>int</code>&#30340;&#20989;&#25968;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span>
<span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> fn(x, y):
...     <span class="cf">return</span> x <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> y
...
<span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> char2num(s):
...     <span class="cf">return</span> {<span class="st">&#39;0&#39;</span>: <span class="dv">0</span>, <span class="st">&#39;1&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;2&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;3&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;4&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;5&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;6&#39;</span>: <span class="dv">6</span>, <span class="st">&#39;7&#39;</span>: <span class="dv">7</span>, <span class="st">&#39;8&#39;</span>: <span class="dv">8</span>, <span class="st">&#39;9&#39;</span>: <span class="dv">9</span>}[s]
...
<span class="op">&gt;&gt;&gt;</span> <span class="bu">reduce</span>(fn, <span class="bu">map</span>(char2num, <span class="st">&#39;13579&#39;</span>))
<span class="dv">13579</span></code></pre></div>
<p>&#25972;&#29702;&#25104;&#19968;&#20010;<code>str2int</code>&#30340;&#20989;&#25968;&#23601;&#26159;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span>

<span class="kw">def</span> str2int(s):
    <span class="kw">def</span> fn(x, y):
        <span class="cf">return</span> x <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> y
    <span class="kw">def</span> char2num(s):
        <span class="cf">return</span> {<span class="st">&#39;0&#39;</span>: <span class="dv">0</span>, <span class="st">&#39;1&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;2&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;3&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;4&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;5&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;6&#39;</span>: <span class="dv">6</span>, <span class="st">&#39;7&#39;</span>: <span class="dv">7</span>, <span class="st">&#39;8&#39;</span>: <span class="dv">8</span>, <span class="st">&#39;9&#39;</span>: <span class="dv">9</span>}[s]
    <span class="cf">return</span> <span class="bu">reduce</span>(fn, <span class="bu">map</span>(char2num, s))</code></pre></div>
<p>&#36824;&#21487;&#20197;&#29992;<code>lambda</code>&#20989;&#25968;&#36827;&#19968;&#27493;&#31616;&#21270;&#25104;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span>

<span class="kw">def</span> char2num(s):
    <span class="cf">return</span> {<span class="st">&#39;0&#39;</span>: <span class="dv">0</span>, <span class="st">&#39;1&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;2&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;3&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;4&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;5&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;6&#39;</span>: <span class="dv">6</span>, <span class="st">&#39;7&#39;</span>: <span class="dv">7</span>, <span class="st">&#39;8&#39;</span>: <span class="dv">8</span>, <span class="st">&#39;9&#39;</span>: <span class="dv">9</span>}[s]

<span class="kw">def</span> str2int(s):
    <span class="cf">return</span> <span class="bu">reduce</span>(<span class="kw">lambda</span> x, y: x <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> y, <span class="bu">map</span>(char2num, s))</code></pre></div>
<p>&#20063;&#23601;&#26159;&#35828;&#65292;&#20551;&#35774;Python&#27809;&#26377;&#25552;&#20379;<code>int()</code>&#20989;&#25968;&#65292;&#20320;&#23436;&#20840;&#21487;&#20197;&#33258;&#24049;&#20889;&#19968;&#20010;&#25226;&#23383;&#31526;&#20018;&#36716;&#21270;&#20026;&#25972;&#25968;&#30340;&#20989;&#25968;&#65292;&#32780;&#19988;&#21482;&#38656;&#35201;&#20960;&#34892;&#20195;&#30721;&#65281;</p>
<p><code>lambda</code>&#20989;&#25968;&#30340;&#29992;&#27861;&#22312;&#21518;&#38754;&#20171;&#32461;&#12290;</p>
<h4 id="&#32451;&#20064;">&#32451;&#20064;</h4>
<p>&#21033;&#29992;<code>map()</code>&#20989;&#25968;&#65292;&#25226;&#29992;&#25143;&#36755;&#20837;&#30340;&#19981;&#35268;&#33539;&#30340;&#33521;&#25991;&#21517;&#23383;&#65292;&#21464;&#20026;&#39318;&#23383;&#27597;&#22823;&#20889;&#65292;&#20854;&#20182;&#23567;&#20889;&#30340;&#35268;&#33539;&#21517;&#23383;&#12290;&#36755;&#20837;&#65306;<code>['adam', 'LISA', 'barT']</code>&#65292;&#36755;&#20986;&#65306;<code>['Adam', 'Lisa', 'Bart']</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># -*- coding: utf-8 -*-</span>

<span class="co"># &#27979;&#35797;:</span>
L1 <span class="op">=</span> [<span class="st">&#39;adam&#39;</span>, <span class="st">&#39;LISA&#39;</span>, <span class="st">&#39;barT&#39;</span>]
L2 <span class="op">=</span> <span class="bu">list</span>(<span class="bu">map</span>(normalize, L1))
<span class="bu">print</span>(L2)

<span class="kw">def</span> normalize(s):
        <span class="cf">return</span> s[<span class="dv">0</span>].upper()<span class="op">+</span>s[<span class="dv">1</span>:].lower</code></pre></div>
<p>Python&#25552;&#20379;&#30340;<code>sum()</code>&#20989;&#25968;&#21487;&#20197;&#25509;&#21463;&#19968;&#20010;<code>list</code>&#24182;&#27714;&#21644;&#65292;&#35831;&#32534;&#20889;&#19968;&#20010;<code>prod()</code>&#20989;&#25968;&#65292;&#21487;&#20197;&#25509;&#21463;&#19968;&#20010;<code>list</code>&#24182;&#21033;&#29992;<code>reduce()</code>&#27714;&#31215;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># -*- coding: utf-8 -*-</span>

<span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span>

<span class="kw">def</span> prod(L):
        <span class="kw">def</span> multi(x, y):
                <span class="cf">return</span> x <span class="op">*</span> y
        <span class="bu">reduce</span>(multi, L)

<span class="bu">print</span>(<span class="st">&#39;3 * 5 * 7 * 9 =&#39;</span>, prod([<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>]))</code></pre></div>
<p>&#21033;&#29992;<code>map</code>&#21644;<code>reduce</code>&#32534;&#20889;&#19968;&#20010;<code>str2float</code>&#20989;&#25968;&#65292;&#25226;&#23383;&#31526;&#20018;<code>'123.456'</code>&#36716;&#25442;&#25104;&#28014;&#28857;&#25968;<code>123.456</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># -*- coding: utf-8 -*-</span>

<span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span>

<span class="kw">def</span> str2float(s):
        dot<span class="op">=</span>s.find(<span class="st">&#39;.&#39;</span>)
    l<span class="op">=</span><span class="bu">len</span>(s)
    st<span class="op">=</span>s.replace(<span class="st">&#39;.&#39;</span>,<span class="st">&#39;&#39;</span>)
    <span class="kw">def</span> str2int(x):
        <span class="cf">return</span> {<span class="st">&#39;0&#39;</span>: <span class="dv">0</span>, <span class="st">&#39;1&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;2&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;3&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;4&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;5&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;6&#39;</span>: <span class="dv">6</span>, <span class="st">&#39;7&#39;</span>: <span class="dv">7</span>, <span class="st">&#39;8&#39;</span>: <span class="dv">8</span>, <span class="st">&#39;9&#39;</span>: <span class="dv">9</span>}[x]
    <span class="kw">def</span> fn(x, y):
        <span class="cf">return</span> x <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> y
    <span class="cf">return</span> <span class="bu">reduce</span>(fn,<span class="bu">map</span>(str2int,st))<span class="op">/</span><span class="dv">10</span><span class="op">**</span>(l<span class="op">-</span>dot<span class="dv">-1</span>)

<span class="bu">print</span>(<span class="st">&#39;str2float(</span><span class="ch">\&#39;</span><span class="st">123.456</span><span class="ch">\&#39;</span><span class="st">) =&#39;</span>, str2float(<span class="st">&#39;123.456&#39;</span>))</code></pre></div>
<h3 id="filter">7.3 filter</h3>
<p>Python&#20869;&#24314;&#30340;<code>filter()</code>&#20989;&#25968;&#29992;&#20110;&#36807;&#28388;&#24207;&#21015;&#12290;</p>
<p>&#21644;<code>map()</code>&#31867;&#20284;&#65292;<code>filter()</code>&#20063;&#25509;&#25910;&#19968;&#20010;&#20989;&#25968;&#21644;&#19968;&#20010;&#24207;&#21015;&#12290;&#21644;<code>map()</code>&#19981;&#21516;&#30340;&#26102;&#65292;<code>filter()</code>&#25226;&#20256;&#20837;&#30340;&#20989;&#25968;&#20381;&#27425;&#20316;&#29992;&#20110;&#27599;&#20010;&#20803;&#32032;&#65292;&#28982;&#21518;&#26681;&#25454;&#36820;&#22238;&#20540;&#26159;<code>True</code>&#36824;&#26159;<code>False</code>&#20915;&#23450;&#20445;&#30041;&#36824;&#26159;&#20002;&#24323;&#35813;&#20803;&#32032;&#12290;</p>
<p>&#20363;&#22914;&#65292;&#22312;&#19968;&#20010;<code>list</code>&#20013;&#65292;&#21024;&#25481;&#20598;&#25968;&#65292;&#21482;&#20445;&#30041;&#22855;&#25968;&#65292;&#21487;&#20197;&#36825;&#20040;&#20889;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> is_odd(n):
    <span class="cf">return</span> n <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">1</span>

<span class="bu">list</span>(<span class="bu">filter</span>(is_odd, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">15</span>]))
<span class="co"># &#32467;&#26524;: [1, 5, 9, 15]</span></code></pre></div>
<p>&#25226;&#19968;&#20010;&#24207;&#21015;&#20013;&#30340;&#31354;&#23383;&#31526;&#20018;&#21024;&#25481;&#65292;&#21487;&#20197;&#36825;&#20040;&#20889;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> not_empty(s):
    <span class="cf">return</span> s <span class="op">and</span> s.strip()

<span class="bu">list</span>(<span class="bu">filter</span>(not_empty, [<span class="st">&#39;A&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;B&#39;</span>, <span class="va">None</span>, <span class="st">&#39;C&#39;</span>, <span class="st">&#39;  &#39;</span>]))
<span class="co"># &#32467;&#26524;: [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]</span></code></pre></div>
<p>&#21487;&#35265;&#29992;<code>filter()</code>&#36825;&#20010;&#39640;&#38454;&#20989;&#25968;&#65292;&#20851;&#38190;&#22312;&#20110;&#27491;&#30830;&#23454;&#29616;&#19968;&#20010;&#8220;&#31579;&#36873;&#8221;&#20989;&#25968;&#12290;</p>
<p>&#27880;&#24847;&#21040;<code>filter()</code>&#20989;&#25968;&#36820;&#22238;&#30340;&#26159;&#19968;&#20010;<code>Iterator</code>&#65292;&#20063;&#23601;&#26159;&#19968;&#20010;&#24816;&#24615;&#24207;&#21015;&#65292;&#25152;&#20197;&#35201;&#24378;&#36843;<code>filter()</code>&#23436;&#25104;&#35745;&#31639;&#32467;&#26524;&#65292;&#38656;&#35201;&#29992;<code>list()</code>&#20989;&#25968;&#33719;&#24471;&#25152;&#26377;&#32467;&#26524;&#24182;&#36820;&#22238;<code>list</code>&#12290;</p>
<h4 id="&#29992;filter&#27714;&#32032;&#25968;">&#29992;filter&#27714;&#32032;&#25968;</h4>
<p>&#35745;&#31639;&#32032;&#25968;&#30340;&#19968;&#20010;&#26041;&#27861;&#26159;&#22467;&#27663;&#31579;&#27861;&#65292;&#23427;&#30340;&#31639;&#27861;&#29702;&#35299;&#36215;&#26469;&#38750;&#24120;&#31616;&#21333;&#65306;</p>
<p>&#39318;&#20808;&#65292;&#21015;&#20986;&#20174;2&#24320;&#22987;&#30340;&#25152;&#26377;&#33258;&#28982;&#25968;&#65292;&#26500;&#36896;&#19968;&#20010;&#24207;&#21015;&#65306;</p>
<p><code>2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, ...</code></p>
<p>&#21462;&#24207;&#21015;&#30340;&#31532;&#19968;&#20010;&#25968;2&#65292;&#23427;&#19968;&#23450;&#26159;&#32032;&#25968;&#65292;&#28982;&#21518;&#29992;2&#25226;&#24207;&#21015;&#30340;2&#30340;&#20493;&#25968;&#31579;&#25481;&#65306;</p>
<p><code>3, , 5, , 7, , 9, , 11, , 13, , 15, , 17, , 19, , ...</code></p>
<p>&#21462;&#26032;&#24207;&#21015;&#30340;&#31532;&#19968;&#20010;&#25968;3&#65292;&#23427;&#19968;&#23450;&#26159;&#32032;&#25968;&#65292;&#28982;&#21518;&#29992;3&#25226;&#24207;&#21015;&#30340;3&#30340;&#20493;&#25968;&#31579;&#25481;&#65306;</p>
<p><code>5, , 7, 8, , , 11, , 13, , , , 17, , 19, , ...</code></p>
<p>&#21462;&#26032;&#24207;&#21015;&#30340;&#31532;&#19968;&#20010;&#25968;5&#65292;&#28982;&#21518;&#29992;5&#25226;&#24207;&#21015;&#30340;5&#30340;&#20493;&#25968;&#31579;&#25481;&#65306;</p>
<p><code>7, , , , 11, , 13, , , , 17, , 19, , ...</code></p>
<p>&#19981;&#26029;&#31579;&#19979;&#21435;&#65292;&#23601;&#21487;&#20197;&#24471;&#21040;&#25152;&#26377;&#30340;&#32032;&#25968;&#12290;</p>
<p>&#29992;Python&#26469;&#23454;&#29616;&#36825;&#20010;&#31639;&#27861;&#65292;&#21487;&#20197;&#20808;&#26500;&#36896;&#19968;&#20010;&#20174;3&#24320;&#22987;&#30340;&#22855;&#25968;&#24207;&#21015;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> _odd_iter():
    n <span class="op">=</span> <span class="dv">1</span>
    <span class="cf">while</span> <span class="va">True</span>:
        n <span class="op">=</span> n <span class="op">+</span> <span class="dv">2</span>
        <span class="cf">yield</span> n</code></pre></div>
<p>&#27880;&#24847;&#36825;&#26159;&#19968;&#20010;&#29983;&#25104;&#22120;&#65292;&#24182;&#19988;&#26159;&#19968;&#20010;&#26080;&#38480;&#24207;&#21015;&#12290;</p>
<p>&#28982;&#21518;&#23450;&#20041;&#19968;&#20010;&#31579;&#36873;&#20989;&#25968;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> _not_divisible(n):
    <span class="cf">return</span> <span class="kw">lambda</span> x: x <span class="op">%</span> n <span class="op">&gt;</span> <span class="dv">0</span></code></pre></div>
<p>&#26368;&#21518;&#65292;&#23450;&#20041;&#19968;&#20010;&#29983;&#25104;&#22120;&#65292;&#19981;&#26029;&#36820;&#22238;&#19979;&#19968;&#20010;&#32032;&#25968;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> primes():
    <span class="cf">yield</span> <span class="dv">2</span>
    it <span class="op">=</span> _odd_iter() <span class="co"># &#21021;&#22987;&#24207;&#21015;</span>
    <span class="cf">while</span> <span class="va">True</span>:
        n <span class="op">=</span> <span class="bu">next</span>(it) <span class="co"># &#36820;&#22238;&#24207;&#21015;&#30340;&#31532;&#19968;&#20010;&#25968;</span>
        <span class="cf">yield</span> n
        it <span class="op">=</span> <span class="bu">filter</span>(_not_divisible(n), it) <span class="co"># &#26500;&#36896;&#26032;&#24207;&#21015;</span></code></pre></div>
<p>&#36825;&#20010;&#29983;&#25104;&#22120;&#20808;&#36820;&#22238;&#31532;&#19968;&#20010;&#32032;&#25968;2&#65292;&#28982;&#21518;&#65292;&#21033;&#29992;<code>filter()</code>&#19981;&#26029;&#20135;&#29983;&#31579;&#36873;&#21518;&#30340;&#26032;&#30340;&#24207;&#21015;&#12290;</p>
<p>&#30001;&#20110;<code>primes()</code>&#20063;&#26159;&#19968;&#20010;&#26080;&#38480;&#24207;&#21015;&#65292;&#25152;&#20197;&#35843;&#29992;&#26102;&#38656;&#35201;&#35774;&#32622;&#19968;&#20010;&#36864;&#20986;&#24490;&#29615;&#30340;&#26465;&#20214;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># &#25171;&#21360;1000&#20197;&#20869;&#30340;&#32032;&#25968;:</span>
<span class="cf">for</span> n <span class="op">in</span> primes():
    <span class="cf">if</span> n <span class="op">&lt;</span> <span class="dv">1000</span>:
        <span class="bu">print</span>(n)
    <span class="cf">else</span>:
        <span class="cf">break</span></code></pre></div>
<p>&#27880;&#24847;&#21040;<code>Iterator</code>&#26159;&#24816;&#24615;&#35745;&#31639;&#30340;&#24207;&#21015;&#65292;&#25152;&#20197;&#25105;&#20204;&#21487;&#20197;&#29992;Python&#34920;&#31034;&#8220;&#20840;&#20307;&#33258;&#28982;&#25968;&#8221;&#65292;&#8220;&#20840;&#20307;&#32032;&#25968;&#8221;&#36825;&#26679;&#30340;&#24207;&#21015;&#65292;&#32780;&#20195;&#30721;&#38750;&#24120;&#31616;&#27905;&#12290;</p>
<h4 id="&#32451;&#20064;-1">&#32451;&#20064;</h4>
<p>&#22238;&#25968;&#26159;&#25351;&#20174;&#24038;&#21521;&#21491;&#35835;&#21644;&#20174;&#21491;&#21521;&#24038;&#35835;&#37117;&#26159;&#19968;&#26679;&#30340;&#25968;&#65292;&#20363;&#22914;12321&#65292;909&#12290;&#35831;&#21033;&#29992;<code>filter()</code>&#28388;&#25481;&#38750;&#22238;&#25968;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># -*- coding: utf-8 -*-</span>

<span class="kw">def</span> is_palindrome(n):
        <span class="cf">return</span> n <span class="op">==</span> <span class="bu">int</span>(<span class="bu">str</span>(n)[::<span class="op">-</span><span class="dv">1</span>]) <span class="co"># [::-1]&#20498;&#24207;&#21462;&#24207;&#21015;&#20013;&#30340;&#20803;&#32032;</span>

<span class="co"># &#27979;&#35797;:</span>
output <span class="op">=</span> <span class="bu">filter</span>(is_palindrome, <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">1000</span>))
<span class="bu">print</span>(<span class="bu">list</span>(output))</code></pre></div>
<h4 id="&#23567;&#32467;-1">&#23567;&#32467;</h4>
<p><code>filter()</code>&#30340;&#20316;&#29992;&#26159;&#20174;&#19968;&#20010;&#24207;&#21015;&#20013;&#31579;&#20986;&#31526;&#21512;&#26465;&#20214;&#30340;&#20803;&#32032;&#12290;&#30001;&#20110;<code>filter()</code>&#20351;&#29992;&#20102;&#24816;&#24615;&#35745;&#31639;&#65292;&#25152;&#20197;&#21482;&#26377;&#22312;&#21462;<code>filter()</code>&#32467;&#26524;&#30340;&#26102;&#20505;&#65292;&#25165;&#20250;&#30495;&#27491;&#31579;&#36873;&#24182;&#27599;&#27425;&#36820;&#22238;&#19979;&#19968;&#20010;&#31579;&#20986;&#30340;&#20803;&#32032;&#12290;</p>
<h3 id="sorted">7.4 sorted</h3>
<h4 id="&#25490;&#24207;&#31639;&#27861;">&#25490;&#24207;&#31639;&#27861;</h4>
<p><strong>&#25490;&#24207;</strong>&#20063;&#26159;&#22312;&#31243;&#24207;&#20013;&#32463;&#24120;&#29992;&#21040;&#30340;&#31639;&#27861;&#12290;&#26080;&#35770;&#20351;&#29992;&#20882;&#27873;&#25490;&#24207;&#36824;&#26159;&#24555;&#36895;&#25490;&#24207;&#65292;&#25490;&#24207;&#30340;&#26680;&#24515;&#26159;&#27604;&#36739;&#20004;&#20010;&#20803;&#32032;&#30340;&#22823;&#23567;&#12290;&#22914;&#26524;&#26159;&#25968;&#23383;&#65292;&#25105;&#20204;&#21487;&#20197;&#30452;&#25509;&#27604;&#36739;&#65292;&#20294;&#22914;&#26524;&#26159;&#23383;&#31526;&#20018;&#25110;&#32773;&#20004;&#20010;<code>dict</code>&#21602;&#65311;&#30452;&#25509;&#27604;&#36739;&#25968;&#23398;&#19978;&#30340;&#22823;&#23567;&#26159;&#27809;&#26377;&#24847;&#20041;&#30340;&#65292;&#22240;&#27492;&#65292;&#27604;&#36739;&#30340;&#36807;&#31243;&#24517;&#39035;&#36890;&#36807;&#20989;&#25968;&#25277;&#35937;&#20986;&#26469;&#12290;&#36890;&#24120;&#35268;&#23450;&#65292;&#23545;&#20110;&#20004;&#20010;&#20803;&#32032;<code>x</code>&#21644;<code>y</code>&#65292;&#22914;&#26524;&#35748;&#20026;<code>x &lt; y</code>&#65292;&#21017;&#36820;&#22238;<code>-1</code>&#65292;&#22914;&#26524;&#35748;&#20026;<code>x == y</code>&#65292;&#21017;&#36820;&#22238;<code>0</code>&#65292;&#22914;&#26524;&#35748;&#20026;<code>x &gt; y</code>&#65292;&#21017;&#36820;&#22238;<code>1</code>&#65292;&#36825;&#26679;&#65292;&#25490;&#24207;&#31639;&#27861;&#23601;&#19981;&#29992;&#20851;&#24515;&#20855;&#20307;&#30340;&#27604;&#36739;&#36807;&#31243;&#65292;&#32780;&#26159;&#26681;&#25454;&#27604;&#36739;&#32467;&#26524;&#30452;&#25509;&#25490;&#24207;&#12290;</p>
<p>Python&#20869;&#32622;&#30340;<code>sorted()</code>&#20989;&#25968;&#23601;&#21487;&#20197;&#23545;<code>list</code>&#36827;&#34892;&#25490;&#24207;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">sorted</span>([<span class="dv">36</span>, <span class="dv">5</span>, <span class="op">-</span><span class="dv">12</span>, <span class="dv">9</span>, <span class="op">-</span><span class="dv">21</span>])
[<span class="op">-</span><span class="dv">21</span>, <span class="op">-</span><span class="dv">12</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">36</span>]</code></pre></div>
<p>&#27492;&#22806;&#65292;<code>sorted()</code>&#20989;&#25968;&#20063;&#26159;&#19968;&#20010;&#39640;&#38454;&#20989;&#25968;&#65292;&#23427;&#36824;&#21487;&#20197;&#25509;&#25910;&#19968;&#20010;<code>key</code>&#20989;&#25968;&#26469;&#23454;&#29616;&#33258;&#23450;&#20041;&#30340;&#25490;&#24207;&#65292;&#20363;&#22914;&#25353;&#32477;&#23545;&#20540;&#22823;&#23567;&#25490;&#24207;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">sorted</span>([<span class="dv">36</span>, <span class="dv">5</span>, <span class="op">-</span><span class="dv">12</span>, <span class="dv">9</span>, <span class="op">-</span><span class="dv">21</span>], key<span class="op">=</span><span class="bu">abs</span>)
[<span class="dv">5</span>, <span class="dv">9</span>, <span class="op">-</span><span class="dv">12</span>, <span class="op">-</span><span class="dv">21</span>, <span class="dv">36</span>]</code></pre></div>
<p><code>key</code>&#25351;&#23450;&#30340;&#20989;&#25968;&#23558;&#20316;&#29992;&#20110;<code>list</code>&#30340;&#27599;&#19968;&#20010;&#20803;&#32032;&#19978;&#65292;&#24182;&#26681;&#25454;<code>key</code>&#20989;&#25968;&#36820;&#22238;&#30340;&#32467;&#26524;&#36827;&#34892;&#25490;&#24207;&#12290;&#23545;&#27604;&#21407;&#22987;&#30340;<code>list</code>&#21644;&#32463;&#36807;<code>key=abs</code>&#22788;&#29702;&#36807;&#30340;<code>list</code>&#65306;</p>
<p><code>list = [36, 5, -12, 9, -21]</code></p>
<p><code>keys = [36, 5,  12, 9,  21]</code></p>
<p>&#28982;&#21518;<code>sorted()</code>&#20989;&#25968;&#25353;&#29031;<code>keys</code>&#36827;&#34892;&#25490;&#24207;&#65292;&#24182;&#25353;&#29031;&#23545;&#24212;&#20851;&#31995;&#36820;&#22238;<code>list</code>&#30456;&#24212;&#30340;&#20803;&#32032;&#65306;</p>
<p>keys&#25490;&#24207;&#32467;&#26524; =&gt; <code>[5, 9,  12,  21, 36]</code> | | | | | &#26368;&#32456;&#32467;&#26524; =&gt; <code>[5, 9, -12, -21, 36]</code></p>
<p>&#25105;&#20204;&#20877;&#30475;&#19968;&#20010;&#23383;&#31526;&#20018;&#25490;&#24207;&#30340;&#20363;&#23376;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">sorted</span>([<span class="st">&#39;bob&#39;</span>, <span class="st">&#39;about&#39;</span>, <span class="st">&#39;Zoo&#39;</span>, <span class="st">&#39;Credit&#39;</span>])
[<span class="st">&#39;Credit&#39;</span>, <span class="st">&#39;Zoo&#39;</span>, <span class="st">&#39;about&#39;</span>, <span class="st">&#39;bob&#39;</span>]</code></pre></div>
<p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#23545;&#23383;&#31526;&#20018;&#25490;&#24207;&#65292;&#26159;&#25353;&#29031;ASCII&#30340;&#22823;&#23567;&#27604;&#36739;&#30340;&#65292;&#30001;&#20110;<code>'Z' &lt; 'a'</code>&#65292;&#32467;&#26524;&#65292;&#22823;&#20889;&#23383;&#27597;Z&#20250;&#25490;&#22312;&#23567;&#20889;&#23383;&#27597;a&#30340;&#21069;&#38754;&#12290;</p>
<p>&#29616;&#22312;&#65292;&#25105;&#20204;&#25552;&#20986;&#25490;&#24207;&#24212;&#35813;&#24573;&#30053;&#22823;&#23567;&#20889;&#65292;&#25353;&#29031;&#23383;&#27597;&#24207;&#25490;&#24207;&#12290;&#35201;&#23454;&#29616;&#36825;&#20010;&#31639;&#27861;&#65292;&#19981;&#24517;&#23545;&#29616;&#26377;&#20195;&#30721;&#22823;&#21152;&#25913;&#21160;&#65292;&#21482;&#35201;&#25105;&#20204;&#33021;&#29992;&#19968;&#20010;<code>key</code>&#20989;&#25968;&#25226;&#23383;&#31526;&#20018;&#26144;&#23556;&#20026;&#24573;&#30053;&#22823;&#23567;&#20889;&#25490;&#24207;&#21363;&#21487;&#12290;&#24573;&#30053;&#22823;&#23567;&#20889;&#26469;&#27604;&#36739;&#20004;&#20010;&#23383;&#31526;&#20018;&#65292;&#23454;&#38469;&#19978;&#23601;&#26159;&#20808;&#25226;&#23383;&#31526;&#20018;&#37117;&#21464;&#25104;&#22823;&#20889;&#65288;&#25110;&#32773;&#37117;&#21464;&#25104;&#23567;&#20889;&#65289;&#65292;&#20877;&#27604;&#36739;&#12290;</p>
<p>&#36825;&#26679;&#65292;&#25105;&#20204;&#32473;<code>sorted</code>&#20256;&#20837;<code>key</code>&#20989;&#25968;&#65292;&#21363;&#21487;&#23454;&#29616;&#24573;&#30053;&#22823;&#23567;&#20889;&#30340;&#25490;&#24207;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">sorted</span>([<span class="st">&#39;bob&#39;</span>, <span class="st">&#39;about&#39;</span>, <span class="st">&#39;Zoo&#39;</span>, <span class="st">&#39;Credit&#39;</span>], key<span class="op">=</span><span class="bu">str</span>.lower)
[<span class="st">&#39;about&#39;</span>, <span class="st">&#39;bob&#39;</span>, <span class="st">&#39;Credit&#39;</span>, <span class="st">&#39;Zoo&#39;</span>]</code></pre></div>
<p>&#35201;&#36827;&#34892;&#21453;&#21521;&#25490;&#24207;&#65292;&#19981;&#24517;&#25913;&#21160;<code>key</code>&#20989;&#25968;&#65292;&#21487;&#20197;&#20256;&#20837;&#31532;&#19977;&#20010;&#21442;&#25968;<code>reverse=True</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">sorted</span>([<span class="st">&#39;bob&#39;</span>, <span class="st">&#39;about&#39;</span>, <span class="st">&#39;Zoo&#39;</span>, <span class="st">&#39;Credit&#39;</span>], key<span class="op">=</span><span class="bu">str</span>.lower, reverse<span class="op">=</span><span class="va">True</span>)
[<span class="st">&#39;Zoo&#39;</span>, <span class="st">&#39;Credit&#39;</span>, <span class="st">&#39;bob&#39;</span>, <span class="st">&#39;about&#39;</span>]</code></pre></div>
<p>&#20174;&#19978;&#36848;&#20363;&#23376;&#21487;&#20197;&#30475;&#20986;&#65292;&#39640;&#38454;&#20989;&#25968;&#30340;&#25277;&#35937;&#33021;&#21147;&#26159;&#38750;&#24120;&#24378;&#22823;&#30340;&#65292;&#32780;&#19988;&#65292;&#26680;&#24515;&#20195;&#30721;&#21487;&#20197;&#20445;&#25345;&#24471;&#38750;&#24120;&#31616;&#27905;&#12290;</p>
<h4 id="&#23567;&#32467;-2">&#23567;&#32467;</h4>
<p><code>sorted()</code>&#20063;&#26159;&#19968;&#20010;&#39640;&#38454;&#20989;&#25968;&#12290;<code>&#29992;sorted()</code>&#25490;&#24207;&#30340;&#20851;&#38190;&#22312;&#20110;&#23454;&#29616;&#19968;&#20010;&#26144;&#23556;&#20989;&#25968;&#12290;</p>
<h4 id="&#32451;&#20064;-2">&#32451;&#20064;</h4>
<p>&#20551;&#35774;&#25105;&#20204;&#29992;&#19968;&#32452;<code>tuple</code>&#34920;&#31034;&#23398;&#29983;&#21517;&#23383;&#21644;&#25104;&#32489;&#65306;<code>L = [('Bob', 75), ('Adam', 92), ('Bart', 66), ('Lisa', 88)]</code> &#35831;&#29992;<code>sorted()</code>&#23545;&#19978;&#36848;&#21015;&#34920;&#20998;&#21035;&#25353;&#21517;&#23383;&#25490;&#24207;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># -*- coding: utf-8 -*-</span>

L <span class="op">=</span> [(<span class="st">&#39;Bob&#39;</span>, <span class="dv">75</span>), (<span class="st">&#39;Adam&#39;</span>, <span class="dv">92</span>), (<span class="st">&#39;Bart&#39;</span>, <span class="dv">66</span>), (<span class="st">&#39;Lisa&#39;</span>, <span class="dv">88</span>)]

<span class="kw">def</span> by_name(t):
        <span class="cf">return</span> t[<span class="dv">0</span>].lower()

L2 <span class="op">=</span> <span class="bu">sorted</span>(L, key<span class="op">=</span>by_name)
<span class="bu">print</span>(L2)</code></pre></div>
<p>&#20877;&#25353;&#25104;&#32489;&#20174;&#39640;&#21040;&#20302;&#25490;&#24207;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># -*- coding: utf-8 -*-</span>

L <span class="op">=</span> [(<span class="st">&#39;Bob&#39;</span>, <span class="dv">75</span>), (<span class="st">&#39;Adam&#39;</span>, <span class="dv">92</span>), (<span class="st">&#39;Bart&#39;</span>, <span class="dv">66</span>), (<span class="st">&#39;Lisa&#39;</span>, <span class="dv">88</span>)]
<span class="kw">def</span> by_score(t):
    <span class="cf">return</span> t[<span class="dv">1</span>]<span class="co">#&#27880;&#24847;L&#26159;&#19968;&#20010;&#30001;tuple&#32452;&#25104;&#30340;list.&#25152;&#20197;T[0]&#26159;&#22995;&#21517; 1&#26159;&#20998;&#25968;</span>
L2 <span class="op">=</span> <span class="bu">sorted</span>(L, key<span class="op">=</span>by_score, reverse<span class="op">=</span><span class="va">True</span>) <span class="co">#&#36870;&#21521;&#25490;&#24207;</span>
<span class="bu">print</span>(L2)</code></pre></div>
<h3 id="&#36820;&#22238;&#20989;&#25968;">7.5 &#36820;&#22238;&#20989;&#25968;</h3>
<h4 id="&#20989;&#25968;&#20316;&#20026;&#36820;&#22238;&#20540;">&#20989;&#25968;&#20316;&#20026;&#36820;&#22238;&#20540;</h4>
<p>&#39640;&#38454;&#20989;&#25968;&#38500;&#20102;&#21487;&#20197;&#25509;&#21463;&#20989;&#25968;&#20316;&#20026;&#21442;&#25968;&#22806;&#65292;&#36824;&#21487;&#20197;&#25226;&#20989;&#25968;&#20316;&#20026;&#32467;&#26524;&#20540;&#36820;&#22238;&#12290;</p>
<p>&#25105;&#20204;&#26469;&#23454;&#29616;&#19968;&#20010;&#21487;&#21464;&#21442;&#25968;&#30340;&#27714;&#21644;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#27714;&#21644;&#30340;&#20989;&#25968;&#26159;&#36825;&#26679;&#23450;&#20041;&#30340;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> calc_sum(<span class="op">*</span>args):
    ax <span class="op">=</span> <span class="dv">0</span>
    <span class="cf">for</span> n <span class="op">in</span> args:
        ax <span class="op">=</span> ax <span class="op">+</span> n
    <span class="cf">return</span> ax</code></pre></div>
<p>&#20294;&#26159;&#65292;&#22914;&#26524;&#19981;&#38656;&#35201;&#31435;&#21051;&#27714;&#21644;&#65292;&#32780;&#26159;&#22312;&#21518;&#38754;&#30340;&#20195;&#30721;&#20013;&#65292;&#26681;&#25454;&#38656;&#35201;&#20877;&#35745;&#31639;&#24590;&#20040;&#21150;&#65311;&#21487;&#20197;&#19981;&#36820;&#22238;&#27714;&#21644;&#30340;&#32467;&#26524;&#65292;&#32780;&#26159;&#36820;&#22238;&#27714;&#21644;&#30340;&#20989;&#25968;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> lazy_sum(<span class="op">*</span>args):
    <span class="kw">def</span> <span class="bu">sum</span>():
        ax <span class="op">=</span> <span class="dv">0</span>
        <span class="cf">for</span> n <span class="op">in</span> args:
            ax <span class="op">=</span> ax <span class="op">+</span> n
        <span class="cf">return</span> ax
    <span class="cf">return</span> <span class="bu">sum</span></code></pre></div>
<p>&#24403;&#25105;&#20204;&#35843;&#29992;<code>lazy_sum()</code>&#26102;&#65292;&#36820;&#22238;&#30340;&#24182;&#19981;&#26159;&#27714;&#21644;&#32467;&#26524;&#65292;&#32780;&#26159;&#27714;&#21644;&#20989;&#25968;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> lazy_sum(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>)
<span class="op">&gt;&gt;&gt;</span> f
<span class="op">&lt;</span>function lazy_sum.<span class="op">&lt;</span><span class="bu">locals</span><span class="op">&gt;</span>.<span class="bu">sum</span> at <span class="bn">0x101c6ed90</span><span class="op">&gt;</span></code></pre></div>
<p>&#35843;&#29992;&#20989;&#25968;f&#26102;&#65292;&#25165;&#30495;&#27491;&#35745;&#31639;&#27714;&#21644;&#30340;&#32467;&#26524;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f()
<span class="dv">25</span></code></pre></div>
<p>&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#22312;&#20989;&#25968;<code>lazy_sum</code>&#20013;&#21448;&#23450;&#20041;&#20102;&#20989;&#25968;<code>sum</code>&#65292;&#24182;&#19988;&#65292;&#20869;&#37096;&#20989;&#25968;<code>sum</code>&#21487;&#20197;&#24341;&#29992;&#22806;&#37096;&#20989;&#25968;<code>lazy_sum</code>&#30340;&#21442;&#25968;&#21644;&#23616;&#37096;&#21464;&#37327;&#65292;&#24403;<code>lazy_sum</code>&#36820;&#22238;&#20989;&#25968;<code>sum</code>&#26102;&#65292;&#30456;&#20851;&#21442;&#25968;&#21644;&#21464;&#37327;&#37117;&#20445;&#23384;&#22312;&#36820;&#22238;&#30340;&#20989;&#25968;&#20013;&#65292;&#36825;&#31181;&#31216;&#20026;&#8220;<code>&#38381;&#21253;&#65288;Closure&#65289;</code>&#8221;&#30340;&#31243;&#24207;&#32467;&#26500;&#25317;&#26377;&#26497;&#22823;&#30340;&#23041;&#21147;&#12290;</p>
<p>&#35831;&#20877;&#27880;&#24847;&#19968;&#28857;&#65292;&#24403;&#25105;&#20204;&#35843;&#29992;<code>lazy_sum()</code>&#26102;&#65292;&#27599;&#27425;&#35843;&#29992;&#37117;&#20250;&#36820;&#22238;&#19968;&#20010;&#26032;&#30340;&#20989;&#25968;&#65292;&#21363;&#20351;&#20256;&#20837;&#30456;&#21516;&#30340;&#21442;&#25968;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f1 <span class="op">=</span> lazy_sum(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>)
<span class="op">&gt;&gt;&gt;</span> f2 <span class="op">=</span> lazy_sum(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>)
<span class="op">&gt;&gt;&gt;</span> f1<span class="op">==</span>f2
<span class="va">False</span></code></pre></div>
<p><code>f1()</code>&#21644;<code>f2()</code>&#30340;&#35843;&#29992;&#32467;&#26524;&#20114;&#19981;&#24433;&#21709;&#12290;</p>
<h4 id="&#38381;&#21253;">&#38381;&#21253;</h4>
<p>&#27880;&#24847;&#21040;&#36820;&#22238;&#30340;&#20989;&#25968;&#22312;&#20854;&#23450;&#20041;&#20869;&#37096;&#24341;&#29992;&#20102;&#23616;&#37096;&#21464;&#37327;<code>args</code>&#65292;&#25152;&#20197;&#65292;&#24403;&#19968;&#20010;&#20989;&#25968;&#36820;&#22238;&#20102;&#19968;&#20010;&#20989;&#25968;&#21518;&#65292;&#20854;&#20869;&#37096;&#30340;&#23616;&#37096;&#21464;&#37327;&#36824;&#34987;&#26032;&#20989;&#25968;&#24341;&#29992;&#65292;&#25152;&#20197;&#65292;&#38381;&#21253;&#29992;&#36215;&#26469;&#31616;&#21333;&#65292;&#23454;&#29616;&#36215;&#26469;&#21487;&#19981;&#23481;&#26131;&#12290;</p>
<p>&#21478;&#19968;&#20010;&#38656;&#35201;&#27880;&#24847;&#30340;&#38382;&#39064;&#26159;&#65292;&#36820;&#22238;&#30340;&#20989;&#25968;&#24182;&#27809;&#26377;&#31435;&#21051;&#25191;&#34892;&#65292;&#32780;&#26159;&#30452;&#21040;&#35843;&#29992;&#20102;<code>f()</code>&#25165;&#25191;&#34892;&#12290;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#20363;&#23376;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> count():
    fs <span class="op">=</span> []
    <span class="cf">for</span> i <span class="op">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">4</span>):
        <span class="kw">def</span> f():
             <span class="cf">return</span> i<span class="op">*</span>i
        fs.append(f)
    <span class="cf">return</span> fs

f1, f2, f3 <span class="op">=</span> count()</code></pre></div>
<p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#27599;&#27425;&#24490;&#29615;&#65292;&#37117;&#21019;&#24314;&#20102;&#19968;&#20010;&#26032;&#30340;&#20989;&#25968;&#65292;&#28982;&#21518;&#65292;&#25226;&#21019;&#24314;&#30340;3&#20010;&#20989;&#25968;&#37117;&#36820;&#22238;&#20102;&#12290;</p>
<p>&#20320;&#21487;&#33021;&#35748;&#20026;&#35843;&#29992;<code>f1()</code>&#65292;<code>f2()</code>&#21644;<code>f3()</code>&#32467;&#26524;&#24212;&#35813;&#26159;1&#65292;4&#65292;9&#65292;&#20294;&#23454;&#38469;&#32467;&#26524;&#26159;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f1()
<span class="dv">9</span>
<span class="op">&gt;&gt;&gt;</span> f2()
<span class="dv">9</span>
<span class="op">&gt;&gt;&gt;</span> f3()
<span class="dv">9</span></code></pre></div>
<p>&#20840;&#37096;&#37117;&#26159;9&#65281;&#21407;&#22240;&#23601;&#22312;&#20110;&#36820;&#22238;&#30340;&#20989;&#25968;&#24341;&#29992;&#20102;&#21464;&#37327;<code>i</code>&#65292;&#20294;&#23427;&#24182;&#38750;&#31435;&#21051;&#25191;&#34892;&#12290;&#31561;&#21040;3&#20010;&#20989;&#25968;&#37117;&#36820;&#22238;&#26102;&#65292;&#23427;&#20204;&#25152;&#24341;&#29992;&#30340;&#21464;&#37327;i&#24050;&#32463;&#21464;&#25104;&#20102;3&#65292;&#22240;&#27492;&#26368;&#32456;&#32467;&#26524;&#20026;9&#12290;</p>
<p>&#36820;&#22238;&#38381;&#21253;&#26102;&#29282;&#35760;&#30340;&#19968;&#28857;&#23601;&#26159;&#65306;&#36820;&#22238;&#20989;&#25968;&#19981;&#35201;&#24341;&#29992;&#20219;&#20309;&#24490;&#29615;&#21464;&#37327;&#65292;&#25110;&#32773;&#21518;&#32493;&#20250;&#21457;&#29983;&#21464;&#21270;&#30340;&#21464;&#37327;&#12290;</p>
<p>&#22914;&#26524;&#19968;&#23450;&#35201;&#24341;&#29992;&#24490;&#29615;&#21464;&#37327;&#24590;&#20040;&#21150;&#65311;&#26041;&#27861;&#26159;&#20877;&#21019;&#24314;&#19968;&#20010;&#20989;&#25968;&#65292;&#29992;&#35813;&#20989;&#25968;&#30340;&#21442;&#25968;&#32465;&#23450;&#24490;&#29615;&#21464;&#37327;&#24403;&#21069;&#30340;&#20540;&#65292;&#26080;&#35770;&#35813;&#24490;&#29615;&#21464;&#37327;&#21518;&#32493;&#22914;&#20309;&#26356;&#25913;&#65292;&#24050;&#32465;&#23450;&#21040;&#20989;&#25968;&#21442;&#25968;&#30340;&#20540;&#19981;&#21464;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> count():
    <span class="kw">def</span> f(j):
        <span class="kw">def</span> g():
            <span class="cf">return</span> j<span class="op">*</span>j
        <span class="cf">return</span> g
    fs <span class="op">=</span> []
    <span class="cf">for</span> i <span class="op">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">4</span>):
        fs.append(f(i)) <span class="co"># f(i)&#31435;&#21051;&#34987;&#25191;&#34892;&#65292;&#22240;&#27492;i&#30340;&#24403;&#21069;&#20540;&#34987;&#20256;&#20837;f()</span>
    <span class="cf">return</span> fs</code></pre></div>
<p>&#20877;&#30475;&#30475;&#32467;&#26524;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f1, f2, f3 <span class="op">=</span> count()
<span class="op">&gt;&gt;&gt;</span> f1()
<span class="dv">1</span>
<span class="op">&gt;&gt;&gt;</span> f2()
<span class="dv">4</span>
<span class="op">&gt;&gt;&gt;</span> f3()
<span class="dv">9</span></code></pre></div>
<p>&#32570;&#28857;&#26159;&#20195;&#30721;&#36739;&#38271;&#65292;&#21487;&#21033;&#29992;<code>lambda&#20989;&#25968;</code>&#32553;&#30701;&#20195;&#30721;&#12290;</p>
<h4 id="&#23567;&#32467;-3">&#23567;&#32467;</h4>
<p>&#19968;&#20010;&#20989;&#25968;&#21487;&#20197;&#36820;&#22238;&#19968;&#20010;&#35745;&#31639;&#32467;&#26524;&#65292;&#20063;&#21487;&#20197;&#36820;&#22238;&#19968;&#20010;&#20989;&#25968;&#12290;</p>
<p>&#36820;&#22238;&#19968;&#20010;&#20989;&#25968;&#26102;&#65292;&#29282;&#35760;&#35813;&#20989;&#25968;&#24182;&#26410;&#25191;&#34892;&#65292;&#36820;&#22238;&#20989;&#25968;&#20013;&#19981;&#35201;&#24341;&#29992;&#20219;&#20309;&#21487;&#33021;&#20250;&#21464;&#21270;&#30340;&#21464;&#37327;&#12290;</p>
<h3 id="&#21311;&#21517;&#20989;&#25968;">7.6 &#21311;&#21517;&#20989;&#25968;</h3>
<p>&#24403;&#25105;&#20204;&#22312;&#20256;&#20837;&#20989;&#25968;&#26102;&#65292;&#26377;&#20123;&#26102;&#20505;&#65292;&#19981;&#38656;&#35201;&#26174;&#24335;&#22320;&#23450;&#20041;&#20989;&#25968;&#65292;&#30452;&#25509;&#20256;&#20837;&#21311;&#21517;&#20989;&#25968;&#26356;&#26041;&#20415;&#12290;</p>
<p>&#22312;Python&#20013;&#65292;&#23545;&#21311;&#21517;&#20989;&#25968;&#25552;&#20379;&#20102;&#26377;&#38480;&#25903;&#25345;&#12290;&#36824;&#26159;&#20197;<code>map()</code>&#20989;&#25968;&#20026;&#20363;&#65292;&#35745;&#31639;<span class="math inline"><em>f</em>(<em>x</em>)&#8196;=&#8196;<em>x</em><sup>2</sup></span>&#26102;&#65292;&#38500;&#20102;&#23450;&#20041;&#19968;&#20010;<code>f(x)</code>&#30340;&#20989;&#25968;&#22806;&#65292;&#36824;&#21487;&#20197;&#30452;&#25509;&#20256;&#20837;&#21311;&#21517;&#20989;&#25968;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(<span class="bu">map</span>(<span class="kw">lambda</span> x: x <span class="op">*</span> x, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]))
[<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">36</span>, <span class="dv">49</span>, <span class="dv">64</span>, <span class="dv">81</span>]</code></pre></div>
<p>&#36890;&#36807;&#23545;&#27604;&#21487;&#20197;&#30475;&#20986;&#65292;&#21311;&#21517;&#20989;&#25968;<code>lambda x: x * x</code>&#23454;&#38469;&#19978;&#23601;&#26159;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> f(x):
    <span class="cf">return</span> x <span class="op">*</span> x</code></pre></div>
<p>&#20851;&#38190;&#23383;<code>lambda</code>&#34920;&#31034;&#21311;&#21517;&#20989;&#25968;&#65292;&#20882;&#21495;&#21069;&#38754;&#30340;x&#34920;&#31034;&#20989;&#25968;&#21442;&#25968;&#12290;</p>
<p>&#21311;&#21517;&#20989;&#25968;&#26377;&#20010;&#38480;&#21046;&#65292;&#23601;&#26159;&#21482;&#33021;&#26377;&#19968;&#20010;&#34920;&#36798;&#24335;&#65292;&#19981;&#29992;&#20889;<code>return</code>&#65292;&#36820;&#22238;&#20540;&#23601;&#26159;&#35813;&#34920;&#36798;&#24335;&#30340;&#32467;&#26524;&#12290;</p>
<p>&#29992;&#21311;&#21517;&#20989;&#25968;&#26377;&#20010;&#22909;&#22788;&#65292;&#22240;&#20026;&#20989;&#25968;&#27809;&#26377;&#21517;&#23383;&#65292;&#19981;&#24517;&#25285;&#24515;&#20989;&#25968;&#21517;&#20914;&#31361;&#12290;&#27492;&#22806;&#65292;&#21311;&#21517;&#20989;&#25968;&#20063;&#26159;&#19968;&#20010;&#20989;&#25968;&#23545;&#35937;&#65292;&#20063;&#21487;&#20197;&#25226;&#21311;&#21517;&#20989;&#25968;&#36171;&#20540;&#32473;&#19968;&#20010;&#21464;&#37327;&#65292;&#20877;&#21033;&#29992;&#21464;&#37327;&#26469;&#35843;&#29992;&#35813;&#20989;&#25968;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> <span class="kw">lambda</span> x: x <span class="op">*</span> x
<span class="op">&gt;&gt;&gt;</span> f
<span class="op">&lt;</span>function <span class="op">&lt;</span><span class="kw">lambda</span><span class="op">&gt;</span> at <span class="bn">0x101c6ef28</span><span class="op">&gt;</span>
<span class="op">&gt;&gt;&gt;</span> f(<span class="dv">5</span>)
<span class="dv">25</span></code></pre></div>
<p>&#21516;&#26679;&#65292;&#20063;&#21487;&#20197;&#25226;&#21311;&#21517;&#20989;&#25968;&#20316;&#20026;&#36820;&#22238;&#20540;&#36820;&#22238;&#65292;&#27604;&#22914;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> build(x, y):
    <span class="cf">return</span> <span class="kw">lambda</span>: x <span class="op">*</span> x <span class="op">+</span> y <span class="op">*</span> y</code></pre></div>
<h4 id="&#23567;&#32467;-4">&#12288;&#23567;&#32467;</h4>
<p>Python&#23545;&#21311;&#21517;&#20989;&#25968;&#30340;&#25903;&#25345;&#26377;&#38480;&#65292;&#21482;&#26377;&#19968;&#20123;&#31616;&#21333;&#30340;&#24773;&#20917;&#19979;&#21487;&#20197;&#20351;&#29992;&#21311;&#21517;&#20989;&#25968;&#12290;</p>
<h3 id="&#35013;&#39280;&#22120;">7.7 &#35013;&#39280;&#22120;</h3>
<p>&#30001;&#20110;&#20989;&#25968;&#20063;&#26159;&#19968;&#20010;&#23545;&#35937;&#65292;&#32780;&#19988;&#20989;&#25968;&#23545;&#35937;&#21487;&#20197;&#34987;&#36171;&#20540;&#32473;&#21464;&#37327;&#65292;&#25152;&#20197;&#65292;&#36890;&#36807;&#21464;&#37327;&#20063;&#33021;&#35843;&#29992;&#35813;&#20989;&#25968;&#12290;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> now():
...     <span class="bu">print</span>(<span class="st">&#39;2015-3-25&#39;</span>)
...
<span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> now
<span class="op">&gt;&gt;&gt;</span> f()
<span class="dv">2015-3-25</span></code></pre></div>
<p>&#20989;&#25968;&#23545;&#35937;&#26377;&#19968;&#20010;<code>__name__</code>&#23646;&#24615;&#65292;&#21487;&#20197;&#25343;&#21040;&#20989;&#25968;&#30340;&#21517;&#23383;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> now.<span class="va">__name__</span>
<span class="co">&#39;now&#39;</span>
<span class="op">&gt;&gt;&gt;</span> f.<span class="va">__name__</span>
<span class="co">&#39;now&#39;</span></code></pre></div>
<p>&#29616;&#22312;&#65292;&#20551;&#35774;&#25105;&#20204;&#35201;&#22686;&#24378;<code>now()</code>&#20989;&#25968;&#30340;&#21151;&#33021;&#65292;&#27604;&#22914;&#65292;&#22312;&#20989;&#25968;&#35843;&#29992;&#21069;&#21518;&#33258;&#21160;&#25171;&#21360;&#26085;&#24535;&#65292;&#20294;&#21448;&#19981;&#24076;&#26395;&#20462;&#25913;<code>now()</code>&#20989;&#25968;&#30340;&#23450;&#20041;&#65292;&#36825;&#31181;&#22312;&#20195;&#30721;&#36816;&#34892;&#26399;&#38388;&#21160;&#24577;&#22686;&#21152;&#21151;&#33021;&#30340;&#26041;&#24335;&#65292;&#31216;&#20043;&#20026;&#8220;<strong>&#35013;&#39280;&#22120;</strong>&#8221;&#65288;<code>Decorator</code>&#65289;&#12290;</p>
<p>&#26412;&#36136;&#19978;&#65292;<code>decorator</code>&#23601;&#26159;&#19968;&#20010;&#36820;&#22238;&#20989;&#25968;&#30340;&#39640;&#38454;&#20989;&#25968;&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;&#35201;&#23450;&#20041;&#19968;&#20010;&#33021;&#25171;&#21360;&#26085;&#24535;&#30340;<code>decorator</code>&#65292;&#21487;&#20197;&#23450;&#20041;&#22914;&#19979;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> log(func):
    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kw):
        <span class="bu">print</span>(<span class="st">&#39;call </span><span class="sc">%s</span><span class="st">():&#39;</span> <span class="op">%</span> func.<span class="va">__name__</span>)
        <span class="cf">return</span> func(<span class="op">*</span>args, <span class="op">**</span>kw)
    <span class="cf">return</span> wrapper</code></pre></div>
<p>&#35266;&#23519;&#19978;&#38754;&#30340;<code>log</code>&#65292;&#22240;&#20026;&#23427;&#26159;&#19968;&#20010;<code>decorator</code>&#65292;&#25152;&#20197;&#25509;&#21463;&#19968;&#20010;&#20989;&#25968;&#20316;&#20026;&#21442;&#25968;&#65292;&#24182;&#36820;&#22238;&#19968;&#20010;&#20989;&#25968;&#12290;&#25105;&#20204;&#35201;&#20511;&#21161;Python&#30340;<code>@&#35821;&#27861;</code>&#65292;&#25226;<code>decorator</code>&#32622;&#20110;&#20989;&#25968;&#30340;&#23450;&#20041;&#22788;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="at">@log</span>
<span class="kw">def</span> now():
    <span class="bu">print</span>(<span class="st">&#39;2015-3-25&#39;</span>)</code></pre></div>
<p>&#35843;&#29992;<code>now()</code>&#20989;&#25968;&#65292;&#19981;&#20165;&#20250;&#36816;&#34892;<code>now()</code>&#20989;&#25968;&#26412;&#36523;&#65292;&#36824;&#20250;&#22312;&#36816;&#34892;<code>now()</code>&#20989;&#25968;&#21069;&#25171;&#21360;&#19968;&#34892;&#26085;&#24535;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> now()
call now():
<span class="dv">2015-3-25</span></code></pre></div>
<p>&#25226;<code>@log</code>&#25918;&#21040;<code>now()</code>&#20989;&#25968;&#30340;&#23450;&#20041;&#22788;&#65292;&#30456;&#24403;&#20110;&#25191;&#34892;&#20102;&#35821;&#21477;&#65306;<code>now = log(now)</code></p>
<p>&#30001;&#20110;<code>log()</code>&#26159;&#19968;&#20010;<code>decorator</code>&#65292;&#36820;&#22238;&#19968;&#20010;&#20989;&#25968;&#65292;&#25152;&#20197;&#65292;&#21407;&#26469;&#30340;<code>now()</code>&#20989;&#25968;&#20173;&#28982;&#23384;&#22312;&#65292;&#21482;&#26159;&#29616;&#22312;&#21516;&#21517;&#30340;<code>now</code>&#21464;&#37327;&#25351;&#21521;&#20102;&#26032;&#30340;&#20989;&#25968;&#65292;&#20110;&#26159;&#35843;&#29992;<code>now()</code>&#23558;&#25191;&#34892;&#26032;&#20989;&#25968;&#65292;&#21363;&#22312;<code>log()</code>&#20989;&#25968;&#20013;&#36820;&#22238;&#30340;<code>wrapper()</code>&#20989;&#25968;&#12290;</p>
<p><code>wrapper()</code>&#20989;&#25968;&#30340;&#21442;&#25968;&#23450;&#20041;&#26159;<code>(*args, **kw)</code>&#65292;&#22240;&#27492;&#65292;<code>wrapper()</code>&#20989;&#25968;&#21487;&#20197;&#25509;&#21463;&#20219;&#24847;&#21442;&#25968;&#30340;&#35843;&#29992;&#12290;&#22312;<code>wrapper()</code>&#20989;&#25968;&#20869;&#65292;&#39318;&#20808;&#25171;&#21360;&#26085;&#24535;&#65292;&#20877;&#32039;&#25509;&#30528;&#35843;&#29992;&#21407;&#22987;&#20989;&#25968;&#12290;</p>
<p>&#22914;&#26524;<code>decorator</code>&#26412;&#36523;&#38656;&#35201;&#20256;&#20837;&#21442;&#25968;&#65292;&#37027;&#23601;&#38656;&#35201;&#32534;&#20889;&#19968;&#20010;&#36820;&#22238;<code>decorator</code>&#30340;&#39640;&#38454;&#20989;&#25968;&#65292;&#20889;&#20986;&#26469;&#20250;&#26356;&#22797;&#26434;&#12290;&#27604;&#22914;&#65292;&#35201;&#33258;&#23450;&#20041;<code>log</code>&#30340;&#25991;&#26412;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> log(text):
    <span class="kw">def</span> decorator(func):
        <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kw):
            <span class="bu">print</span>(<span class="st">&#39;</span><span class="sc">%s</span><span class="st"> </span><span class="sc">%s</span><span class="st">():&#39;</span> <span class="op">%</span> (text, func.<span class="va">__name__</span>))
            <span class="cf">return</span> func(<span class="op">*</span>args, <span class="op">**</span>kw)
        <span class="cf">return</span> wrapper
    <span class="cf">return</span> decorator</code></pre></div>
<p>&#36825;&#20010;3&#23618;&#23884;&#22871;&#30340;<code>decorator</code>&#29992;&#27861;&#22914;&#19979;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="at">@log</span>(<span class="st">&#39;execute&#39;</span>)
<span class="kw">def</span> now():
    <span class="bu">print</span>(<span class="st">&#39;2015-3-25&#39;</span>)</code></pre></div>
<p>&#25191;&#34892;&#32467;&#26524;&#22914;&#19979;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> now()
execute now():
<span class="dv">2015-3-25</span></code></pre></div>
<p>&#21644;&#20004;&#23618;&#23884;&#22871;&#30340;<code>decorator</code>&#30456;&#27604;&#65292;3&#23618;&#23884;&#22871;&#30340;&#25928;&#26524;&#26159;&#36825;&#26679;&#30340;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> now <span class="op">=</span> log(<span class="st">&#39;execute&#39;</span>)(now)</code></pre></div>
<p>&#25105;&#20204;&#26469;&#21078;&#26512;&#19978;&#38754;&#30340;&#35821;&#21477;&#65292;&#39318;&#20808;&#25191;&#34892;<code>log('execute')</code>&#65292;&#36820;&#22238;&#30340;&#26159;<code>decorator</code>&#20989;&#25968;&#65292;&#20877;&#35843;&#29992;&#36820;&#22238;&#30340;&#20989;&#25968;&#65292;&#21442;&#25968;&#26159;<code>now</code>&#20989;&#25968;&#65292;&#36820;&#22238;&#20540;&#26368;&#32456;&#26159;<code>wrapper</code>&#20989;&#25968;&#12290;</p>
<p>&#20197;&#19978;&#20004;&#31181;<code>decorator</code>&#30340;&#23450;&#20041;&#37117;&#27809;&#26377;&#38382;&#39064;&#65292;&#20294;&#36824;&#24046;&#26368;&#21518;&#19968;&#27493;&#12290;&#22240;&#20026;&#25105;&#20204;&#35762;&#20102;&#20989;&#25968;&#20063;&#26159;&#23545;&#35937;&#65292;&#23427;&#26377;<code>__name__</code>&#31561;&#23646;&#24615;&#65292;&#20294;&#20320;&#21435;&#30475;&#32463;&#36807;<code>decorator</code>&#35013;&#39280;&#20043;&#21518;&#30340;&#20989;&#25968;&#65292;&#23427;&#20204;&#30340;<code>__name__</code>&#24050;&#32463;&#20174;&#21407;&#26469;&#30340;<code>'now'</code>&#21464;&#25104;&#20102;<code>'wrapper'</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> now.<span class="va">__name__</span>
<span class="co">&#39;wrapper&#39;</span></code></pre></div>
<p>&#22240;&#20026;&#36820;&#22238;&#30340;&#37027;&#20010;<code>wrapper()</code>&#20989;&#25968;&#21517;&#23383;&#23601;&#26159;<code>'wrapper'</code>&#65292;&#25152;&#20197;&#65292;&#38656;&#35201;&#25226;&#21407;&#22987;&#20989;&#25968;&#30340;<code>__name__</code>&#31561;&#23646;&#24615;&#22797;&#21046;&#21040;<code>wrapper()</code>&#20989;&#25968;&#20013;&#65292;&#21542;&#21017;&#65292;&#26377;&#20123;&#20381;&#36182;&#20989;&#25968;&#31614;&#21517;&#30340;&#20195;&#30721;&#25191;&#34892;&#23601;&#20250;&#20986;&#38169;&#12290;</p>
<p>&#19981;&#38656;&#35201;&#32534;&#20889;<code>wrapper.__name__ = func.__name__</code>&#36825;&#26679;&#30340;&#20195;&#30721;&#65292;Python&#20869;&#32622;&#30340;<code>functools.wraps</code>&#23601;&#26159;&#24178;&#36825;&#20010;&#20107;&#30340;&#65292;&#25152;&#20197;&#65292;&#19968;&#20010;&#23436;&#25972;&#30340;<code>decorator</code>&#30340;&#20889;&#27861;&#22914;&#19979;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> functools

<span class="kw">def</span> log(func):
    <span class="at">@functools.wraps</span>(func)
    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kw):
        <span class="bu">print</span>(<span class="st">&#39;call </span><span class="sc">%s</span><span class="st">():&#39;</span> <span class="op">%</span> func.<span class="va">__name__</span>)
        <span class="cf">return</span> func(<span class="op">*</span>args, <span class="op">**</span>kw)
    <span class="cf">return</span> wrapper</code></pre></div>
<p>&#25110;&#32773;&#38024;&#23545;&#24102;&#21442;&#25968;&#30340;<code>decorator</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> functools

<span class="kw">def</span> log(text):
    <span class="kw">def</span> decorator(func):
        <span class="at">@functools.wraps</span>(func)
        <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kw):
            <span class="bu">print</span>(<span class="st">&#39;</span><span class="sc">%s</span><span class="st"> </span><span class="sc">%s</span><span class="st">():&#39;</span> <span class="op">%</span> (text, func.<span class="va">__name__</span>))
            <span class="cf">return</span> func(<span class="op">*</span>args, <span class="op">**</span>kw)
        <span class="cf">return</span> wrapper
    <span class="cf">return</span> decorator</code></pre></div>
<p><code>import functools</code>&#26159;&#23548;&#20837;<code>functools</code>&#27169;&#22359;&#12290;&#27169;&#22359;&#30340;&#27010;&#24565;&#31245;&#20505;&#35762;&#35299;&#12290;&#29616;&#22312;&#65292;&#21482;&#38656;&#35760;&#20303;&#22312;&#23450;&#20041;<code>wrapper()</code>&#30340;&#21069;&#38754;&#21152;&#19978;<code>@functools.wraps(func)</code>&#21363;&#21487;&#12290;</p>
<h4 id="&#23567;&#32467;-5">&#23567;&#32467;</h4>
<p>&#22312;&#38754;&#21521;&#23545;&#35937;<code>&#65288;OOP&#65289;</code>&#30340;&#35774;&#35745;&#27169;&#24335;&#20013;&#65292;<code>decorator</code>&#34987;&#31216;&#20026;&#35013;&#39280;&#27169;&#24335;&#12290;<code>OOP</code>&#30340;&#35013;&#39280;&#27169;&#24335;&#38656;&#35201;&#36890;&#36807;&#32487;&#25215;&#21644;&#32452;&#21512;&#26469;&#23454;&#29616;&#65292;&#32780;Python&#38500;&#20102;&#33021;&#25903;&#25345;<code>OOP</code>&#30340;<code>decorator</code>&#22806;&#65292;&#30452;&#25509;&#20174;&#35821;&#27861;&#23618;&#27425;&#25903;&#25345;<code>decorator</code>&#12290;Python&#30340;<code>decorator</code>&#21487;&#20197;&#29992;&#20989;&#25968;&#23454;&#29616;&#65292;&#20063;&#21487;&#20197;&#29992;&#31867;&#23454;&#29616;&#12290;</p>
<p><code>decorator</code>&#21487;&#20197;&#22686;&#24378;&#20989;&#25968;&#30340;&#21151;&#33021;&#65292;&#23450;&#20041;&#36215;&#26469;&#34429;&#28982;&#26377;&#28857;&#22797;&#26434;&#65292;&#20294;&#20351;&#29992;&#36215;&#26469;&#38750;&#24120;&#28789;&#27963;&#21644;&#26041;&#20415;&#12290;</p>
<p>&#35831;&#32534;&#20889;&#19968;&#20010;<code>decorator</code>&#65292;&#33021;&#22312;&#20989;&#25968;&#35843;&#29992;&#30340;&#21069;&#21518;&#25171;&#21360;&#20986;<code>'begin call'&#21644;'end call'</code>&#30340;&#26085;&#24535;&#12290;</p>
<p>&#20877;&#24605;&#32771;&#19968;&#19979;&#33021;&#21542;&#20889;&#20986;&#19968;&#20010;<code>@log</code>&#30340;<code>decorator</code>&#65292;&#20351;&#23427;&#26082;&#25903;&#25345;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="at">@log</span>
<span class="kw">def</span> f():
    <span class="cf">pass</span></code></pre></div>
<p>&#21448;&#25903;&#25345;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="at">@log</span>(<span class="st">&#39;execute&#39;</span>)
<span class="kw">def</span> f():
    <span class="cf">pass</span></code></pre></div>
<h3 id="&#20559;&#20989;&#25968;">7.8 &#20559;&#20989;&#25968;</h3>
<p>Python&#30340;<code>functools</code>&#27169;&#22359;&#25552;&#20379;&#20102;&#24456;&#22810;&#26377;&#29992;&#30340;&#21151;&#33021;&#65292;&#20854;&#20013;&#19968;&#20010;&#23601;&#26159;&#20559;&#20989;&#25968;&#65288;<code>Partial function</code>&#65289;&#12290;&#35201;&#27880;&#24847;&#65292;&#36825;&#37324;&#30340;&#20559;&#20989;&#25968;&#21644;&#25968;&#23398;&#24847;&#20041;&#19978;&#30340;&#20559;&#20989;&#25968;&#19981;&#19968;&#26679;&#12290;</p>
<p>&#22312;&#20171;&#32461;&#20989;&#25968;&#21442;&#25968;&#30340;&#26102;&#20505;&#65292;&#25105;&#20204;&#35762;&#21040;&#65292;&#36890;&#36807;&#35774;&#23450;&#21442;&#25968;&#30340;&#40664;&#35748;&#20540;&#65292;&#21487;&#20197;&#38477;&#20302;&#20989;&#25968;&#35843;&#29992;&#30340;&#38590;&#24230;&#12290;&#32780;&#20559;&#20989;&#25968;&#20063;&#21487;&#20197;&#20570;&#21040;&#36825;&#19968;&#28857;&#12290;&#20030;&#20363;&#22914;&#19979;&#65306;</p>
<p><code>int()</code>&#20989;&#25968;&#21487;&#20197;&#25226;&#23383;&#31526;&#20018;&#36716;&#25442;&#20026;&#25972;&#25968;&#65292;&#24403;&#20165;&#20256;&#20837;&#23383;&#31526;&#20018;&#26102;&#65292;<code>int()</code>&#20989;&#25968;&#40664;&#35748;&#25353;&#21313;&#36827;&#21046;&#36716;&#25442;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">int</span>(<span class="st">&#39;12345&#39;</span>)
<span class="dv">12345</span></code></pre></div>
<p>&#20294;<code>int()</code>&#20989;&#25968;&#36824;&#25552;&#20379;&#39069;&#22806;&#30340;<code>base</code>&#21442;&#25968;&#65292;&#40664;&#35748;&#20540;&#20026;10&#12290;&#22914;&#26524;&#20256;&#20837;<code>base</code>&#21442;&#25968;&#65292;&#23601;&#21487;&#20197;&#20570;<code>N&#36827;&#21046;</code>&#30340;&#36716;&#25442;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">int</span>(<span class="st">&#39;12345&#39;</span>, base<span class="op">=</span><span class="dv">8</span>)
<span class="dv">5349</span>
<span class="op">&gt;&gt;&gt;</span> <span class="bu">int</span>(<span class="st">&#39;12345&#39;</span>, <span class="dv">16</span>)
<span class="dv">74565</span></code></pre></div>
<p>&#20551;&#35774;&#35201;&#36716;&#25442;&#22823;&#37327;&#30340;&#20108;&#36827;&#21046;&#23383;&#31526;&#20018;&#65292;&#27599;&#27425;&#37117;&#20256;&#20837;<code>int(x, base=2)</code>&#38750;&#24120;&#40635;&#28902;&#65292;&#20110;&#26159;&#65292;&#25105;&#20204;&#24819;&#21040;&#65292;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;<code>int2()</code>&#30340;&#20989;&#25968;&#65292;&#40664;&#35748;&#25226;<code>base=2</code>&#20256;&#36827;&#21435;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> int2(x, base<span class="op">=</span><span class="dv">2</span>):
    <span class="cf">return</span> <span class="bu">int</span>(x, base)</code></pre></div>
<p>&#36825;&#26679;&#65292;&#25105;&#20204;&#36716;&#25442;&#20108;&#36827;&#21046;&#23601;&#38750;&#24120;&#26041;&#20415;&#20102;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> int2(<span class="st">&#39;1000000&#39;</span>)
<span class="dv">64</span>
<span class="op">&gt;&gt;&gt;</span> int2(<span class="st">&#39;1010101&#39;</span>)
<span class="dv">85</span></code></pre></div>
<p><code>functools.partial</code>&#23601;&#26159;&#24110;&#21161;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;&#20559;&#20989;&#25968;&#30340;&#65292;&#19981;&#38656;&#35201;&#25105;&#20204;&#33258;&#24049;&#23450;&#20041;<code>int2()</code>&#65292;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;&#19979;&#38754;&#30340;&#20195;&#30721;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#20989;&#25968;<code>int2</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> functools
<span class="op">&gt;&gt;&gt;</span> int2 <span class="op">=</span> functools.partial(<span class="bu">int</span>, base<span class="op">=</span><span class="dv">2</span>)
<span class="op">&gt;&gt;&gt;</span> int2(<span class="st">&#39;1000000&#39;</span>)
<span class="dv">64</span>
<span class="op">&gt;&gt;&gt;</span> int2(<span class="st">&#39;1010101&#39;</span>)
<span class="dv">85</span></code></pre></div>
<p>&#25152;&#20197;&#65292;&#31616;&#21333;&#24635;&#32467;<code>functools.partial</code>&#30340;&#20316;&#29992;&#23601;&#26159;&#65292;&#25226;&#19968;&#20010;&#20989;&#25968;&#30340;&#26576;&#20123;&#21442;&#25968;&#32473;&#22266;&#23450;&#20303;&#65288;&#20063;&#23601;&#26159;&#35774;&#32622;&#40664;&#35748;&#20540;&#65289;&#65292;&#36820;&#22238;&#19968;&#20010;&#26032;&#30340;&#20989;&#25968;&#65292;&#35843;&#29992;&#36825;&#20010;&#26032;&#20989;&#25968;&#20250;&#26356;&#31616;&#21333;&#12290;</p>
<p>&#27880;&#24847;&#21040;&#19978;&#38754;&#30340;&#26032;&#30340;<code>int2</code>&#20989;&#25968;&#65292;&#20165;&#20165;&#26159;&#25226;<code>base</code>&#21442;&#25968;&#37325;&#26032;&#35774;&#23450;&#40664;&#35748;&#20540;&#20026;2&#65292;&#20294;&#20063;&#21487;&#20197;&#22312;&#20989;&#25968;&#35843;&#29992;&#26102;&#20256;&#20837;&#20854;&#20182;&#20540;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> int2(<span class="st">&#39;1000000&#39;</span>, base<span class="op">=</span><span class="dv">10</span>)
<span class="dv">1000000</span></code></pre></div>
<p>&#26368;&#21518;&#65292;&#21019;&#24314;&#20559;&#20989;&#25968;&#26102;&#65292;&#23454;&#38469;&#19978;&#21487;&#20197;&#25509;&#25910;&#20989;&#25968;&#23545;&#35937;&#12289;<code>*args</code>&#21644;<code>**kw</code>&#36825;3&#20010;&#21442;&#25968;&#65292;&#24403;&#20256;&#20837;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">int2 <span class="op">=</span> functools.partial(<span class="bu">int</span>, base<span class="op">=</span><span class="dv">2</span>)</code></pre></div>
<p>&#23454;&#38469;&#19978;&#22266;&#23450;&#20102;<code>int()</code>&#20989;&#25968;&#30340;&#20851;&#38190;&#23383;&#21442;&#25968;<code>base</code>&#65292;&#20063;&#23601;&#26159;&#65306;</p>
<pre><code>int2(&#39;10010&#39;)</code></pre>
<p>&#30456;&#24403;&#20110;&#65306;</p>
<pre><code>kw = { &#39;base&#39;: 2 }
int(&#39;10010&#39;, **kw)</code></pre>
<p>&#24403;&#20256;&#20837;&#65306;</p>
<p><code>max2 = functools.partial(max, 10)</code></p>
<p>&#23454;&#38469;&#19978;&#20250;&#25226;10&#20316;&#20026;<code>*args</code>&#30340;&#19968;&#37096;&#20998;&#33258;&#21160;&#21152;&#21040;&#24038;&#36793;&#65292;&#20063;&#23601;&#26159;&#65306;</p>
<p><code>max2(5, 6, 7)</code></p>
<p>&#30456;&#24403;&#20110;&#65306;</p>
<pre><code>args = (10, 5, 6, 7)
max(*args)</code></pre>
<p>&#32467;&#26524;&#20026;10&#12290;</p>
<h4 id="&#23567;&#32467;-6">&#23567;&#32467;</h4>
<p>&#24403;&#20989;&#25968;&#30340;&#21442;&#25968;&#20010;&#25968;&#22826;&#22810;&#65292;&#38656;&#35201;&#31616;&#21270;&#26102;&#65292;&#20351;&#29992;<code>functools.partial</code>&#21487;&#20197;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#20989;&#25968;&#65292;&#36825;&#20010;&#26032;&#20989;&#25968;&#21487;&#20197;&#22266;&#23450;&#20303;&#21407;&#20989;&#25968;&#30340;&#37096;&#20998;&#21442;&#25968;&#65292;&#20174;&#32780;&#22312;&#35843;&#29992;&#26102;&#26356;&#31616;&#21333;&#12290;</p>
</body>
</html>
