<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="book.css" type="text/css" />
</head>
<body>
<h2 id="io&#32534;&#31243;">12.IO&#32534;&#31243;</h2>
<p><code>IO</code>&#22312;&#35745;&#31639;&#26426;&#20013;&#25351;<code>Input/Output</code>&#65292;&#20063;&#23601;&#26159;&#36755;&#20837;&#21644;&#36755;&#20986;&#12290;&#30001;&#20110;&#31243;&#24207;&#21644;&#36816;&#34892;&#26102;&#25968;&#25454;&#26159;&#22312;&#20869;&#23384;&#20013;&#39547;&#30041;&#65292;&#30001;CPU&#36825;&#20010;&#36229;&#24555;&#30340;&#35745;&#31639;&#26680;&#24515;&#26469;&#25191;&#34892;&#65292;&#28041;&#21450;&#21040;&#25968;&#25454;&#20132;&#25442;&#30340;&#22320;&#26041;&#65292;&#36890;&#24120;&#26159;&#30913;&#30424;&#12289;&#32593;&#32476;&#31561;&#65292;&#23601;&#38656;&#35201;<code>IO</code>&#25509;&#21475;&#12290;</p>
<p>&#27604;&#22914;&#20320;&#25171;&#24320;&#27983;&#35272;&#22120;&#65292;&#35775;&#38382;&#26032;&#28010;&#39318;&#39029;&#65292;&#27983;&#35272;&#22120;&#36825;&#20010;&#31243;&#24207;&#23601;&#38656;&#35201;&#36890;&#36807;&#32593;&#32476;<code>IO</code>&#33719;&#21462;&#26032;&#28010;&#30340;&#32593;&#39029;&#12290;&#27983;&#35272;&#22120;&#39318;&#20808;&#20250;&#21457;&#36865;&#25968;&#25454;&#32473;&#26032;&#28010;&#26381;&#21153;&#22120;&#65292;&#21578;&#35785;&#23427;&#25105;&#24819;&#35201;&#39318;&#39029;&#30340;<code>HTML</code>&#65292;&#36825;&#20010;&#21160;&#20316;&#26159;&#24448;&#22806;&#21457;&#25968;&#25454;&#65292;&#21483;<code>Output</code>&#65292;&#38543;&#21518;&#26032;&#28010;&#26381;&#21153;&#22120;&#25226;&#32593;&#39029;&#21457;&#36807;&#26469;&#65292;&#36825;&#20010;&#21160;&#20316;&#26159;&#20174;&#22806;&#38754;&#25509;&#25910;&#25968;&#25454;&#65292;&#21483;<code>Input</code>&#12290;&#25152;&#20197;&#65292;&#36890;&#24120;&#65292;&#31243;&#24207;&#23436;&#25104;<code>IO</code>&#25805;&#20316;&#20250;&#26377;<code>Input</code>&#21644;<code>Output</code>&#20004;&#20010;&#25968;&#25454;&#27969;&#12290;&#24403;&#28982;&#20063;&#26377;&#21482;&#29992;&#19968;&#20010;&#30340;&#24773;&#20917;&#65292;&#27604;&#22914;&#65292;&#20174;&#30913;&#30424;&#35835;&#21462;&#25991;&#20214;&#21040;&#20869;&#23384;&#65292;&#23601;&#21482;&#26377;<code>Input</code>&#25805;&#20316;&#65292;&#21453;&#36807;&#26469;&#65292;&#25226;&#25968;&#25454;&#20889;&#21040;&#30913;&#30424;&#25991;&#20214;&#37324;&#65292;&#23601;&#21482;&#26159;&#19968;&#20010;<code>Output</code>&#25805;&#20316;&#12290;</p>
<p><code>IO</code>&#32534;&#31243;&#20013;&#65292;<code>Stream</code>&#65288;&#27969;&#65289;&#26159;&#19968;&#20010;&#24456;&#37325;&#35201;&#30340;&#27010;&#24565;&#65292;&#21487;&#20197;&#25226;&#27969;&#24819;&#35937;&#25104;&#19968;&#20010;&#27700;&#31649;&#65292;&#25968;&#25454;&#23601;&#26159;&#27700;&#31649;&#37324;&#30340;&#27700;&#65292;&#20294;&#26159;&#21482;&#33021;&#21333;&#21521;&#27969;&#21160;&#12290;<code>Input Stream</code>&#23601;&#26159;&#25968;&#25454;&#20174;&#22806;&#38754;&#65288;&#30913;&#30424;&#12289;&#32593;&#32476;&#65289;&#27969;&#36827;&#20869;&#23384;&#65292;<code>Output Stream</code>&#23601;&#26159;&#25968;&#25454;&#20174;&#20869;&#23384;&#27969;&#21040;&#22806;&#38754;&#21435;&#12290;&#23545;&#20110;&#27983;&#35272;&#32593;&#39029;&#26469;&#35828;&#65292;&#27983;&#35272;&#22120;&#21644;&#26032;&#28010;&#26381;&#21153;&#22120;&#20043;&#38388;&#33267;&#23569;&#38656;&#35201;&#24314;&#31435;&#20004;&#26681;&#27700;&#31649;&#65292;&#25165;&#21487;&#20197;&#26082;&#33021;&#21457;&#25968;&#25454;&#65292;&#21448;&#33021;&#25910;&#25968;&#25454;&#12290;</p>
<p>&#30001;&#20110;CPU&#21644;&#20869;&#23384;&#30340;&#36895;&#24230;&#36828;&#36828;&#39640;&#20110;&#22806;&#35774;&#30340;&#36895;&#24230;&#65292;&#25152;&#20197;&#65292;&#22312;<code>IO</code>&#32534;&#31243;&#20013;&#65292;&#23601;&#23384;&#22312;&#36895;&#24230;&#20005;&#37325;&#19981;&#21305;&#37197;&#30340;&#38382;&#39064;&#12290;&#20030;&#20010;&#20363;&#23376;&#26469;&#35828;&#65292;&#27604;&#22914;&#35201;&#25226;100M&#30340;&#25968;&#25454;&#20889;&#20837;&#30913;&#30424;&#65292;CPU&#36755;&#20986;100M&#30340;&#25968;&#25454;&#21482;&#38656;&#35201;0.01&#31186;&#65292;&#21487;&#26159;&#30913;&#30424;&#35201;&#25509;&#25910;&#36825;100M&#25968;&#25454;&#21487;&#33021;&#38656;&#35201;10&#31186;&#65292;&#24590;&#20040;&#21150;&#21602;&#65311;&#26377;&#20004;&#31181;&#21150;&#27861;&#65306;</p>
<p>&#31532;&#19968;&#31181;&#26159;CPU&#31561;&#30528;&#65292;&#20063;&#23601;&#26159;&#31243;&#24207;&#26242;&#20572;&#25191;&#34892;&#21518;&#32493;&#20195;&#30721;&#65292;&#31561;100M&#30340;&#25968;&#25454;&#22312;10&#31186;&#21518;&#20889;&#20837;&#30913;&#30424;&#65292;&#20877;&#25509;&#30528;&#24448;&#19979;&#25191;&#34892;&#65292;&#36825;&#31181;&#27169;&#24335;&#31216;&#20026;<code>&#21516;&#27493;IO</code>&#65307;</p>
<p>&#21478;&#19968;&#31181;&#26041;&#27861;&#26159;CPU&#19981;&#31561;&#24453;&#65292;&#21482;&#26159;&#21578;&#35785;&#30913;&#30424;&#65292;&#8220;&#24744;&#32769;&#24930;&#24930;&#20889;&#65292;&#19981;&#30528;&#24613;&#65292;&#25105;&#25509;&#30528;&#24178;&#21035;&#30340;&#20107;&#21435;&#20102;&#8221;&#65292;&#20110;&#26159;&#65292;&#21518;&#32493;&#20195;&#30721;&#21487;&#20197;&#31435;&#21051;&#25509;&#30528;&#25191;&#34892;&#65292;&#36825;&#31181;&#27169;&#24335;&#31216;&#20026;<code>&#24322;&#27493;IO</code>&#12290;</p>
<p>&#21516;&#27493;&#21644;&#24322;&#27493;&#30340;&#21306;&#21035;&#23601;&#22312;&#20110;&#26159;&#21542;&#31561;&#24453;IO&#25191;&#34892;&#30340;&#32467;&#26524;&#12290;&#22909;&#27604;&#20320;&#21435;&#40614;&#24403;&#21171;&#28857;&#39184;&#65292;&#20320;&#35828;&#8220;&#26469;&#20010;&#27721;&#22561;&#8221;&#65292;&#26381;&#21153;&#21592;&#21578;&#35785;&#20320;&#65292;&#23545;&#19981;&#36215;&#65292;&#27721;&#22561;&#35201;&#29616;&#20570;&#65292;&#38656;&#35201;&#31561;5&#20998;&#38047;&#65292;&#20110;&#26159;&#20320;&#31449;&#22312;&#25910;&#38134;&#21488;&#21069;&#38754;&#31561;&#20102;5&#20998;&#38047;&#65292;&#25343;&#21040;&#27721;&#22561;&#20877;&#21435;&#36891;&#21830;&#22330;&#65292;&#36825;&#26159;<code>&#21516;&#27493;IO</code>&#12290;</p>
<p>&#20320;&#35828;&#8220;&#26469;&#20010;&#27721;&#22561;&#8221;&#65292;&#26381;&#21153;&#21592;&#21578;&#35785;&#20320;&#65292;&#27721;&#22561;&#38656;&#35201;&#31561;5&#20998;&#38047;&#65292;&#20320;&#21487;&#20197;&#20808;&#21435;&#36891;&#21830;&#22330;&#65292;&#31561;&#20570;&#22909;&#20102;&#65292;&#25105;&#20204;&#20877;&#36890;&#30693;&#20320;&#65292;&#36825;&#26679;&#20320;&#21487;&#20197;&#31435;&#21051;&#21435;&#24178;&#21035;&#30340;&#20107;&#24773;&#65288;&#36891;&#21830;&#22330;&#65289;&#65292;&#36825;&#26159;<code>&#24322;&#27493;IO</code>&#12290;</p>
<p>&#24456;&#26126;&#26174;&#65292;&#20351;&#29992;<code>&#24322;&#27493;IO</code>&#26469;&#32534;&#20889;&#31243;&#24207;&#24615;&#33021;&#20250;&#36828;&#36828;&#39640;&#20110;<code>&#21516;&#27493;IO</code>&#65292;&#20294;&#26159;<code>&#24322;&#27493;IO</code>&#30340;&#32570;&#28857;&#26159;&#32534;&#31243;&#27169;&#22411;&#22797;&#26434;&#12290;&#24819;&#24819;&#30475;&#65292;&#20320;&#24471;&#30693;&#36947;&#20160;&#20040;&#26102;&#20505;&#36890;&#30693;&#20320;&#8220;&#27721;&#22561;&#20570;&#22909;&#20102;&#8221;&#65292;&#32780;&#36890;&#30693;&#20320;&#30340;&#26041;&#27861;&#20063;&#21508;&#19981;&#30456;&#21516;&#12290;&#22914;&#26524;&#26159;&#26381;&#21153;&#21592;&#36305;&#36807;&#26469;&#25214;&#21040;&#20320;&#65292;&#36825;&#26159;&#22238;&#35843;&#27169;&#24335;&#65292;&#22914;&#26524;&#26381;&#21153;&#21592;&#21457;&#30701;&#20449;&#36890;&#30693;&#20320;&#65292;&#20320;&#23601;&#24471;&#19981;&#20572;&#22320;&#26816;&#26597;&#25163;&#26426;&#65292;&#36825;&#26159;&#36718;&#35810;&#27169;&#24335;&#12290;&#24635;&#20043;&#65292;<code>&#24322;&#27493;IO</code>&#30340;&#22797;&#26434;&#24230;&#36828;&#36828;&#39640;&#20110;<code>&#21516;&#27493;IO</code>&#12290;</p>
<p>&#25805;&#20316;<code>IO</code>&#30340;&#33021;&#21147;&#37117;&#26159;&#30001;&#25805;&#20316;&#31995;&#32479;&#25552;&#20379;&#30340;&#65292;&#27599;&#19968;&#31181;&#32534;&#31243;&#35821;&#35328;&#37117;&#20250;&#25226;&#25805;&#20316;&#31995;&#32479;&#25552;&#20379;&#30340;&#20302;&#32423;C&#25509;&#21475;&#23553;&#35013;&#36215;&#26469;&#26041;&#20415;&#20351;&#29992;&#65292;Python&#20063;&#19981;&#20363;&#22806;&#12290;&#25105;&#20204;&#21518;&#38754;&#20250;&#35814;&#32454;&#35752;&#35770;Python&#30340;<code>IO</code>&#32534;&#31243;&#25509;&#21475;&#12290;</p>
<p>&#27880;&#24847;&#65292;&#26412;&#31456;&#30340;<code>IO</code>&#32534;&#31243;&#37117;&#26159;&#21516;&#27493;&#27169;&#24335;&#65292;&#24322;&#27493;<code>IO</code>&#30001;&#20110;&#22797;&#26434;&#24230;&#22826;&#39640;&#65292;&#21518;&#32493;&#28041;&#21450;&#21040;&#26381;&#21153;&#22120;&#31471;&#31243;&#24207;&#24320;&#21457;&#26102;&#25105;&#20204;&#20877;&#35752;&#35770;&#12290;</p>
<h3 id="&#25991;&#20214;&#35835;&#20889;">12.1 &#25991;&#20214;&#35835;&#20889;</h3>
<p>&#35835;&#20889;&#25991;&#20214;&#26159;&#26368;&#24120;&#35265;&#30340;<code>IO</code>&#25805;&#20316;&#12290;Python&#20869;&#32622;&#20102;&#35835;&#20889;&#25991;&#20214;&#30340;&#20989;&#25968;&#65292;&#29992;&#27861;&#21644;C&#26159;&#20860;&#23481;&#30340;&#12290;</p>
<p>&#35835;&#20889;&#25991;&#20214;&#21069;&#65292;&#25105;&#20204;&#20808;&#24517;&#39035;&#20102;&#35299;&#19968;&#19979;&#65292;&#22312;&#30913;&#30424;&#19978;&#35835;&#20889;&#25991;&#20214;&#30340;&#21151;&#33021;&#37117;&#26159;&#30001;&#25805;&#20316;&#31995;&#32479;&#25552;&#20379;&#30340;&#65292;&#29616;&#20195;&#25805;&#20316;&#31995;&#32479;&#19981;&#20801;&#35768;&#26222;&#36890;&#30340;&#31243;&#24207;&#30452;&#25509;&#25805;&#20316;&#30913;&#30424;&#65292;&#25152;&#20197;&#65292;&#35835;&#20889;&#25991;&#20214;&#23601;&#26159;&#35831;&#27714;&#25805;&#20316;&#31995;&#32479;&#25171;&#24320;&#19968;&#20010;&#25991;&#20214;&#23545;&#35937;&#65288;&#36890;&#24120;&#31216;&#20026;&#25991;&#20214;&#25551;&#36848;&#31526;&#65289;&#65292;&#28982;&#21518;&#65292;&#36890;&#36807;&#25805;&#20316;&#31995;&#32479;&#25552;&#20379;&#30340;&#25509;&#21475;&#20174;&#36825;&#20010;&#25991;&#20214;&#23545;&#35937;&#20013;&#35835;&#21462;&#25968;&#25454;&#65288;&#35835;&#25991;&#20214;&#65289;&#65292;&#25110;&#32773;&#25226;&#25968;&#25454;&#20889;&#20837;&#36825;&#20010;&#25991;&#20214;&#23545;&#35937;&#65288;&#20889;&#25991;&#20214;&#65289;&#12290;</p>
<h4 id="&#35835;&#25991;&#20214;">&#35835;&#25991;&#20214;</h4>
<p>&#35201;&#20197;&#35835;&#25991;&#20214;&#30340;&#27169;&#24335;&#25171;&#24320;&#19968;&#20010;&#25991;&#20214;&#23545;&#35937;&#65292;&#20351;&#29992;Python&#20869;&#32622;&#30340;<code>open()</code>&#20989;&#25968;&#65292;&#20256;&#20837;&#25991;&#20214;&#21517;&#21644;&#26631;&#31034;&#31526;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;/Users/michael/test.txt&#39;</span>, <span class="st">&#39;r&#39;</span>)</code></pre></div>
<p>&#26631;&#31034;&#31526;<code>'r'</code>&#34920;&#31034;&#35835;&#65292;&#36825;&#26679;&#65292;&#25105;&#20204;&#23601;&#25104;&#21151;&#22320;&#25171;&#24320;&#20102;&#19968;&#20010;&#25991;&#20214;&#12290;</p>
<p>&#22914;&#26524;&#25991;&#20214;&#19981;&#23384;&#22312;&#65292;<code>open()</code>&#20989;&#25968;&#23601;&#20250;&#25243;&#20986;&#19968;&#20010;<code>IOError</code>&#30340;&#38169;&#35823;&#65292;&#24182;&#19988;&#32473;&#20986;&#38169;&#35823;&#30721;&#21644;&#35814;&#32454;&#30340;&#20449;&#24687;&#21578;&#35785;&#20320;&#25991;&#20214;&#19981;&#23384;&#22312;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f<span class="op">=</span><span class="bu">open</span>(<span class="st">&#39;/Users/michael/notfound.txt&#39;</span>, <span class="st">&#39;r&#39;</span>)
Traceback (most recent call last):
  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="op">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span>
<span class="pp">FileNotFoundError</span>: [Errno <span class="dv">2</span>] No such <span class="bu">file</span> <span class="op">or</span> directory: <span class="st">&#39;/Users/michael/notfound.txt&#39;</span></code></pre></div>
<p>&#22914;&#26524;&#25991;&#20214;&#25171;&#24320;&#25104;&#21151;&#65292;&#25509;&#19979;&#26469;&#65292;&#35843;&#29992;<code>read()</code>&#26041;&#27861;&#21487;&#20197;&#19968;&#27425;&#35835;&#21462;&#25991;&#20214;&#30340;&#20840;&#37096;&#20869;&#23481;&#65292;Python&#25226;&#20869;&#23481;&#35835;&#21040;&#20869;&#23384;&#65292;&#29992;&#19968;&#20010;<code>str</code>&#23545;&#35937;&#34920;&#31034;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f.read()
<span class="co">&#39;Hello, world!&#39;</span></code></pre></div>
<p>&#26368;&#21518;&#19968;&#27493;&#26159;&#35843;&#29992;<code>close()</code>&#26041;&#27861;&#20851;&#38381;&#25991;&#20214;&#12290;&#25991;&#20214;&#20351;&#29992;&#23436;&#27605;&#21518;&#24517;&#39035;&#20851;&#38381;&#65292;&#22240;&#20026;&#25991;&#20214;&#23545;&#35937;&#20250;&#21344;&#29992;&#25805;&#20316;&#31995;&#32479;&#30340;&#36164;&#28304;&#65292;&#24182;&#19988;&#25805;&#20316;&#31995;&#32479;&#21516;&#19968;&#26102;&#38388;&#33021;&#25171;&#24320;&#30340;&#25991;&#20214;&#25968;&#37327;&#20063;&#26159;&#26377;&#38480;&#30340;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f.close()</code></pre></div>
<p>&#30001;&#20110;&#25991;&#20214;&#35835;&#20889;&#26102;&#37117;&#26377;&#21487;&#33021;&#20135;&#29983;<code>IOError</code>&#65292;&#19968;&#26086;&#20986;&#38169;&#65292;&#21518;&#38754;&#30340;<code>f.close()</code>&#23601;&#19981;&#20250;&#35843;&#29992;&#12290;&#25152;&#20197;&#65292;&#20026;&#20102;&#20445;&#35777;&#26080;&#35770;&#26159;&#21542;&#20986;&#38169;&#37117;&#33021;&#27491;&#30830;&#22320;&#20851;&#38381;&#25991;&#20214;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;<code>try ... finally</code>&#26469;&#23454;&#29616;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>:
    f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;/path/to/file&#39;</span>, <span class="st">&#39;r&#39;</span>)
    <span class="bu">print</span>(f.read())
<span class="cf">finally</span>:
    <span class="cf">if</span> f:
        f.close()</code></pre></div>
<p>&#20294;&#26159;&#27599;&#27425;&#37117;&#36825;&#20040;&#20889;&#23454;&#22312;&#22826;&#32321;&#29712;&#65292;&#25152;&#20197;&#65292;Python&#24341;&#20837;&#20102;<code>with</code>&#35821;&#21477;&#26469;&#33258;&#21160;&#24110;&#25105;&#20204;&#35843;&#29992;<code>close()</code>&#26041;&#27861;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;/path/to/file&#39;</span>, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> f:
    <span class="bu">print</span>(f.read())</code></pre></div>
<p>&#36825;&#21644;&#21069;&#38754;&#30340;<code>try ... finally</code>&#26159;&#19968;&#26679;&#30340;&#65292;&#20294;&#26159;&#20195;&#30721;&#26356;&#20339;&#31616;&#27905;&#65292;&#24182;&#19988;&#19981;&#24517;&#35843;&#29992;<code>f.close()</code>&#26041;&#27861;&#12290;</p>
<p>&#35843;&#29992;<code>read()</code>&#20250;&#19968;&#27425;&#24615;&#35835;&#21462;&#25991;&#20214;&#30340;&#20840;&#37096;&#20869;&#23481;&#65292;&#22914;&#26524;&#25991;&#20214;&#26377;10G&#65292;&#20869;&#23384;&#23601;&#29190;&#20102;&#65292;&#25152;&#20197;&#65292;&#35201;&#20445;&#38505;&#36215;&#35265;&#65292;&#21487;&#20197;&#21453;&#22797;&#35843;&#29992;<code>read(size)</code>&#26041;&#27861;&#65292;&#27599;&#27425;&#26368;&#22810;&#35835;&#21462;<code>size</code>&#20010;&#23383;&#33410;&#30340;&#20869;&#23481;&#12290;&#21478;&#22806;&#65292;&#35843;&#29992;<code>readline()</code>&#21487;&#20197;&#27599;&#27425;&#35835;&#21462;&#19968;&#34892;&#20869;&#23481;&#65292;&#35843;&#29992;<code>readlines()</code>&#19968;&#27425;&#35835;&#21462;&#25152;&#26377;&#20869;&#23481;&#24182;&#25353;&#34892;&#36820;&#22238;<code>list</code>&#12290;&#22240;&#27492;&#65292;&#35201;&#26681;&#25454;&#38656;&#35201;&#20915;&#23450;&#24590;&#20040;&#35843;&#29992;&#12290;</p>
<p>&#22914;&#26524;&#25991;&#20214;&#24456;&#23567;&#65292;<code>read()</code>&#19968;&#27425;&#24615;&#35835;&#21462;&#26368;&#26041;&#20415;&#65307;&#22914;&#26524;&#19981;&#33021;&#30830;&#23450;&#25991;&#20214;&#22823;&#23567;&#65292;&#21453;&#22797;&#35843;&#29992;<code>read(size)</code>&#27604;&#36739;&#20445;&#38505;&#65307;&#22914;&#26524;&#26159;&#37197;&#32622;&#25991;&#20214;&#65292;&#35843;&#29992;<code>readlines()</code>&#26368;&#26041;&#20415;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> line <span class="op">in</span> f.readlines():
    <span class="bu">print</span>(line.strip()) <span class="co"># &#25226;&#26411;&#23614;&#30340;&#39;\n&#39;&#21024;&#25481;</span></code></pre></div>
<h4 id="file-like-object">file-like Object</h4>
<p>&#20687;<code>open()</code>&#20989;&#25968;&#36820;&#22238;&#30340;&#36825;&#31181;&#26377;&#20010;<code>read()</code>&#26041;&#27861;&#30340;&#23545;&#35937;&#65292;&#22312;Python&#20013;&#32479;&#31216;&#20026;<code>file-like Object</code>&#12290;&#38500;&#20102;<code>file</code>&#22806;&#65292;&#36824;&#21487;&#20197;&#26159;&#20869;&#23384;&#30340;&#23383;&#33410;&#27969;&#65292;&#32593;&#32476;&#27969;&#65292;&#33258;&#23450;&#20041;&#27969;&#31561;&#31561;&#12290;<code>file-like Object</code>&#19981;&#35201;&#27714;&#20174;&#29305;&#23450;&#31867;&#32487;&#25215;&#65292;&#21482;&#35201;&#20889;&#20010;<code>read()</code>&#26041;&#27861;&#23601;&#34892;&#12290;</p>
<p><code>StringIO</code>&#23601;&#26159;&#22312;&#20869;&#23384;&#20013;&#21019;&#24314;&#30340;<code>file-like Object</code>&#65292;&#24120;&#29992;&#20316;&#20020;&#26102;&#32531;&#20914;&#12290;</p>
<h4 id="&#20108;&#36827;&#21046;&#25991;&#20214;">&#20108;&#36827;&#21046;&#25991;&#20214;</h4>
<p>&#21069;&#38754;&#35762;&#30340;&#40664;&#35748;&#37117;&#26159;&#35835;&#21462;&#25991;&#26412;&#25991;&#20214;&#65292;&#24182;&#19988;&#26159;<code>UTF-8</code>&#32534;&#30721;&#30340;&#25991;&#26412;&#25991;&#20214;&#12290;&#35201;&#35835;&#21462;&#20108;&#36827;&#21046;&#25991;&#20214;&#65292;&#27604;&#22914;&#22270;&#29255;&#12289;&#35270;&#39057;&#31561;&#31561;&#65292;&#29992;<code>'rb'</code>&#27169;&#24335;&#25171;&#24320;&#25991;&#20214;&#21363;&#21487;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;/Users/michael/test.jpg&#39;</span>, <span class="st">&#39;rb&#39;</span>)
<span class="op">&gt;&gt;&gt;</span> f.read()
b<span class="st">&#39;</span><span class="ch">\xff\xd8\xff\xe1\x00\x18E</span><span class="st">xif</span><span class="ch">\x00\x00</span><span class="st">...&#39;</span> <span class="co"># &#21313;&#20845;&#36827;&#21046;&#34920;&#31034;&#30340;&#23383;&#33410;</span></code></pre></div>
<h4 id="&#23383;&#31526;&#32534;&#30721;">&#23383;&#31526;&#32534;&#30721;</h4>
<p>&#35201;&#35835;&#21462;&#38750;<code>UTF-8</code>&#32534;&#30721;&#30340;&#25991;&#26412;&#25991;&#20214;&#65292;&#38656;&#35201;&#32473;<code>open()</code>&#20989;&#25968;&#20256;&#20837;<code>encoding</code>&#21442;&#25968;&#65292;&#20363;&#22914;&#65292;&#35835;&#21462;GBK&#32534;&#30721;&#30340;&#25991;&#20214;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;/Users/michael/gbk.txt&#39;</span>, <span class="st">&#39;r&#39;</span>, encoding<span class="op">=</span><span class="st">&#39;gbk&#39;</span>)
<span class="op">&gt;&gt;&gt;</span> f.read()

<span class="co">&#39;&#27979;&#35797;&#39;</span></code></pre></div>
<p>&#36935;&#21040;&#26377;&#20123;&#32534;&#30721;&#19981;&#35268;&#33539;&#30340;&#25991;&#20214;&#65292;&#20320;&#21487;&#33021;&#20250;&#36935;&#21040;<code>UnicodeDecodeError</code>&#65292;&#22240;&#20026;&#22312;&#25991;&#26412;&#25991;&#20214;&#20013;&#21487;&#33021;&#22841;&#26434;&#20102;&#19968;&#20123;&#38750;&#27861;&#32534;&#30721;&#30340;&#23383;&#31526;&#12290;&#36935;&#21040;&#36825;&#31181;&#24773;&#20917;&#65292;<code>open()</code>&#20989;&#25968;&#36824;&#25509;&#25910;&#19968;&#20010;<code>errors</code>&#21442;&#25968;&#65292;&#34920;&#31034;&#22914;&#26524;&#36935;&#21040;&#32534;&#30721;&#38169;&#35823;&#21518;&#22914;&#20309;&#22788;&#29702;&#12290;&#26368;&#31616;&#21333;&#30340;&#26041;&#24335;&#26159;&#30452;&#25509;&#24573;&#30053;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;/Users/michael/gbk.txt&#39;</span>, <span class="st">&#39;r&#39;</span>, encoding<span class="op">=</span><span class="st">&#39;gbk&#39;</span>, errors<span class="op">=</span><span class="st">&#39;ignore&#39;</span>)</code></pre></div>
<h4 id="&#20889;&#25991;&#20214;">&#20889;&#25991;&#20214;</h4>
<p>&#20889;&#25991;&#20214;&#21644;&#35835;&#25991;&#20214;&#26159;&#19968;&#26679;&#30340;&#65292;&#21807;&#19968;&#21306;&#21035;&#26159;&#35843;&#29992;<code>open()</code>&#20989;&#25968;&#26102;&#65292;&#20256;&#20837;&#26631;&#35782;&#31526;<code>'w'</code>&#25110;&#32773;<code>'wb'</code>&#34920;&#31034;&#20889;&#25991;&#26412;&#25991;&#20214;&#25110;&#20889;&#20108;&#36827;&#21046;&#25991;&#20214;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;/Users/michael/test.txt&#39;</span>, <span class="st">&#39;w&#39;</span>)
<span class="op">&gt;&gt;&gt;</span> f.write(<span class="st">&#39;Hello, world!&#39;</span>)
<span class="op">&gt;&gt;&gt;</span> f.close()</code></pre></div>
<p>&#20320;&#21487;&#20197;&#21453;&#22797;&#35843;&#29992;<code>write()</code>&#26469;&#20889;&#20837;&#25991;&#20214;&#65292;&#20294;&#26159;&#21153;&#24517;&#35201;&#35843;&#29992;<code>f.close()</code>&#26469;&#20851;&#38381;&#25991;&#20214;&#12290;&#24403;&#25105;&#20204;&#20889;&#25991;&#20214;&#26102;&#65292;&#25805;&#20316;&#31995;&#32479;&#24448;&#24448;&#19981;&#20250;&#31435;&#21051;&#25226;&#25968;&#25454;&#20889;&#20837;&#30913;&#30424;&#65292;&#32780;&#26159;&#25918;&#21040;&#20869;&#23384;&#32531;&#23384;&#36215;&#26469;&#65292;&#31354;&#38386;&#30340;&#26102;&#20505;&#20877;&#24930;&#24930;&#20889;&#20837;&#12290;&#21482;&#26377;&#35843;&#29992;<code>close()</code>&#26041;&#27861;&#26102;&#65292;&#25805;&#20316;&#31995;&#32479;&#25165;&#20445;&#35777;&#25226;&#27809;&#26377;&#20889;&#20837;&#30340;&#25968;&#25454;&#20840;&#37096;&#20889;&#20837;&#30913;&#30424;&#12290;&#24536;&#35760;&#35843;&#29992;<code>close()</code>&#30340;&#21518;&#26524;&#26159;&#25968;&#25454;&#21487;&#33021;&#21482;&#20889;&#20102;&#19968;&#37096;&#20998;&#21040;&#30913;&#30424;&#65292;&#21097;&#19979;&#30340;&#20002;&#22833;&#20102;&#12290;&#25152;&#20197;&#65292;&#36824;&#26159;&#29992;<code>with</code>&#35821;&#21477;&#26469;&#24471;&#20445;&#38505;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;/Users/michael/test.txt&#39;</span>, <span class="st">&#39;w&#39;</span>) <span class="im">as</span> f:
    f.write(<span class="st">&#39;Hello, world!&#39;</span>)</code></pre></div>
<p>&#35201;&#20889;&#20837;&#29305;&#23450;&#32534;&#30721;&#30340;&#25991;&#26412;&#25991;&#20214;&#65292;&#35831;&#32473;<code>open()</code>&#20989;&#25968;&#20256;&#20837;<code>encoding</code>&#21442;&#25968;&#65292;&#23558;&#23383;&#31526;&#20018;&#33258;&#21160;&#36716;&#25442;&#25104;&#25351;&#23450;&#32534;&#30721;&#12290;</p>
<h4 id="&#23567;&#32467;">&#23567;&#32467;</h4>
<p>&#22312;Python&#20013;&#65292;&#25991;&#20214;&#35835;&#20889;&#26159;&#36890;&#36807;<code>open()</code>&#20989;&#25968;&#25171;&#24320;&#30340;&#25991;&#20214;&#23545;&#35937;&#23436;&#25104;&#30340;&#12290;&#20351;&#29992;<code>with</code>&#35821;&#21477;&#25805;&#20316;&#25991;&#20214;<code>IO</code>&#26159;&#20010;&#22909;&#20064;&#24815;&#12290;</p>
<h3 id="stringio&#21644;bytesio">12.2 StringIO&#21644;BytesIO</h3>
<h4 id="stringio">StringIO</h4>
<p>&#24456;&#22810;&#26102;&#20505;&#65292;&#25968;&#25454;&#35835;&#20889;&#19981;&#19968;&#23450;&#26159;&#25991;&#20214;&#65292;&#20063;&#21487;&#20197;&#22312;&#20869;&#23384;&#20013;&#35835;&#20889;&#12290;</p>
<p><code>StringIO</code>&#39038;&#21517;&#24605;&#20041;&#23601;&#26159;&#22312;&#20869;&#23384;&#20013;&#35835;&#20889;<code>str</code>&#12290;</p>
<p>&#35201;&#25226;<code>str</code>&#20889;&#20837;<code>StringIO</code>&#65292;&#25105;&#20204;&#38656;&#35201;&#20808;&#21019;&#24314;&#19968;&#20010;<code>StringIO</code>&#65292;&#28982;&#21518;&#65292;&#20687;&#25991;&#20214;&#19968;&#26679;&#20889;&#20837;&#21363;&#21487;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> io <span class="im">import</span> StringIO
<span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> StringIO()
<span class="op">&gt;&gt;&gt;</span> f.write(<span class="st">&#39;hello&#39;</span>)
<span class="dv">5</span>
<span class="op">&gt;&gt;&gt;</span> f.write(<span class="st">&#39; &#39;</span>)
<span class="dv">1</span>
<span class="op">&gt;&gt;&gt;</span> f.write(<span class="st">&#39;world!&#39;</span>)
<span class="dv">6</span>
<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(f.getvalue())
hello world<span class="op">!</span>
getvalue()&#26041;&#27861;&#29992;&#20110;&#33719;&#24471;&#20889;&#20837;&#21518;&#30340;str&#12290;</code></pre></div>
<p>&#35201;&#35835;&#21462;<code>StringIO</code>&#65292;&#21487;&#20197;&#29992;&#19968;&#20010;<code>str</code>&#21021;&#22987;&#21270;<code>StringIO</code>&#65292;&#28982;&#21518;&#65292;&#20687;&#35835;&#25991;&#20214;&#19968;&#26679;&#35835;&#21462;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> io <span class="im">import</span> StringIO
<span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> StringIO(<span class="st">&#39;Hello!</span><span class="ch">\n</span><span class="st">Hi!</span><span class="ch">\n</span><span class="st">Goodbye!&#39;</span>)
<span class="op">&gt;&gt;&gt;</span> <span class="cf">while</span> <span class="va">True</span>:
...     s <span class="op">=</span> f.readline()
...     <span class="cf">if</span> s <span class="op">==</span> <span class="st">&#39;&#39;</span>:
...         <span class="cf">break</span>
...     <span class="bu">print</span>(s.strip())
...
Hello<span class="op">!</span>
Hi<span class="op">!</span>
Goodbye<span class="op">!</span>
BytesIO</code></pre></div>
<p><code>StringIO</code>&#25805;&#20316;&#30340;&#21482;&#33021;&#26159;<code>str</code>&#65292;&#22914;&#26524;&#35201;&#25805;&#20316;&#20108;&#36827;&#21046;&#25968;&#25454;&#65292;&#23601;&#38656;&#35201;&#20351;&#29992;<code>BytesIO</code>&#12290;</p>
<p><code>BytesIO</code>&#23454;&#29616;&#20102;&#22312;&#20869;&#23384;&#20013;&#35835;&#20889;<code>bytes</code>&#65292;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;<code>BytesIO</code>&#65292;&#28982;&#21518;&#20889;&#20837;&#19968;&#20123;<code>bytes</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> io <span class="im">import</span> BytesIO
<span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> BytesIO()
<span class="op">&gt;&gt;&gt;</span> f.write(<span class="st">&#39;&#20013;&#25991;&#39;</span>.encode(<span class="st">&#39;utf-8&#39;</span>))
<span class="dv">6</span>
<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(f.getvalue())
b<span class="st">&#39;</span><span class="ch">\xe4\xb8\xad\xe6\x96\x87</span><span class="st">&#39;</span></code></pre></div>
<p>&#35831;&#27880;&#24847;&#65292;&#20889;&#20837;&#30340;&#19981;&#26159;<code>str</code>&#65292;&#32780;&#26159;&#32463;&#36807;<code>UTF-8</code>&#32534;&#30721;&#30340;<code>bytes</code>&#12290;</p>
<p>&#21644;<code>StringIO</code>&#31867;&#20284;&#65292;&#21487;&#20197;&#29992;&#19968;&#20010;<code>bytes</code>&#21021;&#22987;&#21270;<code>BytesIO</code>&#65292;&#28982;&#21518;&#65292;&#20687;&#35835;&#25991;&#20214;&#19968;&#26679;&#35835;&#21462;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> io <span class="im">import</span> StringIO
<span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> BytesIO(b<span class="st">&#39;</span><span class="ch">\xe4\xb8\xad\xe6\x96\x87</span><span class="st">&#39;</span>)
<span class="op">&gt;&gt;&gt;</span> f.read()
b<span class="st">&#39;</span><span class="ch">\xe4\xb8\xad\xe6\x96\x87</span><span class="st">&#39;</span></code></pre></div>
<h4 id="&#23567;&#32467;-1">&#23567;&#32467;</h4>
<p><code>StringIO</code>&#21644;<code>BytesIO</code>&#26159;&#22312;&#20869;&#23384;&#20013;&#25805;&#20316;<code>str</code>&#21644;<code>bytes</code>&#30340;&#26041;&#27861;&#65292;&#20351;&#24471;&#21644;&#35835;&#20889;&#25991;&#20214;&#20855;&#26377;&#19968;&#33268;&#30340;&#25509;&#21475;&#12290;</p>
<h3 id="&#25805;&#20316;&#25991;&#20214;&#21644;&#30446;&#24405;">12.3 &#25805;&#20316;&#25991;&#20214;&#21644;&#30446;&#24405;</h3>
<p>&#22914;&#26524;&#25105;&#20204;&#35201;&#25805;&#20316;&#25991;&#20214;&#12289;&#30446;&#24405;&#65292;&#21487;&#20197;&#22312;&#21629;&#20196;&#34892;&#19979;&#38754;&#36755;&#20837;&#25805;&#20316;&#31995;&#32479;&#25552;&#20379;&#30340;&#21508;&#31181;&#21629;&#20196;&#26469;&#23436;&#25104;&#12290;&#27604;&#22914;<code>dir&#12289;cp</code>&#31561;&#21629;&#20196;&#12290;</p>
<p>&#22914;&#26524;&#35201;&#22312;Python&#31243;&#24207;&#20013;&#25191;&#34892;&#36825;&#20123;&#30446;&#24405;&#21644;&#25991;&#20214;&#30340;&#25805;&#20316;&#24590;&#20040;&#21150;&#65311;&#20854;&#23454;&#25805;&#20316;&#31995;&#32479;&#25552;&#20379;&#30340;&#21629;&#20196;&#21482;&#26159;&#31616;&#21333;&#22320;&#35843;&#29992;&#20102;&#25805;&#20316;&#31995;&#32479;&#25552;&#20379;&#30340;&#25509;&#21475;&#20989;&#25968;&#65292;Python&#20869;&#32622;&#30340;<code>os</code>&#27169;&#22359;&#20063;&#21487;&#20197;&#30452;&#25509;&#35843;&#29992;&#25805;&#20316;&#31995;&#32479;&#25552;&#20379;&#30340;&#25509;&#21475;&#20989;&#25968;&#12290;</p>
<p>&#25171;&#24320;Python&#20132;&#20114;&#24335;&#21629;&#20196;&#34892;&#65292;&#25105;&#20204;&#26469;&#30475;&#30475;&#22914;&#20309;&#20351;&#29992;os&#27169;&#22359;&#30340;&#22522;&#26412;&#21151;&#33021;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> os
<span class="op">&gt;&gt;&gt;</span> os.name <span class="co"># &#25805;&#20316;&#31995;&#32479;&#31867;&#22411;</span>
<span class="co">&#39;posix&#39;</span></code></pre></div>
<p>&#22914;&#26524;&#26159;<code>posix</code>&#65292;&#35828;&#26126;&#31995;&#32479;&#26159;<code>Linux</code>&#12289;<code>Unix</code>&#25110;<code>Mac OS X</code>&#65292;&#22914;&#26524;&#26159;<code>nt</code>&#65292;&#23601;&#26159;<code>Windows</code>&#31995;&#32479;&#12290;</p>
<p>&#35201;&#33719;&#21462;&#35814;&#32454;&#30340;&#31995;&#32479;&#20449;&#24687;&#65292;&#21487;&#20197;&#35843;&#29992;<code>uname()</code>&#20989;&#25968;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> os.uname()
posix.uname_result(sysname<span class="op">=</span><span class="st">&#39;Darwin&#39;</span>, nodename<span class="op">=</span><span class="st">&#39;MichaelMacPro.local&#39;</span>, release<span class="op">=</span><span class="st">&#39;14.3.0&#39;</span>, version<span class="op">=</span><span class="st">&#39;Darwin Kernel Version 14.3.0: Mon Mar 23 11:59:05 PDT 2015; root:xnu-2782.20.48~5/RELEASE_X86_64&#39;</span>, machine<span class="op">=</span><span class="st">&#39;x86_64&#39;</span>)</code></pre></div>
<p>&#27880;&#24847;<code>uname()</code>&#20989;&#25968;&#22312;<code>Windows</code>&#19978;&#19981;&#25552;&#20379;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;<code>os&#27169;&#22359;</code>&#30340;&#26576;&#20123;&#20989;&#25968;&#26159;&#36319;&#25805;&#20316;&#31995;&#32479;&#30456;&#20851;&#30340;&#12290;</p>
<h4 id="&#29615;&#22659;&#21464;&#37327;">&#29615;&#22659;&#21464;&#37327;</h4>
<p>&#22312;&#25805;&#20316;&#31995;&#32479;&#20013;&#23450;&#20041;&#30340;&#29615;&#22659;&#21464;&#37327;&#65292;&#20840;&#37096;&#20445;&#23384;&#22312;<code>os.environ</code>&#36825;&#20010;&#21464;&#37327;&#20013;&#65292;&#21487;&#20197;&#30452;&#25509;&#26597;&#30475;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> os.environ
environ({<span class="st">&#39;VERSIONER_PYTHON_PREFER_32_BIT&#39;</span>: <span class="st">&#39;no&#39;</span>, <span class="st">&#39;TERM_PROGRAM_VERSION&#39;</span>: <span class="st">&#39;326&#39;</span>, <span class="st">&#39;LOGNAME&#39;</span>: <span class="st">&#39;michael&#39;</span>, <span class="st">&#39;USER&#39;</span>: <span class="st">&#39;michael&#39;</span>, <span class="st">&#39;PATH&#39;</span>: <span class="st">&#39;/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/mysql/bin&#39;</span>, ...})</code></pre></div>
<p>&#35201;&#33719;&#21462;&#26576;&#20010;&#29615;&#22659;&#21464;&#37327;&#30340;&#20540;&#65292;&#21487;&#20197;&#35843;&#29992;<code>os.environ.get('key')</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> os.environ.get(<span class="st">&#39;PATH&#39;</span>)
<span class="co">&#39;/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/mysql/bin&#39;</span>
<span class="op">&gt;&gt;&gt;</span> os.environ.get(<span class="st">&#39;x&#39;</span>, <span class="st">&#39;default&#39;</span>)
<span class="co">&#39;default&#39;</span></code></pre></div>
<h4 id="&#25805;&#20316;&#25991;&#20214;&#21644;&#30446;&#24405;-1">&#25805;&#20316;&#25991;&#20214;&#21644;&#30446;&#24405;</h4>
<p>&#25805;&#20316;&#25991;&#20214;&#21644;&#30446;&#24405;&#30340;&#20989;&#25968;&#19968;&#37096;&#20998;&#25918;&#22312;<code>os</code>&#27169;&#22359;&#20013;&#65292;&#19968;&#37096;&#20998;&#25918;&#22312;<code>os.path</code>&#27169;&#22359;&#20013;&#65292;&#36825;&#19968;&#28857;&#35201;&#27880;&#24847;&#19968;&#19979;&#12290;&#26597;&#30475;&#12289;&#21019;&#24314;&#21644;&#21024;&#38500;&#30446;&#24405;&#21487;&#20197;&#36825;&#20040;&#35843;&#29992;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># &#26597;&#30475;&#24403;&#21069;&#30446;&#24405;&#30340;&#32477;&#23545;&#36335;&#24452;:</span>
<span class="op">&gt;&gt;&gt;</span> os.path.abspath(<span class="st">&#39;.&#39;</span>)
<span class="co">&#39;/Users/michael&#39;</span>
<span class="co"># &#22312;&#26576;&#20010;&#30446;&#24405;&#19979;&#21019;&#24314;&#19968;&#20010;&#26032;&#30446;&#24405;&#65292;&#39318;&#20808;&#25226;&#26032;&#30446;&#24405;&#30340;&#23436;&#25972;&#36335;&#24452;&#34920;&#31034;&#20986;&#26469;:</span>
<span class="op">&gt;&gt;&gt;</span> os.path.join(<span class="st">&#39;/Users/michael&#39;</span>, <span class="st">&#39;testdir&#39;</span>)
<span class="co">&#39;/Users/michael/testdir&#39;</span>
<span class="co"># &#28982;&#21518;&#21019;&#24314;&#19968;&#20010;&#30446;&#24405;:</span>
<span class="op">&gt;&gt;&gt;</span> os.mkdir(<span class="st">&#39;/Users/michael/testdir&#39;</span>)
<span class="co"># &#21024;&#25481;&#19968;&#20010;&#30446;&#24405;:</span>
<span class="op">&gt;&gt;&gt;</span> os.rmdir(<span class="st">&#39;/Users/michael/testdir&#39;</span>)</code></pre></div>
<p>&#25226;&#20004;&#20010;&#36335;&#24452;&#21512;&#25104;&#19968;&#20010;&#26102;&#65292;&#19981;&#35201;&#30452;&#25509;&#25340;&#23383;&#31526;&#20018;&#65292;&#32780;&#35201;&#36890;&#36807;<code>os.path.join()</code>&#20989;&#25968;&#65292;&#36825;&#26679;&#21487;&#20197;&#27491;&#30830;&#22788;&#29702;&#19981;&#21516;&#25805;&#20316;&#31995;&#32479;&#30340;&#36335;&#24452;&#20998;&#38548;&#31526;&#12290;&#22312;<code>Linux/Unix/Mac</code>&#19979;&#65292;<code>os.path.join()</code>&#36820;&#22238;&#36825;&#26679;&#30340;&#23383;&#31526;&#20018;&#65306;</p>
<p><code>part-1/part-2</code></p>
<p>&#32780;Windows&#19979;&#20250;&#36820;&#22238;&#36825;&#26679;&#30340;&#23383;&#31526;&#20018;&#65306;</p>
<p><code>part-1\part-2</code></p>
<p>&#21516;&#26679;&#30340;&#36947;&#29702;&#65292;&#35201;&#25286;&#20998;&#36335;&#24452;&#26102;&#65292;&#20063;&#19981;&#35201;&#30452;&#25509;&#21435;&#25286;&#23383;&#31526;&#20018;&#65292;&#32780;&#35201;&#36890;&#36807;<code>os.path.split()</code>&#20989;&#25968;&#65292;&#36825;&#26679;&#21487;&#20197;&#25226;&#19968;&#20010;&#36335;&#24452;&#25286;&#20998;&#20026;&#20004;&#37096;&#20998;&#65292;&#21518;&#19968;&#37096;&#20998;&#24635;&#26159;&#26368;&#21518;&#32423;&#21035;&#30340;&#30446;&#24405;&#25110;&#25991;&#20214;&#21517;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> os.path.split(<span class="st">&#39;/Users/michael/testdir/file.txt&#39;</span>)
(<span class="st">&#39;/Users/michael/testdir&#39;</span>, <span class="st">&#39;file.txt&#39;</span>)</code></pre></div>
<p><code>os.path.splitext()</code>&#21487;&#20197;&#30452;&#25509;&#35753;&#20320;&#24471;&#21040;&#25991;&#20214;&#25193;&#23637;&#21517;&#65292;&#24456;&#22810;&#26102;&#20505;&#38750;&#24120;&#26041;&#20415;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> os.path.splitext(<span class="st">&#39;/path/to/file.txt&#39;</span>)
(<span class="st">&#39;/path/to/file&#39;</span>, <span class="st">&#39;.txt&#39;</span>)</code></pre></div>
<p>&#36825;&#20123;&#21512;&#24182;&#12289;&#25286;&#20998;&#36335;&#24452;&#30340;&#20989;&#25968;&#24182;&#19981;&#35201;&#27714;&#30446;&#24405;&#21644;&#25991;&#20214;&#35201;&#30495;&#23454;&#23384;&#22312;&#65292;&#23427;&#20204;&#21482;&#23545;&#23383;&#31526;&#20018;&#36827;&#34892;&#25805;&#20316;&#12290;</p>
<p>&#25991;&#20214;&#25805;&#20316;&#20351;&#29992;&#19979;&#38754;&#30340;&#20989;&#25968;&#12290;&#20551;&#23450;&#24403;&#21069;&#30446;&#24405;&#19979;&#26377;&#19968;&#20010;<code>test.txt</code>&#25991;&#20214;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># &#23545;&#25991;&#20214;&#37325;&#21629;&#21517;:</span>
<span class="op">&gt;&gt;&gt;</span> os.rename(<span class="st">&#39;test.txt&#39;</span>, <span class="st">&#39;test.py&#39;</span>)
<span class="co"># &#21024;&#25481;&#25991;&#20214;:</span>
<span class="op">&gt;&gt;&gt;</span> os.remove(<span class="st">&#39;test.py&#39;</span>)</code></pre></div>
<p>&#20294;&#26159;&#22797;&#21046;&#25991;&#20214;&#30340;&#20989;&#25968;&#23621;&#28982;&#22312;<code>os</code>&#27169;&#22359;&#20013;&#19981;&#23384;&#22312;&#65281;&#21407;&#22240;&#26159;&#22797;&#21046;&#25991;&#20214;&#24182;&#38750;&#30001;&#25805;&#20316;&#31995;&#32479;&#25552;&#20379;&#30340;&#31995;&#32479;&#35843;&#29992;&#12290;&#29702;&#35770;&#19978;&#35762;&#65292;&#25105;&#20204;&#36890;&#36807;&#19978;&#19968;&#33410;&#30340;&#35835;&#20889;&#25991;&#20214;&#21487;&#20197;&#23436;&#25104;&#25991;&#20214;&#22797;&#21046;&#65292;&#21482;&#19981;&#36807;&#35201;&#22810;&#20889;&#24456;&#22810;&#20195;&#30721;&#12290;</p>
<p>&#24184;&#36816;&#30340;&#26159;<code>shutil</code>&#27169;&#22359;&#25552;&#20379;&#20102;<code>copyfile()</code>&#30340;&#20989;&#25968;&#65292;&#20320;&#36824;&#21487;&#20197;&#22312;<code>shutil</code>&#27169;&#22359;&#20013;&#25214;&#21040;&#24456;&#22810;&#23454;&#29992;&#20989;&#25968;&#65292;&#23427;&#20204;&#21487;&#20197;&#30475;&#20570;&#26159;<code>os</code>&#27169;&#22359;&#30340;&#34917;&#20805;&#12290;</p>
<p>&#26368;&#21518;&#30475;&#30475;&#22914;&#20309;&#21033;&#29992;Python&#30340;&#29305;&#24615;&#26469;&#36807;&#28388;&#25991;&#20214;&#12290;&#27604;&#22914;&#25105;&#20204;&#35201;&#21015;&#20986;&#24403;&#21069;&#30446;&#24405;&#19979;&#30340;&#25152;&#26377;&#30446;&#24405;&#65292;&#21482;&#38656;&#35201;&#19968;&#34892;&#20195;&#30721;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> [x <span class="cf">for</span> x <span class="op">in</span> os.listdir(<span class="st">&#39;.&#39;</span>) <span class="cf">if</span> os.path.isdir(x)]
[<span class="st">&#39;.lein&#39;</span>, <span class="st">&#39;.local&#39;</span>, <span class="st">&#39;.m2&#39;</span>, <span class="st">&#39;.npm&#39;</span>, <span class="st">&#39;.ssh&#39;</span>, <span class="st">&#39;.Trash&#39;</span>, <span class="st">&#39;.vim&#39;</span>, <span class="st">&#39;Applications&#39;</span>, <span class="st">&#39;Desktop&#39;</span>, ...]</code></pre></div>
<p>&#35201;&#21015;&#20986;&#25152;&#26377;&#30340;<code>.py</code>&#25991;&#20214;&#65292;&#20063;&#21482;&#38656;&#19968;&#34892;&#20195;&#30721;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> [x <span class="cf">for</span> x <span class="op">in</span> os.listdir(<span class="st">&#39;.&#39;</span>) <span class="cf">if</span> os.path.isfile(x) <span class="op">and</span> os.path.splitext(x)[<span class="dv">1</span>]<span class="op">==</span><span class="st">&#39;.py&#39;</span>]
[<span class="st">&#39;apis.py&#39;</span>, <span class="st">&#39;config.py&#39;</span>, <span class="st">&#39;models.py&#39;</span>, <span class="st">&#39;pymonitor.py&#39;</span>, <span class="st">&#39;test_db.py&#39;</span>, <span class="st">&#39;urls.py&#39;</span>, <span class="st">&#39;wsgiapp.py&#39;</span>]</code></pre></div>
<p>&#26159;&#19981;&#26159;&#38750;&#24120;&#31616;&#27905;&#65311;</p>
<h4 id="&#23567;&#32467;-2">&#23567;&#32467;</h4>
<p>Python&#30340;<code>os&#27169;&#22359;</code>&#23553;&#35013;&#20102;&#25805;&#20316;&#31995;&#32479;&#30340;&#30446;&#24405;&#21644;&#25991;&#20214;&#25805;&#20316;&#65292;&#35201;&#27880;&#24847;&#36825;&#20123;&#20989;&#25968;&#26377;&#30340;&#22312;<code>os&#27169;&#22359;</code>&#20013;&#65292;&#26377;&#30340;&#22312;<code>os.path</code>&#27169;&#22359;&#20013;&#12290;</p>
<h4 id="&#32451;&#20064;">&#32451;&#20064;</h4>
<p>&#21033;&#29992;<code>os&#27169;&#22359;</code>&#32534;&#20889;&#19968;&#20010;&#33021;&#23454;&#29616;<code>dir -l</code>&#36755;&#20986;&#30340;&#31243;&#24207;&#12290;</p>
<p>&#32534;&#20889;&#19968;&#20010;&#31243;&#24207;&#65292;&#33021;&#22312;&#24403;&#21069;&#30446;&#24405;&#20197;&#21450;&#24403;&#21069;&#30446;&#24405;&#30340;&#25152;&#26377;&#23376;&#30446;&#24405;&#19979;&#26597;&#25214;&#25991;&#20214;&#21517;&#21253;&#21547;&#25351;&#23450;&#23383;&#31526;&#20018;&#30340;&#25991;&#20214;&#65292;&#24182;&#25171;&#21360;&#20986;&#30456;&#23545;&#36335;&#24452;&#12290;</p>
<h3 id="&#24207;&#21015;&#21270;">12.4 &#24207;&#21015;&#21270;</h3>
<p>&#22312;&#31243;&#24207;&#36816;&#34892;&#30340;&#36807;&#31243;&#20013;&#65292;&#25152;&#26377;&#30340;&#21464;&#37327;&#37117;&#26159;&#22312;&#20869;&#23384;&#20013;&#65292;&#27604;&#22914;&#65292;&#23450;&#20041;&#19968;&#20010;<code>dict</code>&#65306;</p>
<p><code>d = dict(name='Bob', age=20, score=88)</code></p>
<p>&#21487;&#20197;&#38543;&#26102;&#20462;&#25913;&#21464;&#37327;&#65292;&#27604;&#22914;&#25226;<code>name</code>&#25913;&#25104;<code>'Bill'</code>&#65292;&#20294;&#26159;&#19968;&#26086;&#31243;&#24207;&#32467;&#26463;&#65292;&#21464;&#37327;&#25152;&#21344;&#29992;&#30340;&#20869;&#23384;&#23601;&#34987;&#25805;&#20316;&#31995;&#32479;&#20840;&#37096;&#22238;&#25910;&#12290;&#22914;&#26524;&#27809;&#26377;&#25226;&#20462;&#25913;&#21518;&#30340;<code>'Bill'</code>&#23384;&#20648;&#21040;&#30913;&#30424;&#19978;&#65292;&#19979;&#27425;&#37325;&#26032;&#36816;&#34892;&#31243;&#24207;&#65292;&#21464;&#37327;&#21448;&#34987;&#21021;&#22987;&#21270;&#20026;<code>'Bob'</code>&#12290;</p>
<p>&#25105;&#20204;&#25226;&#21464;&#37327;&#20174;&#20869;&#23384;&#20013;&#21464;&#25104;&#21487;&#23384;&#20648;&#25110;&#20256;&#36755;&#30340;&#36807;&#31243;&#31216;&#20043;&#20026;<strong>&#24207;&#21015;&#21270;</strong>&#65292;&#22312;Python&#20013;&#21483;<code>pickling</code>&#65292;&#22312;&#20854;&#20182;&#35821;&#35328;&#20013;&#20063;&#34987;&#31216;&#20043;&#20026;<code>serialization&#65292;marshalling&#65292;flattening</code>&#31561;&#31561;&#65292;&#37117;&#26159;&#19968;&#20010;&#24847;&#24605;&#12290;</p>
<p>&#24207;&#21015;&#21270;&#20043;&#21518;&#65292;&#23601;&#21487;&#20197;&#25226;&#24207;&#21015;&#21270;&#21518;&#30340;&#20869;&#23481;&#20889;&#20837;&#30913;&#30424;&#65292;&#25110;&#32773;&#36890;&#36807;&#32593;&#32476;&#20256;&#36755;&#21040;&#21035;&#30340;&#26426;&#22120;&#19978;&#12290;</p>
<p>&#21453;&#36807;&#26469;&#65292;&#25226;&#21464;&#37327;&#20869;&#23481;&#20174;&#24207;&#21015;&#21270;&#30340;&#23545;&#35937;&#37325;&#26032;&#35835;&#21040;&#20869;&#23384;&#37324;&#31216;&#20043;&#20026;<strong>&#21453;&#24207;&#21015;&#21270;</strong>&#65292;&#21363;<code>unpickling</code>&#12290;</p>
<p>Python&#25552;&#20379;&#20102;<code>pickle&#27169;&#22359;</code>&#26469;&#23454;&#29616;&#24207;&#21015;&#21270;&#12290;</p>
<p>&#39318;&#20808;&#65292;&#25105;&#20204;&#23581;&#35797;&#25226;&#19968;&#20010;&#23545;&#35937;&#24207;&#21015;&#21270;&#24182;&#20889;&#20837;&#25991;&#20214;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> pickle
<span class="op">&gt;&gt;&gt;</span> d <span class="op">=</span> <span class="bu">dict</span>(name<span class="op">=</span><span class="st">&#39;Bob&#39;</span>, age<span class="op">=</span><span class="dv">20</span>, score<span class="op">=</span><span class="dv">88</span>)
<span class="op">&gt;&gt;&gt;</span> pickle.dumps(d)
b<span class="st">&#39;</span><span class="ch">\x80\x03</span><span class="st">}q</span><span class="ch">\x00</span><span class="st">(X</span><span class="ch">\x03\x00\x00\x00a</span><span class="st">geq</span><span class="ch">\x01</span><span class="st">K</span><span class="ch">\x14</span><span class="st">X</span><span class="ch">\x05\x00\x00\x00</span><span class="st">scoreq</span><span class="ch">\x02</span><span class="st">KXX</span><span class="ch">\x04\x00\x00\x00</span><span class="st">nameq</span><span class="ch">\x03</span><span class="st">X</span><span class="ch">\x03\x00\x00\x00B</span><span class="st">obq</span><span class="ch">\x04</span><span class="st">u.&#39;</span></code></pre></div>
<p><code>pickle.dumps()</code>&#26041;&#27861;&#25226;&#20219;&#24847;&#23545;&#35937;&#24207;&#21015;&#21270;&#25104;&#19968;&#20010;bytes&#65292;&#28982;&#21518;&#65292;&#23601;&#21487;&#20197;&#25226;&#36825;&#20010;bytes&#20889;&#20837;&#25991;&#20214;&#12290;&#25110;&#32773;&#29992;&#21478;&#19968;&#20010;&#26041;&#27861;<code>pickle.dump()</code>&#30452;&#25509;&#25226;&#23545;&#35937;&#24207;&#21015;&#21270;&#21518;&#20889;&#20837;&#19968;&#20010;<code>file-like Object</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;dump.txt&#39;</span>, <span class="st">&#39;wb&#39;</span>)
<span class="op">&gt;&gt;&gt;</span> pickle.dump(d, f)
<span class="op">&gt;&gt;&gt;</span> f.close()</code></pre></div>
<p>&#30475;&#30475;&#20889;&#20837;&#30340;<code>dump.txt</code>&#25991;&#20214;&#65292;&#19968;&#22534;&#20081;&#19971;&#20843;&#31967;&#30340;&#20869;&#23481;&#65292;&#36825;&#20123;&#37117;&#26159;Python&#20445;&#23384;&#30340;&#23545;&#35937;&#20869;&#37096;&#20449;&#24687;&#12290;</p>
<p>&#24403;&#25105;&#20204;&#35201;&#25226;&#23545;&#35937;&#20174;&#30913;&#30424;&#35835;&#21040;&#20869;&#23384;&#26102;&#65292;&#21487;&#20197;&#20808;&#25226;&#20869;&#23481;&#35835;&#21040;&#19968;&#20010;bytes&#65292;&#28982;&#21518;&#29992;<code>pickle.loads()</code>&#26041;&#27861;&#21453;&#24207;&#21015;&#21270;&#20986;&#23545;&#35937;&#65292;&#20063;&#21487;&#20197;&#30452;&#25509;&#29992;<code>pickle.load()</code>&#26041;&#27861;&#20174;&#19968;&#20010;<code>file-like Object</code>&#20013;&#30452;&#25509;&#21453;&#24207;&#21015;&#21270;&#20986;&#23545;&#35937;&#12290;&#25105;&#20204;&#25171;&#24320;&#21478;&#19968;&#20010;Python&#21629;&#20196;&#34892;&#26469;&#21453;&#24207;&#21015;&#21270;&#21018;&#25165;&#20445;&#23384;&#30340;&#23545;&#35937;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;dump.txt&#39;</span>, <span class="st">&#39;rb&#39;</span>)
<span class="op">&gt;&gt;&gt;</span> d <span class="op">=</span> pickle.load(f)
<span class="op">&gt;&gt;&gt;</span> f.close()
<span class="op">&gt;&gt;&gt;</span> d
{<span class="st">&#39;age&#39;</span>: <span class="dv">20</span>, <span class="st">&#39;score&#39;</span>: <span class="dv">88</span>, <span class="st">&#39;name&#39;</span>: <span class="st">&#39;Bob&#39;</span>}</code></pre></div>
<p>&#21464;&#37327;&#30340;&#20869;&#23481;&#21448;&#22238;&#26469;&#20102;&#65281;</p>
<p>&#24403;&#28982;&#65292;&#36825;&#20010;&#21464;&#37327;&#21644;&#21407;&#26469;&#30340;&#21464;&#37327;&#26159;&#23436;&#20840;&#19981;&#30456;&#24178;&#30340;&#23545;&#35937;&#65292;&#23427;&#20204;&#21482;&#26159;&#20869;&#23481;&#30456;&#21516;&#32780;&#24050;&#12290;</p>
<p><code>Pickle</code>&#30340;&#38382;&#39064;&#21644;&#25152;&#26377;&#20854;&#20182;&#32534;&#31243;&#35821;&#35328;&#29305;&#26377;&#30340;&#24207;&#21015;&#21270;&#38382;&#39064;&#19968;&#26679;&#65292;&#23601;&#26159;&#23427;&#21482;&#33021;&#29992;&#20110;Python&#65292;&#24182;&#19988;&#21487;&#33021;&#19981;&#21516;&#29256;&#26412;&#30340;Python&#24444;&#27492;&#37117;&#19981;&#20860;&#23481;&#65292;&#22240;&#27492;&#65292;&#21482;&#33021;&#29992;<code>Pickle</code>&#20445;&#23384;&#37027;&#20123;&#19981;&#37325;&#35201;&#30340;&#25968;&#25454;&#65292;&#19981;&#33021;&#25104;&#21151;&#22320;&#21453;&#24207;&#21015;&#21270;&#20063;&#27809;&#20851;&#31995;&#12290;</p>
<h4 id="json">JSON</h4>
<p>&#22914;&#26524;&#25105;&#20204;&#35201;&#22312;&#19981;&#21516;&#30340;&#32534;&#31243;&#35821;&#35328;&#20043;&#38388;&#20256;&#36882;&#23545;&#35937;&#65292;&#23601;&#24517;&#39035;&#25226;&#23545;&#35937;&#24207;&#21015;&#21270;&#20026;&#26631;&#20934;&#26684;&#24335;&#65292;&#27604;&#22914;<code>XML</code>&#65292;&#20294;&#26356;&#22909;&#30340;&#26041;&#27861;&#26159;&#24207;&#21015;&#21270;&#20026;<code>JSON</code>&#65292;&#22240;&#20026;<code>JSON</code>&#34920;&#31034;&#20986;&#26469;&#23601;&#26159;&#19968;&#20010;&#23383;&#31526;&#20018;&#65292;&#21487;&#20197;&#34987;&#25152;&#26377;&#35821;&#35328;&#35835;&#21462;&#65292;&#20063;&#21487;&#20197;&#26041;&#20415;&#22320;&#23384;&#20648;&#21040;&#30913;&#30424;&#25110;&#32773;&#36890;&#36807;&#32593;&#32476;&#20256;&#36755;&#12290;<code>JSON</code>&#19981;&#20165;&#26159;&#26631;&#20934;&#26684;&#24335;&#65292;&#24182;&#19988;&#27604;<code>XML</code>&#26356;&#24555;&#65292;&#32780;&#19988;&#21487;&#20197;&#30452;&#25509;&#22312;<code>Web</code>&#39029;&#38754;&#20013;&#35835;&#21462;&#65292;&#38750;&#24120;&#26041;&#20415;&#12290;</p>
<p><code>JSON</code>&#34920;&#31034;&#30340;&#23545;&#35937;&#23601;&#26159;&#26631;&#20934;&#30340;<code>JavaScript</code>&#35821;&#35328;&#30340;&#23545;&#35937;&#65292;<code>JSON</code>&#21644;Python&#20869;&#32622;&#30340;&#25968;&#25454;&#31867;&#22411;&#23545;&#24212;&#22914;&#19979;&#65306;</p>
<table>
<thead>
<tr class="header">
<th align="center">JSON&#31867;&#22411;</th>
<th align="center">Python&#31867;&#22411;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">{}</td>
<td align="center">dict</td>
</tr>
<tr class="even">
<td align="center">[]</td>
<td align="center">list</td>
</tr>
<tr class="odd">
<td align="center">&quot;string&quot;</td>
<td align="center">str</td>
</tr>
<tr class="even">
<td align="center">1234.56</td>
<td align="center">int&#25110;float</td>
</tr>
<tr class="odd">
<td align="center">true/false</td>
<td align="center">True/False</td>
</tr>
<tr class="even">
<td align="center">null</td>
<td align="center">None</td>
</tr>
</tbody>
</table>
<p>Python&#20869;&#32622;&#30340;<code>json&#27169;&#22359;</code>&#25552;&#20379;&#20102;&#38750;&#24120;&#23436;&#21892;&#30340;Python&#23545;&#35937;&#21040;<code>JSON</code>&#26684;&#24335;&#30340;&#36716;&#25442;&#12290;&#25105;&#20204;&#20808;&#30475;&#30475;&#22914;&#20309;&#25226;Python&#23545;&#35937;&#21464;&#25104;&#19968;&#20010;<code>JSON</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> json
<span class="op">&gt;&gt;&gt;</span> d <span class="op">=</span> <span class="bu">dict</span>(name<span class="op">=</span><span class="st">&#39;Bob&#39;</span>, age<span class="op">=</span><span class="dv">20</span>, score<span class="op">=</span><span class="dv">88</span>)
<span class="op">&gt;&gt;&gt;</span> json.dumps(d)
<span class="co">&#39;{&quot;age&quot;: 20, &quot;score&quot;: 88, &quot;name&quot;: &quot;Bob&quot;}&#39;</span></code></pre></div>
<p><code>dumps()</code>&#26041;&#27861;&#36820;&#22238;&#19968;&#20010;<code>str</code>&#65292;&#20869;&#23481;&#23601;&#26159;&#26631;&#20934;&#30340;<code>JSON</code>&#12290;&#31867;&#20284;&#30340;&#65292;<code>dump()</code>&#26041;&#27861;&#21487;&#20197;&#30452;&#25509;&#25226;<code>JSON</code>&#20889;&#20837;&#19968;&#20010;<code>file-like Object</code>&#12290;</p>
<p>&#35201;&#25226;<code>JSON</code>&#21453;&#24207;&#21015;&#21270;&#20026;Python&#23545;&#35937;&#65292;&#29992;<code>loads()</code>&#25110;&#32773;&#23545;&#24212;&#30340;<code>load()</code>&#26041;&#27861;&#65292;&#21069;&#32773;&#25226;<code>JSON</code>&#30340;&#23383;&#31526;&#20018;&#21453;&#24207;&#21015;&#21270;&#65292;&#21518;&#32773;&#20174;<code>file-like Object</code>&#20013;&#35835;&#21462;&#23383;&#31526;&#20018;&#24182;&#21453;&#24207;&#21015;&#21270;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> json_str <span class="op">=</span> <span class="st">&#39;{&quot;age&quot;: 20, &quot;score&quot;: 88, &quot;name&quot;: &quot;Bob&quot;}&#39;</span>
<span class="op">&gt;&gt;&gt;</span> json.loads(json_str)
{<span class="st">&#39;age&#39;</span>: <span class="dv">20</span>, <span class="st">&#39;score&#39;</span>: <span class="dv">88</span>, <span class="st">&#39;name&#39;</span>: <span class="st">&#39;Bob&#39;</span>}</code></pre></div>
<p>&#30001;&#20110;<code>JSON</code>&#26631;&#20934;&#35268;&#23450;<code>JSON</code>&#32534;&#30721;&#26159;<code>UTF-8</code>&#65292;&#25152;&#20197;&#25105;&#20204;&#24635;&#26159;&#33021;&#27491;&#30830;&#22320;&#22312;Python&#30340;<code>str</code>&#19982;<code>JSON</code>&#30340;&#23383;&#31526;&#20018;&#20043;&#38388;&#36716;&#25442;&#12290;</p>
<h4 id="json&#36827;&#38454;">JSON&#36827;&#38454;</h4>
<p>Python&#30340;<code>dict</code>&#23545;&#35937;&#21487;&#20197;&#30452;&#25509;&#24207;&#21015;&#21270;&#20026;<code>JSON</code>&#30340;<code>{}</code>&#65292;&#19981;&#36807;&#65292;&#24456;&#22810;&#26102;&#20505;&#65292;&#25105;&#20204;&#26356;&#21916;&#27426;&#29992;<code>class</code>&#34920;&#31034;&#23545;&#35937;&#65292;&#27604;&#22914;&#23450;&#20041;<code>Student&#31867;</code>&#65292;&#28982;&#21518;&#24207;&#21015;&#21270;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> json

<span class="kw">class</span> Student(<span class="bu">object</span>):
    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, age, score):
        <span class="va">self</span>.name <span class="op">=</span> name
        <span class="va">self</span>.age <span class="op">=</span> age
        <span class="va">self</span>.score <span class="op">=</span> score

s <span class="op">=</span> Student(<span class="st">&#39;Bob&#39;</span>, <span class="dv">20</span>, <span class="dv">88</span>)
<span class="bu">print</span>(json.dumps(s))</code></pre></div>
<p>&#36816;&#34892;&#20195;&#30721;&#65292;&#27627;&#19981;&#30041;&#24773;&#22320;&#24471;&#21040;&#19968;&#20010;<code>TypeError</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">Traceback (most recent call last):
  ...
<span class="pp">TypeError</span>: <span class="op">&lt;</span>__main__.Student <span class="bu">object</span> at <span class="bn">0x10603cc50</span><span class="op">&gt;</span> <span class="op">is</span> <span class="op">not</span> JSON serializable</code></pre></div>
<p>&#38169;&#35823;&#30340;&#21407;&#22240;&#26159;<code>Student</code>&#23545;&#35937;&#19981;&#26159;&#19968;&#20010;&#21487;&#24207;&#21015;&#21270;&#20026;<code>JSON</code>&#30340;&#23545;&#35937;&#12290;</p>
<p>&#22914;&#26524;&#36830;<code>class</code>&#30340;&#23454;&#20363;&#23545;&#35937;&#37117;&#26080;&#27861;&#24207;&#21015;&#21270;&#20026;<code>JSON</code>&#65292;&#36825;&#32943;&#23450;&#19981;&#21512;&#29702;&#65281;</p>
<p>&#21035;&#24613;&#65292;&#25105;&#20204;&#20180;&#32454;&#30475;&#30475;<code>dumps()</code>&#26041;&#27861;&#30340;&#21442;&#25968;&#21015;&#34920;&#65292;&#21487;&#20197;&#21457;&#29616;&#65292;&#38500;&#20102;&#31532;&#19968;&#20010;&#24517;&#39035;&#30340;<code>obj</code>&#21442;&#25968;&#22806;&#65292;<code>dumps()</code>&#26041;&#27861;&#36824;&#25552;&#20379;&#20102;&#19968;&#22823;&#22534;&#30340;&#21487;&#36873;&#21442;&#25968;&#65306;</p>
<p><code>https://docs.python.org/3/library/json.html#json.dumps</code></p>
<p>&#36825;&#20123;&#21487;&#36873;&#21442;&#25968;&#23601;&#26159;&#35753;&#25105;&#20204;&#26469;&#23450;&#21046;<code>JSON</code>&#24207;&#21015;&#21270;&#12290;&#21069;&#38754;&#30340;&#20195;&#30721;&#20043;&#25152;&#20197;&#26080;&#27861;&#25226;<code>Student</code>&#31867;&#23454;&#20363;&#24207;&#21015;&#21270;&#20026;<code>JSON</code>&#65292;&#26159;&#22240;&#20026;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;<code>dumps()</code>&#26041;&#27861;&#19981;&#30693;&#36947;&#22914;&#20309;&#23558;<code>Student</code>&#23454;&#20363;&#21464;&#20026;&#19968;&#20010;<code>JSON</code>&#30340;<code>{}</code>&#23545;&#35937;&#12290;</p>
<p>&#21487;&#36873;&#21442;&#25968;<code>default</code>&#23601;&#26159;&#25226;&#20219;&#24847;&#19968;&#20010;&#23545;&#35937;&#21464;&#25104;&#19968;&#20010;&#21487;&#24207;&#21015;&#20026;<code>JSON</code>&#30340;&#23545;&#35937;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#20026;<code>Student</code>&#19987;&#38376;&#20889;&#19968;&#20010;&#36716;&#25442;&#20989;&#25968;&#65292;&#20877;&#25226;&#20989;&#25968;&#20256;&#36827;&#21435;&#21363;&#21487;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> student2dict(std):
    <span class="cf">return</span> {
        <span class="st">&#39;name&#39;</span>: std.name,
        <span class="co">&#39;age&#39;</span>: std.age,
        <span class="co">&#39;score&#39;</span>: std.score
    }</code></pre></div>
<p>&#36825;&#26679;&#65292;<code>Student</code>&#23454;&#20363;&#39318;&#20808;&#34987;<code>student2dict()</code>&#20989;&#25968;&#36716;&#25442;&#25104;<code>dict</code>&#65292;&#28982;&#21518;&#20877;&#34987;&#39034;&#21033;&#24207;&#21015;&#21270;&#20026;<code>JSON</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(json.dumps(s, default<span class="op">=</span>student2dict))
{<span class="st">&quot;age&quot;</span>: <span class="dv">20</span>, <span class="st">&quot;name&quot;</span>: <span class="st">&quot;Bob&quot;</span>, <span class="st">&quot;score&quot;</span>: <span class="dv">88</span>}</code></pre></div>
<p>&#19981;&#36807;&#65292;&#19979;&#27425;&#22914;&#26524;&#36935;&#21040;&#19968;&#20010;<code>Teacher&#31867;</code>&#30340;&#23454;&#20363;&#65292;&#29031;&#26679;&#26080;&#27861;&#24207;&#21015;&#21270;&#20026;<code>JSON</code>&#12290;&#25105;&#20204;&#21487;&#20197;&#20599;&#20010;&#25042;&#65292;&#25226;&#20219;&#24847;<code>class</code>&#30340;&#23454;&#20363;&#21464;&#20026;<code>dict</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(json.dumps(s, default<span class="op">=</span><span class="kw">lambda</span> obj: obj.__dict__))</code></pre></div>
<p>&#22240;&#20026;&#36890;&#24120;<code>class</code>&#30340;&#23454;&#20363;&#37117;&#26377;&#19968;&#20010;<code>__dict__</code>&#23646;&#24615;&#65292;&#23427;&#23601;&#26159;&#19968;&#20010;<code>dict</code>&#65292;&#29992;&#26469;&#23384;&#20648;&#23454;&#20363;&#21464;&#37327;&#12290;&#20063;&#26377;&#23569;&#25968;&#20363;&#22806;&#65292;&#27604;&#22914;&#23450;&#20041;&#20102;<code>__slots__</code>&#30340;<code>class</code>&#12290;</p>
<p>&#21516;&#26679;&#30340;&#36947;&#29702;&#65292;&#22914;&#26524;&#25105;&#20204;&#35201;&#25226;<code>JSON</code>&#21453;&#24207;&#21015;&#21270;&#20026;&#19968;&#20010;<code>Student</code>&#23545;&#35937;&#23454;&#20363;&#65292;<code>loads()</code>&#26041;&#27861;&#39318;&#20808;&#36716;&#25442;&#20986;&#19968;&#20010;<code>dict</code>&#23545;&#35937;&#65292;&#28982;&#21518;&#65292;&#25105;&#20204;&#20256;&#20837;&#30340;<code>object_hook</code>&#20989;&#25968;&#36127;&#36131;&#25226;<code>dict</code>&#36716;&#25442;&#20026;<code>Student</code>&#23454;&#20363;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> dict2student(d):
    <span class="cf">return</span> Student(d[<span class="st">&#39;name&#39;</span>], d[<span class="st">&#39;age&#39;</span>], d[<span class="st">&#39;score&#39;</span>])</code></pre></div>
<p>&#36816;&#34892;&#32467;&#26524;&#22914;&#19979;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> json_str <span class="op">=</span> <span class="st">&#39;{&quot;age&quot;: 20, &quot;score&quot;: 88, &quot;name&quot;: &quot;Bob&quot;}&#39;</span>
<span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(json.loads(json_str, object_hook<span class="op">=</span>dict2student))
<span class="op">&lt;</span>__main__.Student <span class="bu">object</span> at <span class="bn">0x10cd3c190</span><span class="op">&gt;</span></code></pre></div>
<p>&#25171;&#21360;&#20986;&#30340;&#26159;&#21453;&#24207;&#21015;&#21270;&#30340;<code>Student</code>&#23454;&#20363;&#23545;&#35937;&#12290;</p>
<h4 id="&#23567;&#32467;-3">&#23567;&#32467;</h4>
<p>Python&#35821;&#35328;&#29305;&#23450;&#30340;&#24207;&#21015;&#21270;&#27169;&#22359;&#26159;<code>pickle</code>&#65292;&#20294;&#22914;&#26524;&#35201;&#25226;&#24207;&#21015;&#21270;&#25630;&#24471;&#26356;&#36890;&#29992;&#12289;&#26356;&#31526;&#21512;<code>Web</code>&#26631;&#20934;&#65292;&#23601;&#21487;&#20197;&#20351;&#29992;<code>json</code>&#27169;&#22359;&#12290;</p>
<p><code>json</code>&#27169;&#22359;&#30340;<code>dumps()</code>&#21644;<code>loads()</code>&#20989;&#25968;&#26159;&#23450;&#20041;&#24471;&#38750;&#24120;&#22909;&#30340;&#25509;&#21475;&#30340;&#20856;&#33539;&#12290;&#24403;&#25105;&#20204;&#20351;&#29992;&#26102;&#65292;&#21482;&#38656;&#35201;&#20256;&#20837;&#19968;&#20010;&#24517;&#39035;&#30340;&#21442;&#25968;&#12290;&#20294;&#26159;&#65292;&#24403;&#40664;&#35748;&#30340;&#24207;&#21015;&#21270;&#25110;&#21453;&#24207;&#21015;&#26426;&#21046;&#19981;&#28385;&#36275;&#25105;&#20204;&#30340;&#35201;&#27714;&#26102;&#65292;&#25105;&#20204;&#21448;&#21487;&#20197;&#20256;&#20837;&#26356;&#22810;&#30340;&#21442;&#25968;&#26469;&#23450;&#21046;&#24207;&#21015;&#21270;&#25110;&#21453;&#24207;&#21015;&#21270;&#30340;&#35268;&#21017;&#65292;&#26082;&#20570;&#21040;&#20102;&#25509;&#21475;&#31616;&#21333;&#26131;&#29992;&#65292;&#21448;&#20570;&#21040;&#20102;&#20805;&#20998;&#30340;&#25193;&#23637;&#24615;&#21644;&#28789;&#27963;&#24615;&#12290;</p>
</body>
</html>
