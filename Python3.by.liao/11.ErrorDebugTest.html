<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="book.css" type="text/css" />
</head>
<body>
<h2 id="&#38169;&#35823;&#35843;&#35797;&#21644;&#27979;&#35797;">11.&#38169;&#35823;&#12289;&#35843;&#35797;&#21644;&#27979;&#35797;</h2>
<p>&#22312;&#31243;&#24207;&#36816;&#34892;&#36807;&#31243;&#20013;&#65292;&#24635;&#20250;&#36935;&#21040;&#21508;&#31181;&#21508;&#26679;&#30340;&#38169;&#35823;&#12290;</p>
<p>&#26377;&#30340;&#38169;&#35823;&#26159;&#31243;&#24207;&#32534;&#20889;&#26377;&#38382;&#39064;&#36896;&#25104;&#30340;&#65292;&#27604;&#22914;&#26412;&#26469;&#24212;&#35813;&#36755;&#20986;&#25972;&#25968;&#32467;&#26524;&#36755;&#20986;&#20102;&#23383;&#31526;&#20018;&#65292;&#36825;&#31181;&#38169;&#35823;&#25105;&#20204;&#36890;&#24120;&#31216;&#20043;&#20026;bug&#65292;bug&#26159;&#24517;&#39035;&#20462;&#22797;&#30340;&#12290;</p>
<p>&#26377;&#30340;&#38169;&#35823;&#26159;&#29992;&#25143;&#36755;&#20837;&#36896;&#25104;&#30340;&#65292;&#27604;&#22914;&#35753;&#29992;&#25143;&#36755;&#20837;email&#22320;&#22336;&#65292;&#32467;&#26524;&#24471;&#21040;&#19968;&#20010;&#31354;&#23383;&#31526;&#20018;&#65292;&#36825;&#31181;&#38169;&#35823;&#21487;&#20197;&#36890;&#36807;&#26816;&#26597;&#29992;&#25143;&#36755;&#20837;&#26469;&#20570;&#30456;&#24212;&#30340;&#22788;&#29702;&#12290;</p>
<p>&#36824;&#26377;&#19968;&#31867;&#38169;&#35823;&#26159;&#23436;&#20840;&#26080;&#27861;&#22312;&#31243;&#24207;&#36816;&#34892;&#36807;&#31243;&#20013;&#39044;&#27979;&#30340;&#65292;&#27604;&#22914;&#20889;&#20837;&#25991;&#20214;&#30340;&#26102;&#20505;&#65292;&#30913;&#30424;&#28385;&#20102;&#65292;&#20889;&#19981;&#36827;&#21435;&#20102;&#65292;&#25110;&#32773;&#20174;&#32593;&#32476;&#25235;&#21462;&#25968;&#25454;&#65292;&#32593;&#32476;&#31361;&#28982;&#26029;&#25481;&#20102;&#12290;&#36825;&#31867;&#38169;&#35823;&#20063;&#31216;&#20026;&#24322;&#24120;&#65292;&#22312;&#31243;&#24207;&#20013;&#36890;&#24120;&#26159;&#24517;&#39035;&#22788;&#29702;&#30340;&#65292;&#21542;&#21017;&#65292;&#31243;&#24207;&#20250;&#22240;&#20026;&#21508;&#31181;&#38382;&#39064;&#32456;&#27490;&#24182;&#36864;&#20986;&#12290;</p>
<p>Python&#20869;&#32622;&#20102;&#19968;&#22871;&#24322;&#24120;&#22788;&#29702;&#26426;&#21046;&#65292;&#26469;&#24110;&#21161;&#25105;&#20204;&#36827;&#34892;&#38169;&#35823;&#22788;&#29702;&#12290;</p>
<p>&#27492;&#22806;&#65292;&#25105;&#20204;&#20063;&#38656;&#35201;&#36319;&#36394;&#31243;&#24207;&#30340;&#25191;&#34892;&#65292;&#26597;&#30475;&#21464;&#37327;&#30340;&#20540;&#26159;&#21542;&#27491;&#30830;&#65292;&#36825;&#20010;&#36807;&#31243;&#31216;&#20026;&#35843;&#35797;&#12290;Python&#30340;pdb&#21487;&#20197;&#35753;&#25105;&#20204;&#20197;&#21333;&#27493;&#26041;&#24335;&#25191;&#34892;&#20195;&#30721;&#12290;</p>
<p>&#26368;&#21518;&#65292;&#32534;&#20889;&#27979;&#35797;&#20063;&#24456;&#37325;&#35201;&#12290;&#26377;&#20102;&#33391;&#22909;&#30340;&#27979;&#35797;&#65292;&#23601;&#21487;&#20197;&#22312;&#31243;&#24207;&#20462;&#25913;&#21518;&#21453;&#22797;&#36816;&#34892;&#65292;&#30830;&#20445;&#31243;&#24207;&#36755;&#20986;&#31526;&#21512;&#25105;&#20204;&#32534;&#20889;&#30340;&#27979;&#35797;&#12290;</p>
<h3 id="&#38169;&#35823;&#22788;&#29702;">11.1 &#38169;&#35823;&#22788;&#29702;</h3>
<p>&#22312;&#31243;&#24207;&#36816;&#34892;&#30340;&#36807;&#31243;&#20013;&#65292;&#22914;&#26524;&#21457;&#29983;&#20102;&#38169;&#35823;&#65292;&#21487;&#20197;&#20107;&#20808;&#32422;&#23450;&#36820;&#22238;&#19968;&#20010;&#38169;&#35823;&#20195;&#30721;&#65292;&#36825;&#26679;&#65292;&#23601;&#21487;&#20197;&#30693;&#36947;&#26159;&#21542;&#26377;&#38169;&#65292;&#20197;&#21450;&#20986;&#38169;&#30340;&#21407;&#22240;&#12290;&#22312;&#25805;&#20316;&#31995;&#32479;&#25552;&#20379;&#30340;&#35843;&#29992;&#20013;&#65292;&#36820;&#22238;&#38169;&#35823;&#30721;&#38750;&#24120;&#24120;&#35265;&#12290;&#27604;&#22914;&#25171;&#24320;&#25991;&#20214;&#30340;&#20989;&#25968;<code>open()</code>&#65292;&#25104;&#21151;&#26102;&#36820;&#22238;&#25991;&#20214;&#25551;&#36848;&#31526;&#65288;&#23601;&#26159;&#19968;&#20010;&#25972;&#25968;&#65289;&#65292;&#20986;&#38169;&#26102;&#36820;&#22238;<code>-1</code>&#12290;</p>
<p>&#29992;&#38169;&#35823;&#30721;&#26469;&#34920;&#31034;&#26159;&#21542;&#20986;&#38169;&#21313;&#20998;&#19981;&#20415;&#65292;&#22240;&#20026;&#20989;&#25968;&#26412;&#36523;&#24212;&#35813;&#36820;&#22238;&#30340;&#27491;&#24120;&#32467;&#26524;&#21644;&#38169;&#35823;&#30721;&#28151;&#22312;&#19968;&#36215;&#65292;&#36896;&#25104;&#35843;&#29992;&#32773;&#24517;&#39035;&#29992;&#22823;&#37327;&#30340;&#20195;&#30721;&#26469;&#21028;&#26029;&#26159;&#21542;&#20986;&#38169;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> foo():
    r <span class="op">=</span> some_function()
    <span class="cf">if</span> r<span class="op">==</span>(<span class="op">-</span><span class="dv">1</span>):
        <span class="cf">return</span> (<span class="op">-</span><span class="dv">1</span>)
    <span class="co"># do something</span>
    <span class="cf">return</span> r

<span class="kw">def</span> bar():
    r <span class="op">=</span> foo()
    <span class="cf">if</span> r<span class="op">==</span>(<span class="op">-</span><span class="dv">1</span>):
        <span class="bu">print</span>(<span class="st">&#39;Error&#39;</span>)
    <span class="cf">else</span>:
        <span class="cf">pass</span></code></pre></div>
<p>&#19968;&#26086;&#20986;&#38169;&#65292;&#36824;&#35201;&#19968;&#32423;&#19968;&#32423;&#19978;&#25253;&#65292;&#30452;&#21040;&#26576;&#20010;&#20989;&#25968;&#21487;&#20197;&#22788;&#29702;&#35813;&#38169;&#35823;&#65288;&#27604;&#22914;&#65292;&#32473;&#29992;&#25143;&#36755;&#20986;&#19968;&#20010;&#38169;&#35823;&#20449;&#24687;&#65289;&#12290;</p>
<p>&#25152;&#20197;&#39640;&#32423;&#35821;&#35328;&#36890;&#24120;&#37117;&#20869;&#32622;&#20102;&#19968;&#22871;<code>try...except...finally...</code>&#30340;&#38169;&#35823;&#22788;&#29702;&#26426;&#21046;&#65292;Python&#20063;&#19981;&#20363;&#22806;&#12290;</p>
<h4 id="try">try</h4>
<p>&#35753;&#25105;&#20204;&#29992;&#19968;&#20010;&#20363;&#23376;&#26469;&#30475;&#30475;<code>try</code>&#30340;&#26426;&#21046;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>:
    <span class="bu">print</span>(<span class="st">&#39;try...&#39;</span>)
    r <span class="op">=</span> <span class="dv">10</span> <span class="op">/</span> <span class="dv">0</span>
    <span class="bu">print</span>(<span class="st">&#39;result:&#39;</span>, r)
<span class="cf">except</span> <span class="pp">ZeroDivisionError</span> <span class="im">as</span> e:
    <span class="bu">print</span>(<span class="st">&#39;except:&#39;</span>, e)
<span class="cf">finally</span>:
    <span class="bu">print</span>(<span class="st">&#39;finally...&#39;</span>)
<span class="bu">print</span>(<span class="st">&#39;END&#39;</span>)</code></pre></div>
<p>&#24403;&#25105;&#20204;&#35748;&#20026;&#26576;&#20123;&#20195;&#30721;&#21487;&#33021;&#20250;&#20986;&#38169;&#26102;&#65292;&#23601;&#21487;&#20197;&#29992;<code>try</code>&#26469;&#36816;&#34892;&#36825;&#27573;&#20195;&#30721;&#65292;&#22914;&#26524;&#25191;&#34892;&#20986;&#38169;&#65292;&#21017;&#21518;&#32493;&#20195;&#30721;&#19981;&#20250;&#32487;&#32493;&#25191;&#34892;&#65292;&#32780;&#26159;&#30452;&#25509;&#36339;&#36716;&#33267;&#38169;&#35823;&#22788;&#29702;&#20195;&#30721;&#65292;&#21363;<code>except</code>&#35821;&#21477;&#22359;&#65292;&#25191;&#34892;&#23436;<code>except</code>&#21518;&#65292;&#22914;&#26524;&#26377;<code>finally</code>&#35821;&#21477;&#22359;&#65292;&#21017;&#25191;&#34892;<code>finally</code>&#35821;&#21477;&#22359;&#65292;&#33267;&#27492;&#65292;&#25191;&#34892;&#23436;&#27605;&#12290;</p>
<p>&#19978;&#38754;&#30340;&#20195;&#30721;&#22312;&#35745;&#31639;<code>10 / 0</code>&#26102;&#20250;&#20135;&#29983;&#19968;&#20010;&#38500;&#27861;&#36816;&#31639;&#38169;&#35823;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>...
<span class="cf">except</span>: division by zero
<span class="cf">finally</span>...
END</code></pre></div>
<p>&#20174;&#36755;&#20986;&#21487;&#20197;&#30475;&#21040;&#65292;&#24403;&#38169;&#35823;&#21457;&#29983;&#26102;&#65292;&#21518;&#32493;&#35821;&#21477;<code>print('result:', r)</code>&#19981;&#20250;&#34987;&#25191;&#34892;&#65292;<code>except</code>&#30001;&#20110;&#25429;&#33719;&#21040;<code>ZeroDivisionError</code>&#65292;&#22240;&#27492;&#34987;&#25191;&#34892;&#12290;&#26368;&#21518;&#65292;<code>finally</code>&#35821;&#21477;&#34987;&#25191;&#34892;&#12290;&#28982;&#21518;&#65292;&#31243;&#24207;&#32487;&#32493;&#25353;&#29031;&#27969;&#31243;&#24448;&#19979;&#36208;&#12290;</p>
<p>&#22914;&#26524;&#25226;&#38500;&#25968;<code>0</code>&#25913;&#25104;<code>2</code>&#65292;&#21017;&#25191;&#34892;&#32467;&#26524;&#22914;&#19979;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>...
result: <span class="dv">5</span>
<span class="cf">finally</span>...
END</code></pre></div>
<p>&#30001;&#20110;&#27809;&#26377;&#38169;&#35823;&#21457;&#29983;&#65292;&#25152;&#20197;<code>except</code>&#35821;&#21477;&#22359;&#19981;&#20250;&#34987;&#25191;&#34892;&#65292;&#20294;&#26159;<code>finally</code>&#22914;&#26524;&#26377;&#65292;&#21017;&#19968;&#23450;&#20250;&#34987;&#25191;&#34892;&#65288;&#21487;&#20197;&#27809;&#26377;<code>finally</code>&#35821;&#21477;&#65289;&#12290;</p>
<p>&#20320;&#36824;&#21487;&#20197;&#29468;&#27979;&#65292;&#38169;&#35823;&#24212;&#35813;&#26377;&#24456;&#22810;&#31181;&#31867;&#65292;&#22914;&#26524;&#21457;&#29983;&#20102;&#19981;&#21516;&#31867;&#22411;&#30340;&#38169;&#35823;&#65292;&#24212;&#35813;&#30001;&#19981;&#21516;&#30340;<code>except</code>&#35821;&#21477;&#22359;&#22788;&#29702;&#12290;&#27809;&#38169;&#65292;&#21487;&#20197;&#26377;&#22810;&#20010;<code>except</code>&#26469;&#25429;&#33719;&#19981;&#21516;&#31867;&#22411;&#30340;&#38169;&#35823;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>:
    <span class="bu">print</span>(<span class="st">&#39;try...&#39;</span>)
    r <span class="op">=</span> <span class="dv">10</span> <span class="op">/</span> <span class="bu">int</span>(<span class="st">&#39;a&#39;</span>)
    <span class="bu">print</span>(<span class="st">&#39;result:&#39;</span>, r)
<span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:
    <span class="bu">print</span>(<span class="st">&#39;ValueError:&#39;</span>, e)
<span class="cf">except</span> <span class="pp">ZeroDivisionError</span> <span class="im">as</span> e:
    <span class="bu">print</span>(<span class="st">&#39;ZeroDivisionError:&#39;</span>, e)
<span class="cf">finally</span>:
    <span class="bu">print</span>(<span class="st">&#39;finally...&#39;</span>)
<span class="bu">print</span>(<span class="st">&#39;END&#39;</span>)</code></pre></div>
<p><code>int()</code>&#20989;&#25968;&#21487;&#33021;&#20250;&#25243;&#20986;<code>ValueError</code>&#65292;&#25152;&#20197;&#25105;&#20204;&#29992;&#19968;&#20010;<code>except</code>&#25429;&#33719;<code>ValueError</code>&#65292;&#29992;&#21478;&#19968;&#20010;<code>except</code>&#25429;&#33719;<code>ZeroDivisionError</code>&#12290;</p>
<p>&#27492;&#22806;&#65292;&#22914;&#26524;&#27809;&#26377;&#38169;&#35823;&#21457;&#29983;&#65292;&#21487;&#20197;&#22312;<code>except</code>&#35821;&#21477;&#22359;&#21518;&#38754;&#21152;&#19968;&#20010;<code>else</code>&#65292;&#24403;&#27809;&#26377;&#38169;&#35823;&#21457;&#29983;&#26102;&#65292;&#20250;&#33258;&#21160;&#25191;&#34892;<code>else</code>&#35821;&#21477;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>:
    <span class="bu">print</span>(<span class="st">&#39;try...&#39;</span>)
    r <span class="op">=</span> <span class="dv">10</span> <span class="op">/</span> <span class="bu">int</span>(<span class="st">&#39;2&#39;</span>)
    <span class="bu">print</span>(<span class="st">&#39;result:&#39;</span>, r)
<span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:
    <span class="bu">print</span>(<span class="st">&#39;ValueError:&#39;</span>, e)
<span class="cf">except</span> <span class="pp">ZeroDivisionError</span> <span class="im">as</span> e:
    <span class="bu">print</span>(<span class="st">&#39;ZeroDivisionError:&#39;</span>, e)
<span class="cf">else</span>:
    <span class="bu">print</span>(<span class="st">&#39;no error!&#39;</span>)
<span class="cf">finally</span>:
    <span class="bu">print</span>(<span class="st">&#39;finally...&#39;</span>)
<span class="bu">print</span>(<span class="st">&#39;END&#39;</span>)</code></pre></div>
<p>Python&#30340;&#38169;&#35823;&#20854;&#23454;&#20063;&#26159;<code>class</code>&#65292;&#25152;&#26377;&#30340;&#38169;&#35823;&#31867;&#22411;&#37117;&#32487;&#25215;&#33258;<code>BaseException</code>&#65292;&#25152;&#20197;&#22312;&#20351;&#29992;<code>except</code>&#26102;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#23427;&#19981;&#20294;&#25429;&#33719;&#35813;&#31867;&#22411;&#30340;&#38169;&#35823;&#65292;&#36824;&#25226;&#20854;&#23376;&#31867;&#20063;&#8220;&#19968;&#32593;&#25171;&#23613;&#8221;&#12290;&#27604;&#22914;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>:
    foo()
<span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:
    <span class="bu">print</span>(<span class="st">&#39;ValueError&#39;</span>)
<span class="cf">except</span> <span class="pp">UnicodeError</span> <span class="im">as</span> e:
    <span class="bu">print</span>(<span class="st">&#39;UnicodeError&#39;</span>)</code></pre></div>
<p>&#31532;&#20108;&#20010;<code>except</code>&#27704;&#36828;&#20063;&#25429;&#33719;&#19981;&#21040;<code>UnicodeError</code>&#65292;&#22240;&#20026;<code>UnicodeError</code>&#26159;<code>ValueError</code>&#30340;&#23376;&#31867;&#65292;&#22914;&#26524;&#26377;&#65292;&#20063;&#34987;&#31532;&#19968;&#20010;<code>except</code>&#32473;&#25429;&#33719;&#20102;&#12290;</p>
<p>Python&#25152;&#26377;&#30340;&#38169;&#35823;&#37117;&#26159;&#20174;<code>BaseException&#31867;</code>&#27966;&#29983;&#30340;&#65292;&#24120;&#35265;&#30340;&#38169;&#35823;&#31867;&#22411;&#21644;&#32487;&#25215;&#20851;&#31995;&#30475;&#36825;&#37324;&#65306;</p>
<p>https://docs.python.org/3/library/exceptions.html#exception-hierarchy</p>
<p>&#20351;&#29992;<code>try...except</code>&#25429;&#33719;&#38169;&#35823;&#36824;&#26377;&#19968;&#20010;&#24040;&#22823;&#30340;&#22909;&#22788;&#65292;&#23601;&#26159;&#21487;&#20197;&#36328;&#36234;&#22810;&#23618;&#35843;&#29992;&#65292;&#27604;&#22914;&#20989;&#25968;<code>main()</code>&#35843;&#29992;<code>foo()</code>&#65292;<code>foo()</code>&#35843;&#29992;<code>bar()</code>&#65292;&#32467;&#26524;<code>bar()</code>&#20986;&#38169;&#20102;&#65292;&#36825;&#26102;&#65292;&#21482;&#35201;<code>main()</code>&#25429;&#33719;&#21040;&#20102;&#65292;&#23601;&#21487;&#20197;&#22788;&#29702;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> foo(s):
    <span class="cf">return</span> <span class="dv">10</span> <span class="op">/</span> <span class="bu">int</span>(s)

<span class="kw">def</span> bar(s):
    <span class="cf">return</span> foo(s) <span class="op">*</span> <span class="dv">2</span>

<span class="kw">def</span> main():
    <span class="cf">try</span>:
        bar(<span class="st">&#39;0&#39;</span>)
    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:
        <span class="bu">print</span>(<span class="st">&#39;Error:&#39;</span>, e)
    <span class="cf">finally</span>:
        <span class="bu">print</span>(<span class="st">&#39;finally...&#39;</span>)</code></pre></div>
<p>&#20063;&#23601;&#26159;&#35828;&#65292;&#19981;&#38656;&#35201;&#22312;&#27599;&#20010;&#21487;&#33021;&#20986;&#38169;&#30340;&#22320;&#26041;&#21435;&#25429;&#33719;&#38169;&#35823;&#65292;&#21482;&#35201;&#22312;&#21512;&#36866;&#30340;&#23618;&#27425;&#21435;&#25429;&#33719;&#38169;&#35823;&#23601;&#21487;&#20197;&#20102;&#12290;&#36825;&#26679;&#19968;&#26469;&#65292;&#23601;&#22823;&#22823;&#20943;&#23569;&#20102;&#20889;<code>try...except...finally</code>&#30340;&#40635;&#28902;&#12290; &#35843;&#29992;&#22534;&#26632;</p>
<p>&#22914;&#26524;&#38169;&#35823;&#27809;&#26377;&#34987;&#25429;&#33719;&#65292;&#23427;&#23601;&#20250;&#19968;&#30452;&#24448;&#19978;&#25243;&#65292;&#26368;&#21518;&#34987;Python&#35299;&#37322;&#22120;&#25429;&#33719;&#65292;&#25171;&#21360;&#19968;&#20010;&#38169;&#35823;&#20449;&#24687;&#65292;&#28982;&#21518;&#31243;&#24207;&#36864;&#20986;&#12290;&#26469;&#30475;&#30475;<code>err.py</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># err.py:</span>
<span class="kw">def</span> foo(s):
    <span class="cf">return</span> <span class="dv">10</span> <span class="op">/</span> <span class="bu">int</span>(s)

<span class="kw">def</span> bar(s):
    <span class="cf">return</span> foo(s) <span class="op">*</span> <span class="dv">2</span>

<span class="kw">def</span> main():
    bar(<span class="st">&#39;0&#39;</span>)

main()</code></pre></div>
<p>&#25191;&#34892;&#65292;&#32467;&#26524;&#22914;&#19979;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">$ python3 err.py
Traceback (most recent call last):
  File <span class="st">&quot;err.py&quot;</span>, line <span class="dv">11</span>, <span class="op">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span>
    main()
  File <span class="st">&quot;err.py&quot;</span>, line <span class="dv">9</span>, <span class="op">in</span> main
    bar(<span class="st">&#39;0&#39;</span>)
  File <span class="st">&quot;err.py&quot;</span>, line <span class="dv">6</span>, <span class="op">in</span> bar
    <span class="cf">return</span> foo(s) <span class="op">*</span> <span class="dv">2</span>
  File <span class="st">&quot;err.py&quot;</span>, line <span class="dv">3</span>, <span class="op">in</span> foo
    <span class="cf">return</span> <span class="dv">10</span> <span class="op">/</span> <span class="bu">int</span>(s)
<span class="pp">ZeroDivisionError</span>: division by zero</code></pre></div>
<p>&#20986;&#38169;&#24182;&#19981;&#21487;&#24597;&#65292;&#21487;&#24597;&#30340;&#26159;&#19981;&#30693;&#36947;&#21738;&#37324;&#20986;&#38169;&#20102;&#12290;&#35299;&#35835;&#38169;&#35823;&#20449;&#24687;&#26159;&#23450;&#20301;&#38169;&#35823;&#30340;&#20851;&#38190;&#12290;&#25105;&#20204;&#20174;&#19978;&#24448;&#19979;&#21487;&#20197;&#30475;&#21040;&#25972;&#20010;&#38169;&#35823;&#30340;&#35843;&#29992;&#20989;&#25968;&#38142;&#65306;</p>
<ul>
<li><p>&#38169;&#35823;&#20449;&#24687;&#31532;1&#34892;&#65306;<code>Traceback (most recent call last)</code>: &#21578;&#35785;&#25105;&#20204;&#36825;&#26159;&#38169;&#35823;&#30340;&#36319;&#36394;&#20449;&#24687;&#12290;</p></li>
<li><p>&#31532;2~3&#34892;&#65306;<code>File &quot;err.py&quot;, line 11, in &lt;module&gt;</code>, <code>main()</code>: &#35843;&#29992;<code>main()</code>&#20986;&#38169;&#20102;&#65292;&#22312;&#20195;&#30721;&#25991;&#20214;<code>err.py</code>&#30340;&#31532;11&#34892;&#20195;&#30721;&#65292;&#20294;&#21407;&#22240;&#26159;&#31532;9&#34892;&#65306;</p></li>
</ul>
<p><code>File &quot;err.py&quot;, line 9, in main</code>, <code>bar('0')</code>: &#35843;&#29992;<code>bar('0')</code>&#20986;&#38169;&#20102;&#65292;&#22312;&#20195;&#30721;&#25991;&#20214;<code>err.py</code>&#30340;&#31532;9&#34892;&#20195;&#30721;&#65292;&#20294;&#21407;&#22240;&#26159;&#31532;6&#34892;&#65306;<code>File &quot;err.py&quot;, line 6, in bar</code>, <code>return foo(s) * 2</code>,</p>
<p>&#21407;&#22240;&#26159;<code>return foo(s) * 2</code>&#36825;&#20010;&#35821;&#21477;&#20986;&#38169;&#20102;&#65292;&#20294;&#36825;&#36824;&#19981;&#26159;&#26368;&#32456;&#21407;&#22240;&#65292;&#32487;&#32493;&#24448;&#19979;&#30475;&#65306;<code>File &quot;err.py&quot;, line 3, in foo</code>, <code>return 10 / int(s)</code>, &#21407;&#22240;&#26159;<code>return 10 / int(s)</code>&#36825;&#20010;&#35821;&#21477;&#20986;&#38169;&#20102;&#65292;&#36825;&#26159;&#38169;&#35823;&#20135;&#29983;&#30340;&#28304;&#22836;&#65292;&#22240;&#20026;&#19979;&#38754;&#25171;&#21360;&#20102;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="pp">ZeroDivisionError</span>: integer division <span class="op">or</span> modulo by zero</code></pre></div>
<p>&#26681;&#25454;&#38169;&#35823;&#31867;&#22411;<code>ZeroDivisionError</code>&#65292;&#25105;&#20204;&#21028;&#26029;&#65292;<code>int(s)</code>&#26412;&#36523;&#24182;&#27809;&#26377;&#20986;&#38169;&#65292;&#20294;&#26159;<code>int(s)</code>&#36820;&#22238;0&#65292;&#22312;&#35745;&#31639;<code>10 / 0</code>&#26102;&#20986;&#38169;&#65292;&#33267;&#27492;&#65292;&#25214;&#21040;&#38169;&#35823;&#28304;&#22836;&#12290;</p>
<h4 id="&#35760;&#24405;&#38169;&#35823;">&#35760;&#24405;&#38169;&#35823;</h4>
<p>&#22914;&#26524;&#19981;&#25429;&#33719;&#38169;&#35823;&#65292;&#33258;&#28982;&#21487;&#20197;&#35753;Python&#35299;&#37322;&#22120;&#26469;&#25171;&#21360;&#20986;&#38169;&#35823;&#22534;&#26632;&#65292;&#20294;&#31243;&#24207;&#20063;&#34987;&#32467;&#26463;&#20102;&#12290;&#26082;&#28982;&#25105;&#20204;&#33021;&#25429;&#33719;&#38169;&#35823;&#65292;&#23601;&#21487;&#20197;&#25226;&#38169;&#35823;&#22534;&#26632;&#25171;&#21360;&#20986;&#26469;&#65292;&#28982;&#21518;&#20998;&#26512;&#38169;&#35823;&#21407;&#22240;&#65292;&#21516;&#26102;&#65292;&#35753;&#31243;&#24207;&#32487;&#32493;&#25191;&#34892;&#19979;&#21435;&#12290;</p>
<p>Python&#20869;&#32622;&#30340;<code>logging</code>&#27169;&#22359;&#21487;&#20197;&#38750;&#24120;&#23481;&#26131;&#22320;&#35760;&#24405;&#38169;&#35823;&#20449;&#24687;&#65306;</p>
<pre class="pyhon"><code># err_logging.py

import logging

def foo(s):
    return 10 / int(s)

def bar(s):
    return foo(s) * 2

def main():
    try:
        bar(&#39;0&#39;)
    except Exception as e:
        logging.exception(e)

main()
print(&#39;END&#39;)</code></pre>
<p>&#21516;&#26679;&#26159;&#20986;&#38169;&#65292;&#20294;&#31243;&#24207;&#25171;&#21360;&#23436;&#38169;&#35823;&#20449;&#24687;&#21518;&#20250;&#32487;&#32493;&#25191;&#34892;&#65292;&#24182;&#27491;&#24120;&#36864;&#20986;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">python3</span> err_logging.py
<span class="kw">ERROR</span>:root:division by zero
<span class="kw">Traceback</span> (most recent call last)<span class="kw">:</span>
  <span class="kw">File</span> <span class="st">&quot;err_logging.py&quot;</span>, line 13, in main
    <span class="kw">bar</span>(<span class="st">&#39;0&#39;</span>)
  <span class="kw">File</span> <span class="st">&quot;err_logging.py&quot;</span>, line 9, in bar
    <span class="kw">return</span> foo(s) <span class="kw">*</span> 2
  <span class="kw">File</span> <span class="st">&quot;err_logging.py&quot;</span>, line 6, in foo
    <span class="kw">return</span> 10 / int(s)
<span class="kw">ZeroDivisionError</span>: division by zero
<span class="kw">END</span></code></pre></div>
<p>&#36890;&#36807;&#37197;&#32622;&#65292;<code>logging</code>&#36824;&#21487;&#20197;&#25226;&#38169;&#35823;&#35760;&#24405;&#21040;&#26085;&#24535;&#25991;&#20214;&#37324;&#65292;&#26041;&#20415;&#20107;&#21518;&#25490;&#26597;&#12290;</p>
<h4 id="&#25243;&#20986;&#38169;&#35823;">&#25243;&#20986;&#38169;&#35823;</h4>
<p>&#22240;&#20026;&#38169;&#35823;&#26159;<code>class</code>&#65292;&#25429;&#33719;&#19968;&#20010;&#38169;&#35823;&#23601;&#26159;&#25429;&#33719;&#21040;&#35813;<code>class</code>&#30340;&#19968;&#20010;&#23454;&#20363;&#12290;&#22240;&#27492;&#65292;&#38169;&#35823;&#24182;&#19981;&#26159;&#20973;&#31354;&#20135;&#29983;&#30340;&#65292;&#32780;&#26159;&#26377;&#24847;&#21019;&#24314;&#24182;&#25243;&#20986;&#30340;&#12290;Python&#30340;&#20869;&#32622;&#20989;&#25968;&#20250;&#25243;&#20986;&#24456;&#22810;&#31867;&#22411;&#30340;&#38169;&#35823;&#65292;&#25105;&#20204;&#33258;&#24049;&#32534;&#20889;&#30340;&#20989;&#25968;&#20063;&#21487;&#20197;&#25243;&#20986;&#38169;&#35823;&#12290;</p>
<p>&#22914;&#26524;&#35201;&#25243;&#20986;&#38169;&#35823;&#65292;&#39318;&#20808;&#26681;&#25454;&#38656;&#35201;&#65292;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;&#38169;&#35823;&#30340;<code>class</code>&#65292;&#36873;&#25321;&#22909;&#32487;&#25215;&#20851;&#31995;&#65292;&#28982;&#21518;&#65292;&#29992;<code>raise</code>&#35821;&#21477;&#25243;&#20986;&#19968;&#20010;&#38169;&#35823;&#30340;&#23454;&#20363;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># err_raise.py</span>
<span class="kw">class</span> FooError(<span class="pp">ValueError</span>):
    <span class="cf">pass</span>

<span class="kw">def</span> foo(s):
    n <span class="op">=</span> <span class="bu">int</span>(s)
    <span class="cf">if</span> n<span class="op">==</span><span class="dv">0</span>:
        <span class="cf">raise</span> FooError(<span class="st">&#39;invalid value: </span><span class="sc">%s</span><span class="st">&#39;</span> <span class="op">%</span> s)
    <span class="cf">return</span> <span class="dv">10</span> <span class="op">/</span> n

foo(<span class="st">&#39;0&#39;</span>)</code></pre></div>
<p>&#25191;&#34892;&#65292;&#21487;&#20197;&#26368;&#21518;&#36319;&#36394;&#21040;&#25105;&#20204;&#33258;&#24049;&#23450;&#20041;&#30340;&#38169;&#35823;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">python3</span> err_raise.py 
<span class="kw">Traceback</span> (most recent call last)<span class="kw">:</span>
  <span class="kw">File</span> <span class="st">&quot;err_throw.py&quot;</span>, line 11, in <span class="kw">&lt;</span>module<span class="kw">&gt;</span>
    <span class="kw">foo</span>(<span class="st">&#39;0&#39;</span>)
  <span class="kw">File</span> <span class="st">&quot;err_throw.py&quot;</span>, line 8, in foo
    <span class="kw">raise</span> FooError(<span class="st">&#39;invalid value: %s&#39;</span> % s)
<span class="kw">__main__.FooError</span>: invalid value: 0</code></pre></div>
<p>&#21482;&#26377;&#22312;&#24517;&#35201;&#30340;&#26102;&#20505;&#25165;&#23450;&#20041;&#25105;&#20204;&#33258;&#24049;&#30340;&#38169;&#35823;&#31867;&#22411;&#12290;&#22914;&#26524;&#21487;&#20197;&#36873;&#25321;Python&#24050;&#26377;&#30340;&#20869;&#32622;&#30340;&#38169;&#35823;&#31867;&#22411;&#65288;&#27604;&#22914;<code>ValueError</code>&#65292;<code>TypeError</code>&#65289;&#65292;&#23613;&#37327;&#20351;&#29992;Python&#20869;&#32622;&#30340;&#38169;&#35823;&#31867;&#22411;&#12290;</p>
<p>&#26368;&#21518;&#65292;&#25105;&#20204;&#26469;&#30475;&#21478;&#19968;&#31181;&#38169;&#35823;&#22788;&#29702;&#30340;&#26041;&#24335;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># err_reraise.py</span>

<span class="kw">def</span> foo(s):
    n <span class="op">=</span> <span class="bu">int</span>(s)
    <span class="cf">if</span> n<span class="op">==</span><span class="dv">0</span>:
        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;invalid value: </span><span class="sc">%s</span><span class="st">&#39;</span> <span class="op">%</span> s)
    <span class="cf">return</span> <span class="dv">10</span> <span class="op">/</span> n

<span class="kw">def</span> bar():
    <span class="cf">try</span>:
        foo(<span class="st">&#39;0&#39;</span>)
    <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:
        <span class="bu">print</span>(<span class="st">&#39;ValueError!&#39;</span>)
        <span class="cf">raise</span>

bar()</code></pre></div>
<p>&#22312;<code>bar()</code>&#20989;&#25968;&#20013;&#65292;&#25105;&#20204;&#26126;&#26126;&#24050;&#32463;&#25429;&#33719;&#20102;&#38169;&#35823;&#65292;&#20294;&#26159;&#65292;&#25171;&#21360;&#19968;&#20010;<code>ValueError!</code>&#21518;&#65292;&#21448;&#25226;&#38169;&#35823;&#36890;&#36807;<code>raise</code>&#35821;&#21477;&#25243;&#20986;&#21435;&#20102;&#65292;&#36825;&#19981;&#26377;&#30149;&#20040;&#65311;</p>
<p>&#20854;&#23454;&#36825;&#31181;&#38169;&#35823;&#22788;&#29702;&#26041;&#24335;&#19981;&#20294;&#27809;&#30149;&#65292;&#32780;&#19988;&#30456;&#24403;&#24120;&#35265;&#12290;&#25429;&#33719;&#38169;&#35823;&#30446;&#30340;&#21482;&#26159;&#35760;&#24405;&#19968;&#19979;&#65292;&#20415;&#20110;&#21518;&#32493;&#36861;&#36394;&#12290;&#20294;&#26159;&#65292;&#30001;&#20110;&#24403;&#21069;&#20989;&#25968;&#19981;&#30693;&#36947;&#24212;&#35813;&#24590;&#20040;&#22788;&#29702;&#35813;&#38169;&#35823;&#65292;&#25152;&#20197;&#65292;&#26368;&#24688;&#24403;&#30340;&#26041;&#24335;&#26159;&#32487;&#32493;&#24448;&#19978;&#25243;&#65292;&#35753;&#39030;&#23618;&#35843;&#29992;&#32773;&#21435;&#22788;&#29702;&#12290;&#22909;&#27604;&#19968;&#20010;&#21592;&#24037;&#22788;&#29702;&#19981;&#20102;&#19968;&#20010;&#38382;&#39064;&#26102;&#65292;&#23601;&#25226;&#38382;&#39064;&#25243;&#32473;&#20182;&#30340;&#32769;&#26495;&#65292;&#22914;&#26524;&#20182;&#30340;&#32769;&#26495;&#20063;&#22788;&#29702;&#19981;&#20102;&#65292;&#23601;&#19968;&#30452;&#24448;&#19978;&#25243;&#65292;&#26368;&#32456;&#20250;&#25243;&#32473;CEO&#21435;&#22788;&#29702;&#12290;</p>
<p><code>raise</code>&#35821;&#21477;&#22914;&#26524;&#19981;&#24102;&#21442;&#25968;&#65292;&#23601;&#20250;&#25226;&#24403;&#21069;&#38169;&#35823;&#21407;&#26679;&#25243;&#20986;&#12290;&#27492;&#22806;&#65292;&#22312;<code>except</code>&#20013;<code>raise</code>&#19968;&#20010;<code>Error</code>&#65292;&#36824;&#21487;&#20197;&#25226;&#19968;&#31181;&#31867;&#22411;&#30340;&#38169;&#35823;&#36716;&#21270;&#25104;&#21478;&#19968;&#31181;&#31867;&#22411;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">try</span>:
    <span class="dv">10</span> <span class="op">/</span> <span class="dv">0</span>
<span class="cf">except</span> <span class="pp">ZeroDivisionError</span>:
    <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;input error!&#39;</span>)</code></pre></div>
<p>&#21482;&#35201;&#26159;&#21512;&#29702;&#30340;&#36716;&#25442;&#36923;&#36753;&#23601;&#21487;&#20197;&#65292;&#20294;&#26159;&#65292;&#20915;&#19981;&#24212;&#35813;&#25226;&#19968;&#20010;<code>IOError</code>&#36716;&#25442;&#25104;&#27627;&#19981;&#30456;&#24178;&#30340;<code>ValueError</code>&#12290;</p>
<h4 id="&#23567;&#32467;">&#23567;&#32467;</h4>
<p>Python&#20869;&#32622;&#30340;<code>try...except...finally</code>&#29992;&#26469;&#22788;&#29702;&#38169;&#35823;&#21313;&#20998;&#26041;&#20415;&#12290;&#20986;&#38169;&#26102;&#65292;&#20250;&#20998;&#26512;&#38169;&#35823;&#20449;&#24687;&#24182;&#23450;&#20301;&#38169;&#35823;&#21457;&#29983;&#30340;&#20195;&#30721;&#20301;&#32622;&#25165;&#26159;&#26368;&#20851;&#38190;&#30340;&#12290;</p>
<p>&#31243;&#24207;&#20063;&#21487;&#20197;&#20027;&#21160;&#25243;&#20986;&#38169;&#35823;&#65292;&#35753;&#35843;&#29992;&#32773;&#26469;&#22788;&#29702;&#30456;&#24212;&#30340;&#38169;&#35823;&#12290;&#20294;&#26159;&#65292;&#24212;&#35813;&#22312;&#25991;&#26723;&#20013;&#20889;&#28165;&#26970;&#21487;&#33021;&#20250;&#25243;&#20986;&#21738;&#20123;&#38169;&#35823;&#65292;&#20197;&#21450;&#38169;&#35823;&#20135;&#29983;&#30340;&#21407;&#22240;&#12290;</p>
<h3 id="&#35843;&#35797;">11.2 &#35843;&#35797;</h3>
<p>&#31243;&#24207;&#33021;&#19968;&#27425;&#20889;&#23436;&#24182;&#27491;&#24120;&#36816;&#34892;&#30340;&#27010;&#29575;&#24456;&#23567;&#65292;&#22522;&#26412;&#19981;&#36229;&#36807;1%&#12290;&#24635;&#20250;&#26377;&#21508;&#31181;&#21508;&#26679;&#30340;bug&#38656;&#35201;&#20462;&#27491;&#12290;&#26377;&#30340;bug&#24456;&#31616;&#21333;&#65292;&#30475;&#30475;&#38169;&#35823;&#20449;&#24687;&#23601;&#30693;&#36947;&#65292;&#26377;&#30340;bug&#24456;&#22797;&#26434;&#65292;&#25105;&#20204;&#38656;&#35201;&#30693;&#36947;&#20986;&#38169;&#26102;&#65292;&#21738;&#20123;&#21464;&#37327;&#30340;&#20540;&#26159;&#27491;&#30830;&#30340;&#65292;&#21738;&#20123;&#21464;&#37327;&#30340;&#20540;&#26159;&#38169;&#35823;&#30340;&#65292;&#22240;&#27492;&#65292;&#38656;&#35201;&#19968;&#25972;&#22871;&#35843;&#35797;&#31243;&#24207;&#30340;&#25163;&#27573;&#26469;&#20462;&#22797;bug&#12290;</p>
<p>&#31532;&#19968;&#31181;&#26041;&#27861;&#31616;&#21333;&#30452;&#25509;&#31895;&#26292;&#26377;&#25928;&#65292;&#23601;&#26159;&#29992;<code>print()</code>&#25226;&#21487;&#33021;&#26377;&#38382;&#39064;&#30340;&#21464;&#37327;&#25171;&#21360;&#20986;&#26469;&#30475;&#30475;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> foo(s):
    n <span class="op">=</span> <span class="bu">int</span>(s)
    <span class="bu">print</span>(<span class="st">&#39;&gt;&gt;&gt; n = </span><span class="sc">%d</span><span class="st">&#39;</span> <span class="op">%</span> n)
    <span class="cf">return</span> <span class="dv">10</span> <span class="op">/</span> n

<span class="kw">def</span> main():
    foo(<span class="st">&#39;0&#39;</span>)

main()</code></pre></div>
<p>&#25191;&#34892;&#21518;&#22312;&#36755;&#20986;&#20013;&#26597;&#25214;&#25171;&#21360;&#30340;&#21464;&#37327;&#20540;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">$ python3 err.py
<span class="op">&gt;&gt;&gt;</span> n <span class="op">=</span> <span class="dv">0</span>
Traceback (most recent call last):
  ...
<span class="pp">ZeroDivisionError</span>: integer division <span class="op">or</span> modulo by zero</code></pre></div>
<p>&#29992;<code>print()</code>&#26368;&#22823;&#30340;&#22351;&#22788;&#26159;&#23558;&#26469;&#36824;&#24471;&#21024;&#25481;&#23427;&#65292;&#24819;&#24819;&#31243;&#24207;&#37324;&#21040;&#22788;&#37117;&#26159;<code>print()</code>&#65292;&#36816;&#34892;&#32467;&#26524;&#20063;&#20250;&#21253;&#21547;&#24456;&#22810;&#22403;&#22334;&#20449;&#24687;&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;&#21448;&#26377;&#31532;&#20108;&#31181;&#26041;&#27861;&#12290; &#26029;&#35328;</p>
<p>&#20961;&#26159;&#29992;<code>print()</code>&#26469;&#36741;&#21161;&#26597;&#30475;&#30340;&#22320;&#26041;&#65292;&#37117;&#21487;&#20197;&#29992;&#26029;&#35328;<code>&#65288;assert&#65289;</code>&#26469;&#26367;&#20195;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> foo(s):
    n <span class="op">=</span> <span class="bu">int</span>(s)
    <span class="cf">assert</span> n <span class="op">!=</span> <span class="dv">0</span>, <span class="st">&#39;n is zero!&#39;</span>
    <span class="cf">return</span> <span class="dv">10</span> <span class="op">/</span> n

<span class="kw">def</span> main():
    foo(<span class="st">&#39;0&#39;</span>)</code></pre></div>
<p><code>assert</code>&#30340;&#24847;&#24605;&#26159;&#65292;&#34920;&#36798;&#24335;<code>n != 0</code>&#24212;&#35813;&#26159;True&#65292;&#21542;&#21017;&#65292;&#26681;&#25454;&#31243;&#24207;&#36816;&#34892;&#30340;&#36923;&#36753;&#65292;&#21518;&#38754;&#30340;&#20195;&#30721;&#32943;&#23450;&#20250;&#20986;&#38169;&#12290;</p>
<p>&#22914;&#26524;&#26029;&#35328;&#22833;&#36133;&#65292;<code>assert</code>&#35821;&#21477;&#26412;&#36523;&#23601;&#20250;&#25243;&#20986;<code>AssertionError</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">$ python3 err.py
Traceback (most recent call last):
  ...
<span class="pp">AssertionError</span>: n <span class="op">is</span> zero<span class="op">!</span></code></pre></div>
<p>&#31243;&#24207;&#20013;&#22914;&#26524;&#21040;&#22788;&#20805;&#26021;&#30528;<code>assert</code>&#65292;&#21644;<code>print()</code>&#30456;&#27604;&#20063;&#22909;&#19981;&#21040;&#21738;&#21435;&#12290;&#19981;&#36807;&#65292;&#21551;&#21160;Python&#35299;&#37322;&#22120;&#26102;&#21487;&#20197;&#29992;<code>-O</code>&#21442;&#25968;&#26469;&#20851;&#38381;<code>assert</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">$ python3 <span class="op">-</span>O err.py
Traceback (most recent call last):
  ...
<span class="pp">ZeroDivisionError</span>: division by zero</code></pre></div>
<p>&#20851;&#38381;&#21518;&#65292;&#20320;&#21487;&#20197;&#25226;&#25152;&#26377;&#30340;<code>assert</code>&#35821;&#21477;&#24403;&#25104;<code>pass</code>&#26469;&#30475;&#12290;</p>
<h4 id="logging">logging</h4>
<p>&#25226;<code>print()</code>&#26367;&#25442;&#20026;<code>logging</code>&#26159;&#31532;3&#31181;&#26041;&#24335;&#65292;&#21644;<code>assert</code>&#27604;&#65292;<code>logging</code>&#19981;&#20250;&#25243;&#20986;&#38169;&#35823;&#65292;&#32780;&#19988;&#21487;&#20197;&#36755;&#20986;&#21040;&#25991;&#20214;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> logging

s <span class="op">=</span> <span class="st">&#39;0&#39;</span>
n <span class="op">=</span> <span class="bu">int</span>(s)
logging.info(<span class="st">&#39;n = </span><span class="sc">%d</span><span class="st">&#39;</span> <span class="op">%</span> n)
<span class="bu">print</span>(<span class="dv">10</span> <span class="op">/</span> n)</code></pre></div>
<p><code>logging.info()</code>&#23601;&#21487;&#20197;&#36755;&#20986;&#19968;&#27573;&#25991;&#26412;&#12290;&#36816;&#34892;&#65292;&#21457;&#29616;&#38500;&#20102;<code>ZeroDivisionError</code>&#65292;&#27809;&#26377;&#20219;&#20309;&#20449;&#24687;&#12290;&#24590;&#20040;&#22238;&#20107;&#65311;</p>
<p>&#21035;&#24613;&#65292;&#22312;<code>import logging</code>&#20043;&#21518;&#28155;&#21152;&#19968;&#34892;&#37197;&#32622;&#20877;&#35797;&#35797;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> logging
logging.basicConfig(level<span class="op">=</span>logging.INFO)</code></pre></div>
<p>&#30475;&#21040;&#36755;&#20986;&#20102;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">python3</span> err.py
<span class="kw">INFO</span>:root:n = 0
<span class="kw">Traceback</span> (most recent call last)<span class="kw">:</span>
  <span class="kw">File</span> <span class="st">&quot;err.py&quot;</span>, line 8, in <span class="kw">&lt;</span>module<span class="kw">&gt;</span>
    <span class="kw">print</span> 10 / n
<span class="kw">ZeroDivisionError</span>: division by zero</code></pre></div>
<p>&#36825;&#23601;&#26159;<code>logging</code>&#30340;&#22909;&#22788;&#65292;&#23427;&#20801;&#35768;&#20320;&#25351;&#23450;&#35760;&#24405;&#20449;&#24687;&#30340;&#32423;&#21035;&#65292;&#26377;<code>debug&#65292;info&#65292;warning&#65292;error</code>&#31561;&#20960;&#20010;&#32423;&#21035;&#65292;&#24403;&#25105;&#20204;&#25351;&#23450;<code>level=INFO</code>&#26102;&#65292;<code>logging.debug</code>&#23601;&#19981;&#36215;&#20316;&#29992;&#20102;&#12290;&#21516;&#29702;&#65292;&#25351;&#23450;<code>level=WARNING</code>&#21518;&#65292;<code>debug</code>&#21644;<code>info</code>&#23601;&#19981;&#36215;&#20316;&#29992;&#20102;&#12290;&#36825;&#26679;&#19968;&#26469;&#65292;&#20320;&#21487;&#20197;&#25918;&#24515;&#22320;&#36755;&#20986;&#19981;&#21516;&#32423;&#21035;&#30340;&#20449;&#24687;&#65292;&#20063;&#19981;&#29992;&#21024;&#38500;&#65292;&#26368;&#21518;&#32479;&#19968;&#25511;&#21046;&#36755;&#20986;&#21738;&#20010;&#32423;&#21035;&#30340;&#20449;&#24687;&#12290;</p>
<p><code>logging</code>&#30340;&#21478;&#19968;&#20010;&#22909;&#22788;&#26159;&#36890;&#36807;&#31616;&#21333;&#30340;&#37197;&#32622;&#65292;&#19968;&#26465;&#35821;&#21477;&#21487;&#20197;&#21516;&#26102;&#36755;&#20986;&#21040;&#19981;&#21516;&#30340;&#22320;&#26041;&#65292;&#27604;&#22914;<code>console</code>&#21644;&#25991;&#20214;&#12290;</p>
<h4 id="pdb">pdb</h4>
<p>&#31532;4&#31181;&#26041;&#24335;&#26159;&#21551;&#21160;Python&#30340;&#35843;&#35797;&#22120;<code>pdb</code>&#65292;&#35753;&#31243;&#24207;&#20197;&#21333;&#27493;&#26041;&#24335;&#36816;&#34892;&#65292;&#21487;&#20197;&#38543;&#26102;&#26597;&#30475;&#36816;&#34892;&#29366;&#24577;&#12290;&#25105;&#20204;&#20808;&#20934;&#22791;&#22909;&#31243;&#24207;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># err.py</span>
s <span class="op">=</span> <span class="st">&#39;0&#39;</span>
n <span class="op">=</span> <span class="bu">int</span>(s)
<span class="bu">print</span> <span class="dv">10</span> <span class="op">/</span> n</code></pre></div>
<p>&#28982;&#21518;&#21551;&#21160;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">python3</span> -m pdb err.py
<span class="kw">&gt;</span> <span class="kw">/Users/michael/Github/learn-python3/samples/debug</span>/<span class="kw">err.py</span>(2)<span class="kw">&lt;module&gt;()</span>
<span class="kw">-&gt;</span> s = <span class="st">&#39;0&#39;</span></code></pre></div>
<p>&#20197;&#21442;&#25968;<code>-m pdb</code>&#21551;&#21160;&#21518;&#65292;<code>pdb</code>&#23450;&#20301;&#21040;&#19979;&#19968;&#27493;&#35201;&#25191;&#34892;&#30340;&#20195;&#30721;<code>-&gt; s = '0'</code>&#12290;&#36755;&#20837;&#21629;&#20196;<code>l</code>&#26469;&#26597;&#30475;&#20195;&#30721;&#65306;</p>
<pre class="pdb"><code>(Pdb) l
  1     # err.py
  2  -&gt; s = &#39;0&#39;
  3     n = int(s)
  4     print 10 / n</code></pre>
<p>&#36755;&#20837;&#21629;&#20196;<code>n</code>&#21487;&#20197;&#21333;&#27493;&#25191;&#34892;&#20195;&#30721;&#65306;</p>
<pre class="pdb"><code>(Pdb) n
&gt; /Users/michael/Github/learn-python3/samples/debug/err.py(3)&lt;module&gt;()
-&gt; n = int(s)
(Pdb) n
&gt; /Users/michael/Github/learn-python3/samples/debug/err.py(4)&lt;module&gt;()
-&gt; print 10 / n</code></pre>
<p>&#20219;&#20309;&#26102;&#20505;&#37117;&#21487;&#20197;&#36755;&#20837;&#21629;&#20196;<code>p &#21464;&#37327;&#21517;</code>&#26469;&#26597;&#30475;&#21464;&#37327;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">(Pdb) p s
<span class="co">&#39;0&#39;</span>
(Pdb) p n
<span class="dv">0</span></code></pre></div>
<p>&#36755;&#20837;&#21629;&#20196;<code>q</code>&#32467;&#26463;&#35843;&#35797;&#65292;&#36864;&#20986;&#31243;&#24207;&#65306;</p>
<p><code>(Pdb) q</code></p>
<p>&#36825;&#31181;&#36890;&#36807;<code>pdb</code>&#22312;&#21629;&#20196;&#34892;&#35843;&#35797;&#30340;&#26041;&#27861;&#29702;&#35770;&#19978;&#26159;&#19975;&#33021;&#30340;&#65292;&#20294;&#23454;&#22312;&#26159;&#22826;&#40635;&#28902;&#20102;&#65292;&#22914;&#26524;&#26377;&#19968;&#21315;&#34892;&#20195;&#30721;&#65292;&#35201;&#36816;&#34892;&#21040;&#31532;999&#34892;&#24471;&#25970;&#22810;&#23569;&#21629;&#20196;&#21834;&#12290;&#36824;&#22909;&#65292;&#25105;&#20204;&#36824;&#26377;&#21478;&#19968;&#31181;&#35843;&#35797;&#26041;&#27861;&#12290;</p>
<p><code>pdb.set_trace()</code></p>
<p>&#36825;&#20010;&#26041;&#27861;&#20063;&#26159;&#29992;<code>pdb</code>&#65292;&#20294;&#26159;&#19981;&#38656;&#35201;&#21333;&#27493;&#25191;&#34892;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;<code>import pdb</code>&#65292;&#28982;&#21518;&#65292;&#22312;&#21487;&#33021;&#20986;&#38169;&#30340;&#22320;&#26041;&#25918;&#19968;&#20010;<code>pdb.set_trace()</code>&#65292;&#23601;&#21487;&#20197;&#35774;&#32622;&#19968;&#20010;&#26029;&#28857;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># err.py</span>
<span class="im">import</span> pdb

s <span class="op">=</span> <span class="st">&#39;0&#39;</span>
n <span class="op">=</span> <span class="bu">int</span>(s)
pdb.set_trace() <span class="co"># &#36816;&#34892;&#21040;&#36825;&#37324;&#20250;&#33258;&#21160;&#26242;&#20572;</span>
<span class="bu">print</span> <span class="dv">10</span> <span class="op">/</span> n</code></pre></div>
<p>&#36816;&#34892;&#20195;&#30721;&#65292;&#31243;&#24207;&#20250;&#33258;&#21160;&#22312;<code>pdb.set_trace()</code>&#26242;&#20572;&#24182;&#36827;&#20837;<code>pdb</code>&#35843;&#35797;&#29615;&#22659;&#65292;&#21487;&#20197;&#29992;&#21629;&#20196;<code>p</code>&#26597;&#30475;&#21464;&#37327;&#65292;&#25110;&#32773;&#29992;&#21629;&#20196;<code>c</code>&#32487;&#32493;&#36816;&#34892;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">$ python3 err.py 
<span class="op">&gt;</span> <span class="op">/</span>Users<span class="op">/</span>michael<span class="op">/</span>Github<span class="op">/</span>learn<span class="op">-</span>python3<span class="op">/</span>samples<span class="op">/</span>debug<span class="op">/</span>err.py(<span class="dv">7</span>)<span class="op">&lt;</span>module<span class="op">&gt;</span>()
<span class="op">-&gt;</span> <span class="bu">print</span> <span class="dv">10</span> <span class="op">/</span> n
(Pdb) p n
<span class="dv">0</span>
(Pdb) c
Traceback (most recent call last):
  File <span class="st">&quot;err.py&quot;</span>, line <span class="dv">7</span>, <span class="op">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span>
    <span class="bu">print</span> <span class="dv">10</span> <span class="op">/</span> n
<span class="pp">ZeroDivisionError</span>: division by zero</code></pre></div>
<p>&#36825;&#20010;&#26041;&#24335;&#27604;&#30452;&#25509;&#21551;&#21160;<code>pdb</code>&#21333;&#27493;&#35843;&#35797;&#25928;&#29575;&#35201;&#39640;&#24456;&#22810;&#65292;&#20294;&#20063;&#39640;&#19981;&#21040;&#21738;&#21435;&#12290;</p>
<h4 id="ide">IDE</h4>
<p>&#22914;&#26524;&#35201;&#27604;&#36739;&#29245;&#22320;&#35774;&#32622;&#26029;&#28857;&#12289;&#21333;&#27493;&#25191;&#34892;&#65292;&#23601;&#38656;&#35201;&#19968;&#20010;&#25903;&#25345;&#35843;&#35797;&#21151;&#33021;&#30340;<code>IDE</code>&#12290;&#30446;&#21069;&#27604;&#36739;&#22909;&#30340;<code>Python IDE</code>&#26377;<code>PyCharm</code>&#65306;</p>
<p><code>http://www.jetbrains.com/pycharm/</code></p>
<p>&#21478;&#22806;&#65292;<code>Eclipse</code>&#21152;&#19978;<code>pydev</code>&#25554;&#20214;&#20063;&#21487;&#20197;&#35843;&#35797;Python&#31243;&#24207;&#12290; &#23567;&#32467;</p>
<p>&#20889;&#31243;&#24207;&#26368;&#30171;&#33510;&#30340;&#20107;&#24773;&#33707;&#36807;&#20110;&#35843;&#35797;&#65292;&#31243;&#24207;&#24448;&#24448;&#20250;&#20197;&#20320;&#24847;&#24819;&#19981;&#21040;&#30340;&#27969;&#31243;&#26469;&#36816;&#34892;&#65292;&#20320;&#26399;&#24453;&#25191;&#34892;&#30340;&#35821;&#21477;&#20854;&#23454;&#26681;&#26412;&#27809;&#26377;&#25191;&#34892;&#65292;&#36825;&#26102;&#20505;&#65292;&#23601;&#38656;&#35201;&#35843;&#35797;&#20102;&#12290;</p>
<p>&#34429;&#28982;&#29992;IDE&#35843;&#35797;&#36215;&#26469;&#27604;&#36739;&#26041;&#20415;&#65292;&#20294;&#26159;&#26368;&#21518;&#20320;&#20250;&#21457;&#29616;&#65292;<code>logging</code>&#25165;&#26159;&#32456;&#26497;&#27494;&#22120;&#12290;</p>
<h3 id="&#21333;&#20803;&#27979;&#35797;">11.3 &#21333;&#20803;&#27979;&#35797;</h3>
<p>&#22914;&#26524;&#20320;&#21548;&#35828;&#36807;&#8220;&#27979;&#35797;&#39537;&#21160;&#24320;&#21457;&#8221;&#65288;<code>TDD&#65306;Test-Driven Development</code>&#65289;&#65292;&#21333;&#20803;&#27979;&#35797;&#23601;&#19981;&#38476;&#29983;&#12290;</p>
<p>&#21333;&#20803;&#27979;&#35797;&#26159;&#29992;&#26469;&#23545;&#19968;&#20010;&#27169;&#22359;&#12289;&#19968;&#20010;&#20989;&#25968;&#25110;&#32773;&#19968;&#20010;&#31867;&#26469;&#36827;&#34892;&#27491;&#30830;&#24615;&#26816;&#39564;&#30340;&#27979;&#35797;&#24037;&#20316;&#12290;</p>
<p>&#27604;&#22914;&#23545;&#20989;&#25968;<code>abs()</code>&#65292;&#25105;&#20204;&#21487;&#20197;&#32534;&#20889;&#20986;&#20197;&#19979;&#20960;&#20010;&#27979;&#35797;&#29992;&#20363;&#65306;</p>
<ul>
<li><p>&#36755;&#20837;&#27491;&#25968;&#65292;&#27604;&#22914;<code>1&#12289;1.2&#12289;0.99</code>&#65292;&#26399;&#24453;&#36820;&#22238;&#20540;&#19982;&#36755;&#20837;&#30456;&#21516;&#65307;</p></li>
<li><p>&#36755;&#20837;&#36127;&#25968;&#65292;&#27604;&#22914;<code>-1&#12289;-1.2&#12289;-0.99</code>&#65292;&#26399;&#24453;&#36820;&#22238;&#20540;&#19982;&#36755;&#20837;&#30456;&#21453;&#65307;</p></li>
<li><p>&#36755;&#20837;0&#65292;&#26399;&#24453;&#36820;&#22238;0&#65307;</p></li>
<li><p>&#36755;&#20837;&#38750;&#25968;&#20540;&#31867;&#22411;&#65292;&#27604;&#22914;<code>None&#12289;[]&#12289;{}</code>&#65292;&#26399;&#24453;&#25243;&#20986;<code>TypeError</code>&#12290;</p></li>
</ul>
<p>&#25226;&#19978;&#38754;&#30340;&#27979;&#35797;&#29992;&#20363;&#25918;&#21040;&#19968;&#20010;&#27979;&#35797;&#27169;&#22359;&#37324;&#65292;&#23601;&#26159;&#19968;&#20010;&#23436;&#25972;&#30340;&#21333;&#20803;&#27979;&#35797;&#12290;</p>
<p>&#22914;&#26524;&#21333;&#20803;&#27979;&#35797;&#36890;&#36807;&#65292;&#35828;&#26126;&#25105;&#20204;&#27979;&#35797;&#30340;&#36825;&#20010;&#20989;&#25968;&#33021;&#22815;&#27491;&#24120;&#24037;&#20316;&#12290;&#22914;&#26524;&#21333;&#20803;&#27979;&#35797;&#19981;&#36890;&#36807;&#65292;&#35201;&#20040;&#20989;&#25968;&#26377;bug&#65292;&#35201;&#20040;&#27979;&#35797;&#26465;&#20214;&#36755;&#20837;&#19981;&#27491;&#30830;&#65292;&#24635;&#20043;&#65292;&#38656;&#35201;&#20462;&#22797;&#20351;&#21333;&#20803;&#27979;&#35797;&#33021;&#22815;&#36890;&#36807;&#12290;</p>
<p>&#21333;&#20803;&#27979;&#35797;&#36890;&#36807;&#21518;&#26377;&#20160;&#20040;&#24847;&#20041;&#21602;&#65311;&#22914;&#26524;&#25105;&#20204;&#23545;<code>abs()</code>&#20989;&#25968;&#20195;&#30721;&#20570;&#20102;&#20462;&#25913;&#65292;&#21482;&#38656;&#35201;&#20877;&#36305;&#19968;&#36941;&#21333;&#20803;&#27979;&#35797;&#65292;&#22914;&#26524;&#36890;&#36807;&#65292;&#35828;&#26126;&#25105;&#20204;&#30340;&#20462;&#25913;&#19981;&#20250;&#23545;<code>abs()</code>&#20989;&#25968;&#21407;&#26377;&#30340;&#34892;&#20026;&#36896;&#25104;&#24433;&#21709;&#65292;&#22914;&#26524;&#27979;&#35797;&#19981;&#36890;&#36807;&#65292;&#35828;&#26126;&#25105;&#20204;&#30340;&#20462;&#25913;&#19982;&#21407;&#26377;&#34892;&#20026;&#19981;&#19968;&#33268;&#65292;&#35201;&#20040;&#20462;&#25913;&#20195;&#30721;&#65292;&#35201;&#20040;&#20462;&#25913;&#27979;&#35797;&#12290;</p>
<p>&#36825;&#31181;&#20197;&#27979;&#35797;&#20026;&#39537;&#21160;&#30340;&#24320;&#21457;&#27169;&#24335;&#26368;&#22823;&#30340;&#22909;&#22788;&#23601;&#26159;&#30830;&#20445;&#19968;&#20010;&#31243;&#24207;&#27169;&#22359;&#30340;&#34892;&#20026;&#31526;&#21512;&#25105;&#20204;&#35774;&#35745;&#30340;&#27979;&#35797;&#29992;&#20363;&#12290;&#22312;&#23558;&#26469;&#20462;&#25913;&#30340;&#26102;&#20505;&#65292;&#21487;&#20197;&#26497;&#22823;&#31243;&#24230;&#22320;&#20445;&#35777;&#35813;&#27169;&#22359;&#34892;&#20026;&#20173;&#28982;&#26159;&#27491;&#30830;&#30340;&#12290;</p>
<p>&#25105;&#20204;&#26469;&#32534;&#20889;&#19968;&#20010;<code>Dict</code>&#31867;&#65292;&#36825;&#20010;&#31867;&#30340;&#34892;&#20026;&#21644;<code>dict</code>&#19968;&#33268;&#65292;&#20294;&#26159;&#21487;&#20197;&#36890;&#36807;&#23646;&#24615;&#26469;&#35775;&#38382;&#65292;&#29992;&#36215;&#26469;&#23601;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> d <span class="op">=</span> Dict(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="dv">2</span>)
<span class="op">&gt;&gt;&gt;</span> d[<span class="st">&#39;a&#39;</span>]
<span class="dv">1</span>
<span class="op">&gt;&gt;&gt;</span> d.a
<span class="dv">1</span></code></pre></div>
<p><code>mydict.py</code>&#20195;&#30721;&#22914;&#19979;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">class</span> Dict(<span class="bu">dict</span>):

    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, <span class="op">**</span>kw):
        <span class="bu">super</span>().<span class="fu">__init__</span>(<span class="op">**</span>kw)

    <span class="kw">def</span> <span class="fu">__getattr__</span>(<span class="va">self</span>, key):
        <span class="cf">try</span>:
            <span class="cf">return</span> <span class="va">self</span>[key]
        <span class="cf">except</span> <span class="pp">KeyError</span>:
            <span class="cf">raise</span> <span class="pp">AttributeError</span>(<span class="vs">r&quot;&#39;Dict&#39; object has no attribute &#39;</span><span class="sc">%s</span><span class="vs">&#39;&quot;</span> <span class="op">%</span> key)

    <span class="kw">def</span> <span class="fu">__setattr__</span>(<span class="va">self</span>, key, value):
        <span class="va">self</span>[key] <span class="op">=</span> value</code></pre></div>
<p>&#20026;&#20102;&#32534;&#20889;&#21333;&#20803;&#27979;&#35797;&#65292;&#25105;&#20204;&#38656;&#35201;&#24341;&#20837;Python&#33258;&#24102;&#30340;<code>unittest</code>&#27169;&#22359;&#65292;&#32534;&#20889;<code>mydict_test.py</code>&#22914;&#19979;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> unittest

<span class="im">from</span> mydict <span class="im">import</span> Dict

<span class="kw">class</span> TestDict(unittest.TestCase):

    <span class="kw">def</span> test_init(<span class="va">self</span>):
        d <span class="op">=</span> Dict(a<span class="op">=</span><span class="dv">1</span>, b<span class="op">=</span><span class="st">&#39;test&#39;</span>)
        <span class="va">self</span>.assertEqual(d.a, <span class="dv">1</span>)
        <span class="va">self</span>.assertEqual(d.b, <span class="st">&#39;test&#39;</span>)
        <span class="va">self</span>.assertTrue(<span class="bu">isinstance</span>(d, <span class="bu">dict</span>))

    <span class="kw">def</span> test_key(<span class="va">self</span>):
        d <span class="op">=</span> Dict()
        d[<span class="st">&#39;key&#39;</span>] <span class="op">=</span> <span class="st">&#39;value&#39;</span>
        <span class="va">self</span>.assertEqual(d.key, <span class="st">&#39;value&#39;</span>)

    <span class="kw">def</span> test_attr(<span class="va">self</span>):
        d <span class="op">=</span> Dict()
        d.key <span class="op">=</span> <span class="st">&#39;value&#39;</span>
        <span class="va">self</span>.assertTrue(<span class="st">&#39;key&#39;</span> <span class="op">in</span> d)
        <span class="va">self</span>.assertEqual(d[<span class="st">&#39;key&#39;</span>], <span class="st">&#39;value&#39;</span>)

    <span class="kw">def</span> test_keyerror(<span class="va">self</span>):
        d <span class="op">=</span> Dict()
        <span class="cf">with</span> <span class="va">self</span>.assertRaises(<span class="pp">KeyError</span>):
            value <span class="op">=</span> d[<span class="st">&#39;empty&#39;</span>]

    <span class="kw">def</span> test_attrerror(<span class="va">self</span>):
        d <span class="op">=</span> Dict()
        <span class="cf">with</span> <span class="va">self</span>.assertRaises(<span class="pp">AttributeError</span>):
            value <span class="op">=</span> d.empty</code></pre></div>
<p>&#32534;&#20889;&#21333;&#20803;&#27979;&#35797;&#26102;&#65292;&#25105;&#20204;&#38656;&#35201;&#32534;&#20889;&#19968;&#20010;&#27979;&#35797;&#31867;&#65292;&#20174;<code>unittest.TestCase</code>&#32487;&#25215;&#12290;</p>
<p>&#20197;<code>test</code>&#24320;&#22836;&#30340;&#26041;&#27861;&#23601;&#26159;&#27979;&#35797;&#26041;&#27861;&#65292;&#19981;&#20197;<code>test</code>&#24320;&#22836;&#30340;&#26041;&#27861;&#19981;&#34987;&#35748;&#20026;&#26159;&#27979;&#35797;&#26041;&#27861;&#65292;&#27979;&#35797;&#30340;&#26102;&#20505;&#19981;&#20250;&#34987;&#25191;&#34892;&#12290;</p>
<p>&#23545;&#27599;&#19968;&#31867;&#27979;&#35797;&#37117;&#38656;&#35201;&#32534;&#20889;&#19968;&#20010;<code>test_xxx()</code>&#26041;&#27861;&#12290;&#30001;&#20110;<code>unittest.TestCase</code>&#25552;&#20379;&#20102;&#24456;&#22810;&#20869;&#32622;&#30340;&#26465;&#20214;&#21028;&#26029;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#35843;&#29992;&#36825;&#20123;&#26041;&#27861;&#23601;&#21487;&#20197;&#26029;&#35328;&#36755;&#20986;&#26159;&#21542;&#26159;&#25105;&#20204;&#25152;&#26399;&#26395;&#30340;&#12290;&#26368;&#24120;&#29992;&#30340;&#26029;&#35328;&#23601;&#26159;<code>assertEqual()</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="va">self</span>.assertEqual(<span class="bu">abs</span>(<span class="op">-</span><span class="dv">1</span>), <span class="dv">1</span>) <span class="co"># &#26029;&#35328;&#20989;&#25968;&#36820;&#22238;&#30340;&#32467;&#26524;&#19982;1&#30456;&#31561;</span></code></pre></div>
<p>&#21478;&#19968;&#31181;&#37325;&#35201;&#30340;&#26029;&#35328;&#23601;&#26159;&#26399;&#24453;&#25243;&#20986;&#25351;&#23450;&#31867;&#22411;&#30340;Error&#65292;&#27604;&#22914;&#36890;&#36807;<code>d['empty']</code>&#35775;&#38382;&#19981;&#23384;&#22312;&#30340;<code>key</code>&#26102;&#65292;&#26029;&#35328;&#20250;&#25243;&#20986;<code>KeyError</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">with</span> <span class="va">self</span>.assertRaises(<span class="pp">KeyError</span>):
    value <span class="op">=</span> d[<span class="st">&#39;empty&#39;</span>]</code></pre></div>
<p>&#32780;&#36890;&#36807;<code>d.empty</code>&#35775;&#38382;&#19981;&#23384;&#22312;&#30340;key&#26102;&#65292;&#25105;&#20204;&#26399;&#24453;&#25243;&#20986;<code>AttributeError</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">with</span> <span class="va">self</span>.assertRaises(<span class="pp">AttributeError</span>):
    value <span class="op">=</span> d.empty</code></pre></div>
<h4 id="&#36816;&#34892;&#21333;&#20803;&#27979;&#35797;">&#36816;&#34892;&#21333;&#20803;&#27979;&#35797;</h4>
<p>&#19968;&#26086;&#32534;&#20889;&#22909;&#21333;&#20803;&#27979;&#35797;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#36816;&#34892;&#21333;&#20803;&#27979;&#35797;&#12290;&#26368;&#31616;&#21333;&#30340;&#36816;&#34892;&#26041;&#24335;&#26159;&#22312;<code>mydict_test.py</code>&#30340;&#26368;&#21518;&#21152;&#19978;&#20004;&#34892;&#20195;&#30721;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:
    unittest.main()</code></pre></div>
<p>&#36825;&#26679;&#23601;&#21487;&#20197;&#25226;<code>mydict_test.py</code>&#24403;&#20570;&#27491;&#24120;&#30340;<code>python</code>&#33050;&#26412;&#36816;&#34892;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">python3</span> mydict_test.py</code></pre></div>
<p>&#21478;&#19968;&#31181;&#26041;&#27861;&#26159;&#22312;&#21629;&#20196;&#34892;&#36890;&#36807;&#21442;&#25968;<code>-m unittest</code>&#30452;&#25509;&#36816;&#34892;&#21333;&#20803;&#27979;&#35797;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">python3</span> -m unittest mydict_test
<span class="kw">.....</span>
<span class="kw">----------------------------------------------------------------------</span>
<span class="kw">Ran</span> 5 tests in 0.000s

<span class="kw">OK</span></code></pre></div>
<p>&#36825;&#26159;&#25512;&#33616;&#30340;&#20570;&#27861;&#65292;&#22240;&#20026;&#36825;&#26679;&#21487;&#20197;&#19968;&#27425;&#25209;&#37327;&#36816;&#34892;&#24456;&#22810;&#21333;&#20803;&#27979;&#35797;&#65292;&#24182;&#19988;&#65292;&#26377;&#24456;&#22810;&#24037;&#20855;&#21487;&#20197;&#33258;&#21160;&#26469;&#36816;&#34892;&#36825;&#20123;&#21333;&#20803;&#27979;&#35797;&#12290;</p>
<h4 id="setup&#19982;teardown">setUp&#19982;tearDown</h4>
<p>&#21487;&#20197;&#22312;&#21333;&#20803;&#27979;&#35797;&#20013;&#32534;&#20889;&#20004;&#20010;&#29305;&#27530;&#30340;<code>setUp()</code>&#21644;<code>tearDown()</code>&#26041;&#27861;&#12290;&#36825;&#20004;&#20010;&#26041;&#27861;&#20250;&#20998;&#21035;&#22312;&#27599;&#35843;&#29992;&#19968;&#20010;&#27979;&#35797;&#26041;&#27861;&#30340;&#21069;&#21518;&#20998;&#21035;&#34987;&#25191;&#34892;&#12290;</p>
<p><code>setUp()</code>&#21644;<code>tearDown()</code>&#26041;&#27861;&#26377;&#20160;&#20040;&#29992;&#21602;&#65311;&#35774;&#24819;&#20320;&#30340;&#27979;&#35797;&#38656;&#35201;&#21551;&#21160;&#19968;&#20010;&#25968;&#25454;&#24211;&#65292;&#36825;&#26102;&#65292;&#23601;&#21487;&#20197;&#22312;<code>setUp()</code>&#26041;&#27861;&#20013;&#36830;&#25509;&#25968;&#25454;&#24211;&#65292;&#22312;<code>tearDown()</code>&#26041;&#27861;&#20013;&#20851;&#38381;&#25968;&#25454;&#24211;&#65292;&#36825;&#26679;&#65292;&#19981;&#24517;&#22312;&#27599;&#20010;&#27979;&#35797;&#26041;&#27861;&#20013;&#37325;&#22797;&#30456;&#21516;&#30340;&#20195;&#30721;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">class</span> TestDict(unittest.TestCase):

    <span class="kw">def</span> setUp(<span class="va">self</span>):
        <span class="bu">print</span>(<span class="st">&#39;setUp...&#39;</span>)

    <span class="kw">def</span> tearDown(<span class="va">self</span>):
        <span class="bu">print</span>(<span class="st">&#39;tearDown...&#39;</span>)</code></pre></div>
<p>&#21487;&#20197;&#20877;&#27425;&#36816;&#34892;&#27979;&#35797;&#30475;&#30475;&#27599;&#20010;&#27979;&#35797;&#26041;&#27861;&#35843;&#29992;&#21069;&#21518;&#26159;&#21542;&#20250;&#25171;&#21360;&#20986;<code>setUp...</code>&#21644;<code>tearDown...</code>&#12290; &#23567;&#32467;</p>
<p>&#21333;&#20803;&#27979;&#35797;&#21487;&#20197;&#26377;&#25928;&#22320;&#27979;&#35797;&#26576;&#20010;&#31243;&#24207;&#27169;&#22359;&#30340;&#34892;&#20026;&#65292;&#26159;&#26410;&#26469;&#37325;&#26500;&#20195;&#30721;&#30340;&#20449;&#24515;&#20445;&#35777;&#12290;</p>
<p>&#21333;&#20803;&#27979;&#35797;&#30340;&#27979;&#35797;&#29992;&#20363;&#35201;&#35206;&#30422;&#24120;&#29992;&#30340;&#36755;&#20837;&#32452;&#21512;&#12289;&#36793;&#30028;&#26465;&#20214;&#21644;&#24322;&#24120;&#12290;</p>
<p>&#21333;&#20803;&#27979;&#35797;&#20195;&#30721;&#35201;&#38750;&#24120;&#31616;&#21333;&#65292;&#22914;&#26524;&#27979;&#35797;&#20195;&#30721;&#22826;&#22797;&#26434;&#65292;&#37027;&#20040;&#27979;&#35797;&#20195;&#30721;&#26412;&#36523;&#23601;&#21487;&#33021;&#26377;bug&#12290;</p>
<p>&#21333;&#20803;&#27979;&#35797;&#36890;&#36807;&#20102;&#24182;&#19981;&#24847;&#21619;&#30528;&#31243;&#24207;&#23601;&#27809;&#26377;bug&#20102;&#65292;&#20294;&#26159;&#19981;&#36890;&#36807;&#31243;&#24207;&#32943;&#23450;&#26377;bug&#12290;</p>
<h3 id="&#25991;&#26723;&#27979;&#35797;">11.4 &#25991;&#26723;&#27979;&#35797;</h3>
<p>&#22914;&#26524;&#20320;&#32463;&#24120;&#38405;&#35835;Python&#30340;&#23448;&#26041;&#25991;&#26723;&#65292;&#21487;&#20197;&#30475;&#21040;&#24456;&#22810;&#25991;&#26723;&#37117;&#26377;&#31034;&#20363;&#20195;&#30721;&#12290;&#27604;&#22914;<code>re</code>&#27169;&#22359;&#23601;&#24102;&#20102;&#24456;&#22810;&#31034;&#20363;&#20195;&#30721;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> re
<span class="op">&gt;&gt;&gt;</span> m <span class="op">=</span> re.search(<span class="st">&#39;(?&lt;=abc)def&#39;</span>, <span class="st">&#39;abcdef&#39;</span>)
<span class="op">&gt;&gt;&gt;</span> m.group(<span class="dv">0</span>)
<span class="co">&#39;def&#39;</span></code></pre></div>
<p>&#21487;&#20197;&#25226;&#36825;&#20123;&#31034;&#20363;&#20195;&#30721;&#22312;Python&#30340;&#20132;&#20114;&#24335;&#29615;&#22659;&#19979;&#36755;&#20837;&#24182;&#25191;&#34892;&#65292;&#32467;&#26524;&#19982;&#25991;&#26723;&#20013;&#30340;&#31034;&#20363;&#20195;&#30721;&#26174;&#31034;&#30340;&#19968;&#33268;&#12290;</p>
<p>&#36825;&#20123;&#20195;&#30721;&#19982;&#20854;&#20182;&#35828;&#26126;&#21487;&#20197;&#20889;&#22312;&#27880;&#37322;&#20013;&#65292;&#28982;&#21518;&#65292;&#30001;&#19968;&#20123;&#24037;&#20855;&#26469;&#33258;&#21160;&#29983;&#25104;&#25991;&#26723;&#12290;&#26082;&#28982;&#36825;&#20123;&#20195;&#30721;&#26412;&#36523;&#23601;&#21487;&#20197;&#31896;&#36148;&#20986;&#26469;&#30452;&#25509;&#36816;&#34892;&#65292;&#37027;&#20040;&#65292;&#21487;&#19981;&#21487;&#20197;&#33258;&#21160;&#25191;&#34892;&#20889;&#22312;&#27880;&#37322;&#20013;&#30340;&#36825;&#20123;&#20195;&#30721;&#21602;&#65311;</p>
<p>&#31572;&#26696;&#26159;&#32943;&#23450;&#30340;&#12290;</p>
<p>&#24403;&#25105;&#20204;&#32534;&#20889;&#27880;&#37322;&#26102;&#65292;&#22914;&#26524;&#20889;&#19978;&#36825;&#26679;&#30340;&#27880;&#37322;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> <span class="bu">abs</span>(n):
    <span class="co">&#39;&#39;&#39;</span>
<span class="co">    Function to get absolute value of number.</span>

<span class="co">    Example:</span>

<span class="co">    &gt;&gt;&gt; abs(1)</span>
<span class="co">    1</span>
<span class="co">    &gt;&gt;&gt; abs(-1)</span>
<span class="co">    1</span>
<span class="co">    &gt;&gt;&gt; abs(0)</span>
<span class="co">    0</span>
<span class="co">    &#39;&#39;&#39;</span>
    <span class="cf">return</span> n <span class="cf">if</span> n <span class="op">&gt;=</span> <span class="dv">0</span> <span class="cf">else</span> (<span class="op">-</span>n)</code></pre></div>
<p>&#26080;&#30097;&#26356;&#26126;&#30830;&#22320;&#21578;&#35785;&#20989;&#25968;&#30340;&#35843;&#29992;&#32773;&#35813;&#20989;&#25968;&#30340;&#26399;&#26395;&#36755;&#20837;&#21644;&#36755;&#20986;&#12290;</p>
<p>&#24182;&#19988;&#65292;Python&#20869;&#32622;&#30340;&#8220;<strong>&#25991;&#26723;&#27979;&#35797;</strong>&#8221;&#65288;<code>doctest</code>&#65289;&#27169;&#22359;&#21487;&#20197;&#30452;&#25509;&#25552;&#21462;&#27880;&#37322;&#20013;&#30340;&#20195;&#30721;&#24182;&#25191;&#34892;&#27979;&#35797;&#12290;</p>
<p><code>doctest</code>&#20005;&#26684;&#25353;&#29031;Python&#20132;&#20114;&#24335;&#21629;&#20196;&#34892;&#30340;&#36755;&#20837;&#21644;&#36755;&#20986;&#26469;&#21028;&#26029;&#27979;&#35797;&#32467;&#26524;&#26159;&#21542;&#27491;&#30830;&#12290;&#21482;&#26377;&#27979;&#35797;&#24322;&#24120;&#30340;&#26102;&#20505;&#65292;&#21487;&#20197;&#29992;<code>...</code>&#34920;&#31034;&#20013;&#38388;&#19968;&#22823;&#27573;&#28902;&#20154;&#30340;&#36755;&#20986;&#12290;</p>
<p>&#35753;&#25105;&#20204;&#29992;<code>doctest</code>&#26469;&#27979;&#35797;&#19978;&#27425;&#32534;&#20889;&#30340;<code>Dict</code>&#31867;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># mydict2.py</span>
<span class="kw">class</span> Dict(<span class="bu">dict</span>):
    <span class="co">&#39;&#39;&#39;</span>
<span class="co">    Simple dict but also support access as x.y style.</span>

<span class="co">    &gt;&gt;&gt; d1 = Dict()</span>
<span class="co">    &gt;&gt;&gt; d1[&#39;x&#39;] = 100</span>
<span class="co">    &gt;&gt;&gt; d1.x</span>
<span class="co">    100</span>
<span class="co">    &gt;&gt;&gt; d1.y = 200</span>
<span class="co">    &gt;&gt;&gt; d1[&#39;y&#39;]</span>
<span class="co">    200</span>
<span class="co">    &gt;&gt;&gt; d2 = Dict(a=1, b=2, c=&#39;3&#39;)</span>
<span class="co">    &gt;&gt;&gt; d2.c</span>
<span class="co">    &#39;3&#39;</span>
<span class="co">    &gt;&gt;&gt; d2[&#39;empty&#39;]</span>
<span class="co">    Traceback (most recent call last):</span>
<span class="co">        ...</span>
<span class="co">    KeyError: &#39;empty&#39;</span>
<span class="co">    &gt;&gt;&gt; d2.empty</span>
<span class="co">    Traceback (most recent call last):</span>
<span class="co">        ...</span>
<span class="co">    AttributeError: &#39;Dict&#39; object has no attribute &#39;empty&#39;</span>
<span class="co">    &#39;&#39;&#39;</span>
    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, <span class="op">**</span>kw):
        <span class="bu">super</span>(Dict, <span class="va">self</span>).<span class="fu">__init__</span>(<span class="op">**</span>kw)

    <span class="kw">def</span> <span class="fu">__getattr__</span>(<span class="va">self</span>, key):
        <span class="cf">try</span>:
            <span class="cf">return</span> <span class="va">self</span>[key]
        <span class="cf">except</span> <span class="pp">KeyError</span>:
            <span class="cf">raise</span> <span class="pp">AttributeError</span>(<span class="vs">r&quot;&#39;Dict&#39; object has no attribute &#39;</span><span class="sc">%s</span><span class="vs">&#39;&quot;</span> <span class="op">%</span> key)

    <span class="kw">def</span> <span class="fu">__setattr__</span>(<span class="va">self</span>, key, value):
        <span class="va">self</span>[key] <span class="op">=</span> value

<span class="cf">if</span> <span class="va">__name__</span><span class="op">==</span><span class="st">&#39;__main__&#39;</span>:
    <span class="im">import</span> doctest
    doctest.testmod()</code></pre></div>
<p>&#36816;&#34892;<code>python3 mydict2.py</code>&#65306;</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">python3</span> mydict2.py</code></pre></div>
<p>&#20160;&#20040;&#36755;&#20986;&#20063;&#27809;&#26377;&#12290;&#36825;&#35828;&#26126;&#25105;&#20204;&#32534;&#20889;&#30340;<code>doctest</code>&#36816;&#34892;&#37117;&#26159;&#27491;&#30830;&#30340;&#12290;&#22914;&#26524;&#31243;&#24207;&#26377;&#38382;&#39064;&#65292;&#27604;&#22914;&#25226;<code>__getattr__()</code>&#26041;&#27861;&#27880;&#37322;&#25481;&#65292;&#20877;&#36816;&#34892;&#23601;&#20250;&#25253;&#38169;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">python3</span> mydict2.py
<span class="kw">**********************************************************************</span>
<span class="kw">File</span> <span class="st">&quot;/Users/michael/Github/learn-python3/samples/debug/mydict2.py&quot;</span>, line 10, in __main__.Dict
<span class="kw">Failed</span> example:
    <span class="kw">d1.x</span>
<span class="kw">Exception</span> raised:
    <span class="kw">Traceback</span> (most recent call last)<span class="kw">:</span>
      <span class="kw">...</span>
    <span class="kw">AttributeError</span>: <span class="st">&#39;Dict&#39;</span> object has no attribute <span class="st">&#39;x&#39;</span>
<span class="kw">**********************************************************************</span>
<span class="kw">File</span> <span class="st">&quot;/Users/michael/Github/learn-python3/samples/debug/mydict2.py&quot;</span>, line 16, in __main__.Dict
<span class="kw">Failed</span> example:
    <span class="kw">d2.c</span>
<span class="kw">Exception</span> raised:
    <span class="kw">Traceback</span> (most recent call last)<span class="kw">:</span>
      <span class="kw">...</span>
    <span class="kw">AttributeError</span>: <span class="st">&#39;Dict&#39;</span> object has no attribute <span class="st">&#39;c&#39;</span>
<span class="kw">**********************************************************************</span>
<span class="kw">1</span> items had failures:
   <span class="kw">2</span> of   9 in __main__.Dict
<span class="kw">***Test</span> Failed*** 2 failures.</code></pre></div>
<p>&#27880;&#24847;&#21040;&#26368;&#21518;3&#34892;&#20195;&#30721;&#12290;&#24403;&#27169;&#22359;&#27491;&#24120;&#23548;&#20837;&#26102;&#65292;<code>doctest</code>&#19981;&#20250;&#34987;&#25191;&#34892;&#12290;&#21482;&#26377;&#22312;&#21629;&#20196;&#34892;&#30452;&#25509;&#36816;&#34892;&#26102;&#65292;&#25165;&#25191;&#34892;<code>doctest</code>&#12290;&#25152;&#20197;&#65292;&#19981;&#24517;&#25285;&#24515;<code>doctest</code>&#20250;&#22312;&#38750;&#27979;&#35797;&#29615;&#22659;&#19979;&#25191;&#34892;&#12290;</p>
<h4 id="&#32451;&#20064;">&#32451;&#20064;</h4>
<p>&#23545;&#20989;&#25968;<code>fact(n)</code>&#32534;&#20889;<code>doctest</code>&#24182;&#25191;&#34892;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># -*- coding: utf-8 -*-</span>

<span class="kw">def</span> fact(n):
    <span class="co">&#39;&#39;&#39;</span>

<span class="co">    &#39;&#39;&#39;</span>
    <span class="cf">if</span> n <span class="op">&lt;</span> <span class="dv">1</span>:
        <span class="cf">raise</span> <span class="pp">ValueError</span>()
    <span class="cf">if</span> n <span class="op">==</span> <span class="dv">1</span>:
        <span class="cf">return</span> <span class="dv">1</span>
    <span class="cf">return</span> n <span class="op">*</span> fact(n <span class="op">-</span> <span class="dv">1</span>)

<span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:
    <span class="im">import</span> doctest
    doctest.testmod()</code></pre></div>
</body>
</html>
